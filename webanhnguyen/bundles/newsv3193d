function LoginFacebook(n){FB.login(function(t){t.status==="connected"?getLogin(n):console.log("User cancelled login or did not fully authorize.")},{scope:"email,public_profile,user_friends"})}function getLogin(n){FB.api("/me?fields=name,email",function(t){var i="",r="";t&&(i=t.name,r=t.email,UtilCommentFS.setCookie(UtilCommentFS.configConstant().nameCustomerCookie,i,1),UtilCommentFS.setCookie(UtilCommentFS.configConstant().nameEmailCookie,r,1),$(".fcm-login").hide("slow"),n.closest(".fcm-login").prev().find(".fshop-cmt-textarea").focus(),n.closest(".fcm-login").prev().find(".fshop-cmt-tabtn").show())})}var CommentFptShop,UtilCommentFS,ToastFts;(function(n){var u={topSpacing:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"sticky-wrapper",center:!1,getWidthFrom:"",responsiveWidth:!1},f=n(window),s=n(document),t=[],e=f.height(),r=function(){for(var u=f.scrollTop(),h=s.height(),c=h-e,l=u>c?c-u:0,r,o=0;o<t.length;o++){var i=t[o],a=i.stickyWrapper.offset().top,v=a-i.topSpacing-l;u<=v?i.currentTop!==null&&(i.stickyElement.css("width","").css("position","").css("top",""),i.stickyElement.trigger("sticky-end",[i]).parent().removeClass(i.className),i.currentTop=null):(r=h-i.stickyElement.outerHeight()-i.topSpacing-i.bottomSpacing-u-l,r=r<0?r+i.topSpacing:i.topSpacing,i.currentTop!=r&&(i.stickyElement.css("width",i.stickyElement.width()).css("position","fixed").css("top",r),typeof i.getWidthFrom!="undefined"&&i.stickyElement.css("width",n(i.getWidthFrom).width()),i.stickyElement.trigger("sticky-start",[i]).parent().addClass(i.className),i.currentTop=r))}},o=function(){var r,i;for(e=f.height(),r=0;r<t.length;r++)i=t[r],typeof i.getWidthFrom!="undefined"&&i.responsiveWidth===!0&&i.stickyElement.css("width",n(i.getWidthFrom).width())},i={init:function(i){var r=n.extend({},u,i);return this.each(function(){var i=n(this),f=i.attr("id"),s=f?f+"-"+u.wrapperClassName:u.wrapperClassName,o=n("<div><\/div>").attr("id",f+"-sticky-wrapper").addClass(r.wrapperClassName),e;i.wrapAll(o);r.center&&i.parent().css({width:i.outerWidth(),marginLeft:"auto",marginRight:"auto"});i.css("float")=="right"&&i.css({float:"none"}).parent().css({float:"right"});e=i.parent();e.css("height",i.outerHeight());t.push({topSpacing:r.topSpacing,bottomSpacing:r.bottomSpacing,stickyElement:i,currentTop:null,stickyWrapper:e,className:r.className,getWidthFrom:r.getWidthFrom,responsiveWidth:r.responsiveWidth})})},update:r,unstick:function(){return this.each(function(){for(var r=n(this),u=-1,i=0;i<t.length;i++)t[i].stickyElement.get(0)==r.get(0)&&(u=i);u!=-1&&(t.splice(u,1),r.unwrap(),r.removeAttr("style"))})}};window.addEventListener?(window.addEventListener("scroll",r,!1),window.addEventListener("resize",o,!1)):window.attachEvent&&(window.attachEvent("onscroll",r),window.attachEvent("onresize",o));n.fn.sticky=function(t){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist on jQuery.sticky");else return i.init.apply(this,arguments)};n.fn.unstick=function(t){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist on jQuery.sticky");else return i.unstick.apply(this,arguments)};n(function(){setTimeout(r,0)})})(jQuery),function(){var t,n;t=this.jQuery||window.jQuery;n=t(window);t.fn.stick_in_parent=function(i){var e,s,r,u,o,c,f,l,h,a;for(null==i&&(i={}),f=i.sticky_class,s=i.inner_scrolling,c=i.recalc_every,o=i.parent,u=i.offset_top,r=i.spacer,e=i.bottoming,null==u&&(u=0),null==o&&(o=void 0),null==s&&(s=!0),null==f&&(f="is_stuck"),null==e&&(e=!0),l=function(i,h,l,a,v,y,p,w){var tt,et,g,ut,b,k,ft,it,rt,d,nt;if(!i.data("sticky_kit")){if(i.data("sticky_kit",!0),k=i.parent(),null!=o&&(k=k.closest(o)),!k.length)throw"failed to find stick parent";if(tt=g=!1,(d=null!=r?r&&i.closest(r):t("<div />"))&&d.css("position",i.css("position")),ft=function(){var n,t,e;if(!w&&(n=parseInt(k.css("border-top-width"),10),t=parseInt(k.css("padding-top"),10),h=parseInt(k.css("padding-bottom"),10),l=k.offset().top+n+t,a=k.height(),g&&(tt=g=!1,null==r&&(i.insertAfter(d),d.detach()),i.css({position:"",top:"",width:"",bottom:""}).removeClass(f),e=!0),v=i.offset().top-parseInt(i.css("margin-top"),10)-u,y=i.outerHeight(!0),p=i.css("float"),d&&d.css({width:i.outerWidth(!0),height:y,display:i.css("display"),"vertical-align":i.css("vertical-align"),float:p}),e))return nt()},ft(),y!==a)return ut=void 0,b=u,rt=c,nt=function(){var t,it,o,nt;if(!w&&(null!=rt&&(--rt,0>=rt&&(rt=c,ft())),o=n.scrollTop(),null!=ut&&(it=o-ut),ut=o,g?(e&&(nt=o+y+b>a+l,tt&&!nt&&(tt=!1,i.css({position:"fixed",bottom:"",top:b}).trigger("sticky_kit:unbottom"))),o<v&&(g=!1,b=u,null==r&&("left"!==p&&"right"!==p||i.insertAfter(d),d.detach()),t={position:"",width:"",top:""},i.css(t).removeClass(f).trigger("sticky_kit:unstick")),s&&(t=n.height(),y+u>t&&!tt&&(b-=it,b=Math.max(t-y,b),b=Math.min(u,b),g&&i.css({top:b+"px"})))):o>v&&(g=!0,t={position:"fixed",top:b},t.width="border-box"===i.css("box-sizing")?i.outerWidth()+"px":i.width()+"px",i.css(t).addClass(f),null==r&&(i.after(d),"left"!==p&&"right"!==p||d.append(i)),i.trigger("sticky_kit:stick")),g&&e&&(null==nt&&(nt=o+y+b>a+l),!tt&&nt)))return tt=!0,"static"===k.css("position")&&k.css({position:"relative"}),i.css({position:"absolute",bottom:h,top:"auto"}).trigger("sticky_kit:bottom")},it=function(){return ft(),nt()},et=function(){return w=!0,n.off("touchmove",nt),n.off("scroll",nt),n.off("resize",it),t(document.body).off("sticky_kit:recalc",it),i.off("sticky_kit:detach",et),i.removeData("sticky_kit"),i.css({position:"",bottom:"",top:"",width:""}),k.position("position",""),g?(null==r&&("left"!==p&&"right"!==p||i.insertAfter(d),d.remove()),i.removeClass(f)):void 0},n.on("touchmove",nt),n.on("scroll",nt),n.on("resize",it),t(document.body).on("sticky_kit:recalc",it),i.on("sticky_kit:detach",et),setTimeout(nt,0)}},h=0,a=this.length;h<a;h++)i=this[h],l(t(i));return this}}.call(this);jfpts.newsdetail=function(){function n(){$(".btn_odn").click(function(n){n.preventDefault();var t=$(this).attr("data-id");jfpts.data.addOrder(t,undefined,null,0,null,"20000")});$(".btn_gidn").click(function(n){n.preventDefault();var t=$(this).attr("data-id");r(t)})}function t(){$(".boxpin").each(function(){i($(this))})}function i(n){var t=n.attr("data-lidp");$.get("/Ajax/News/GetBoxProduct",{arrId:t},function(t){t!=""&&n.html(t).show()})}function r(n){jfpts.utility.showLoading();$.get("/Ajax/News/GetBoxInfo",{id:n},function(n){if(n==""){jfpts.utility.notifyWarning("Có lỗi xảy ra. Bạn vui lòng thử lại");return}$("body").append(n);$("#ngif").modal("show");$("#ngif").on("hidden.bs.modal",function(){$("#ngif").remove()});$(".fnew-popsubmit").click(function(n){n.preventDefault();u()})}).complete(function(){jfpts.utility.hideLoading()})}function u(){var i=$('.fnew-popinfo input[name="variantId"]').val(),t=$('.fnew-popinfo input[name="name"]').val(),n=$('.fnew-popinfo input[name="phone"]').val();if(t==""){jfpts.utility.notifyWarningCenter("Bạn vui lòng nhập tên.");return}if(n.length<9||!$.isNumeric(n)){jfpts.utility.notifyWarningCenter("Bạn vui lòng nhập số điện thoại.");return}$(".fnew-popsubmit").hasClass("isPost")||(jfpts.utility.showLoading(),$(".fnew-popsubmit").addClass("isPost"),$.post("/Ajax/Order/AddOrder",{sourceName:"Đặt từ SĐT đăng ký tin tức",CampaignID:0,TotalPriceCampaignOrder:"",productVariantId:i,gender:1,name:t,email:"",phone:n,address:"",city:0,district:0,couponCode:"",accessories:"",talesSales:1,ArrPromotioID:"",typePayment:"boxselectShop",refered:document.location.href,shopname:"",storeid:0,sendoid:"",codeEmployee:""},function(n){if(typeof n.Error!="undefined"&&n.Error.toString()=="false"){$("#ngif").modal("hide");$("body").append(n.Messenger);$(".modal-order").modal("show");$(".modal-order").on("hidden.bs.modal",function(){$(".not-orderdt").removeClass("not-orderdt");$(".modal-order").remove()})}else jfpts.utility.notifyWarning("Cõ lỗi xảy ra. Bạn vui lòng thử lại.")}).complete(function(){jfpts.utility.hideLoading();$(".fnew-popsubmit").removeClass("isPost")}))}return{initEvent:n,showBoxProduct:t}}();$(document).ready(function(){var u,e,t,i,r,f,n;jfpts.newsdetail.initEvent();jfpts.newsdetail.showBoxProduct();location.pathname.length>40&&history.pushState&&location.search.indexOf("utm_source")<1&&!($("#linkredirect").attr("data-id").length==location.pathname.length)&&(window.onpopstate=history.replaceState(null,null,$("#linkredirect").attr("data-id")));$(".fnews-detail-content img").removeAttr("style");$(".fnews-menutop li").hover(function(){$(".fnews-menulist > li.active").addClass("sbegin");$(".fnews-menulist > li.sbegin").removeClass("active")});$(".fnews-menutop li").mouseout(function(){$(".fnews-menulist > li.sbegin").addClass("active")});$(".scrollerbar").height()<500?$(".scrollerbar").css("padding-right","0"):$(".scrollerbar").css("padding-right","15px");$(".fnews-detail-rsbotads").sticky({topSpacing:65,bottomSpacing:$(".fshop-footer").height()+35});$(".fshop-random-ads").sticky({topSpacing:65,bottomSpacing:$(".fshop-footer").height()+35});u=new Swiper(".fshop-rnl-swiper",{spaceBetween:5,slidesPerView:1,centeredSlides:!0,autoplay:4e3,autoplayDisableOnInteraction:!1,loop:!0,nextButton:".fshop-rnl-next",prevButton:".fshop-rnl-prev",preloadImages:!1,lazyLoading:!0,preventClicks:!1,preventClicksPropagation:!0});e=new Swiper(".fnews-sankm-slide",{spaceBetween:5,slidesPerView:1,centeredSlides:!0,grabCursor:!0,autoplay:2500,autoplayDisableOnInteraction:!1,loop:!0,nextButton:".kmt-sbutton-next",prevButton:".kmt-sbutton-prev"});$(".fshop-rnl-swiper").length>0&&u.init();n=$(".avg").attr("data-id");$("#NewsRating input").each(function(){$(this).attr("value")==n&&$(this).parent().addClass("checked")});$(".ratingR").click(function(){$(".rating span").removeClass("checked");$(this).parent().addClass("checked");var n=$(".ratingR:checked").val(),t=$(".rating").attr("data-id");$.post("/Ajax/News/InsertRating",{newsId:t,vote:n},function(){})});$("input:radio").change(function(){var n=this.value;alert("Bạn đã vote "+n+" sao cho bài viết này")});t=window.location.pathname.toLowerCase();i=$("#inputlink").val();$(".dropdown-menu > li>a").each(function(n,r){($(r).attr("href").toLowerCase()==t||$(r).attr("href").toLowerCase()==i)&&($(".fnews-menulist > li").removeClass("active"),$(".fnews-menulist > li > ul").removeClass("active"),$(r).parent().addClass("active"),$(r).parent().parent().parent().addClass("active"),$(".fnews-main-title").text($(r).text()))});$(".fnews-menulist > li > a").each(function(n,r){($(r).attr("href").toLowerCase()==t||$(r).attr("href").toLowerCase()==i)&&($(".fnews-menulist > li").removeClass("active"),$(".fnews-menulist > li > ul").removeClass("active"),$(r).parent().addClass("active"),$(".fnews-main-title").text($(r).text()))});r=$("iframe[src^='//www.youtube.com']");f=$("#fnew-ifa");r.each(function(){$(this).data("aspectRatio",this.height/this.width).removeAttr("height").removeAttr("width").css({"max-height":"350px"}).css({"max-width":"519px"})});$(window).resize(function(){var n=f.width();r.each(function(){var t=$(this);t.width(n).height(n*t.data("aspectRatio"))})}).resize();n=$(".avg").attr("data-id");$("#NewsRating input").each(function(){$(this).attr("value")==n&&$(this).parent().addClass("checked")})});$(document).on("click","a.ns-viewed",function(){var n=$(this).attr("data-id");$.post("/Ajax/News/UpdateViewed",{newsId:n},function(){})});(function(n,t,i){var r,u=n.getElementsByTagName(t)[0];n.getElementById(i)||(r=n.createElement(t),r.id=i,r.src="//connect.facebook.net/en_GB/sdk.js#xfbml=1&appId=275925289224538&version=v2.0",u.parentNode.insertBefore(r,u))})(document,"script","facebook-jssdk"),function(){var n=document.createElement("script"),t;n.type="text/javascript";n.async=!0;n.src="https://apis.google.com/js/plusone.js";t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}();window.___gcfg={lang:"vi"},function(){var n=document.createElement("script"),t;n.type="text/javascript";n.async=!0;n.src="https://apis.google.com/js/platform.js";t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}();$(document).on("click","#Viewmorevideo",function(){var n=$(this);n.hide("slow");$.get("/Ajax/Video/VewMoreListVideo",{page:n.attr("data-page")},function(t){$("#listvideoall").append(t.content);t.next?(n.show("slow"),n.find("strong").html(t.more),n.attr("data-page",t.page)):n.hide()})});$(document).on("click","#Viewmorenewsref",function(){var n=$(this);n.hide("slow");$.get("/Ajax/News/GetNewsRefDetailViewMore",{newname:$("#linkredirect").attr("data-id").split("/")[3],page:n.attr("data-page")},function(t){$(".fnews-detail-nmoresul").append(t.content);t.next?(n.show("slow"),n.attr("data-page",t.page)):n.hide()})});$(".receive-call").click(function(n){n.preventDefault();var i=$(".txt-box-consult input").val(),t=i.length>6;t?(t=i>=0||i<0,t?t=$(".input-box-consult").hasClass("loading-post-consult")==!1:($().toastmessage("showWarningToast","Bạn cần nhập đúng định dạng số điện thoại."),$(".txt-box-consult input").focus())):($().toastmessage("showWarningToast","Bạn cần nhập số điện thoại."),$(".txt-box-consult input").focus());t&&($(".input-box-consult").addClass("loading-post-consult"),$.post("/Ajax/Order/AddOrder",{sourceName:"Đặt từ SĐT đăng ký Tin tức",CampaignID:0,TotalPriceCampaignOrder:"",productVariantId:41683,gender:1,name:"Tin tức",email:"",phone:i,address:"",city:0,district:0,couponCode:"",accessories:"",talesSales:1,ArrPromotioID:"",typePayment:"boxselectShop",refered:window.location.href,shopname:"",storeid:0,sendoid:"",codeEmployee:""},function(n){if(console.log(n.Error),n.Error.toString()=="false"){$(".txt-box-consult input").val("");$("body").append(n.Messenger);$(".modal-order").modal("show");$(".modal-order").on("hidden.bs.modal",function(){$(".not-orderdt").removeClass("not-orderdt");$(".modal-order").remove()})}else $().toastmessage("showWarningToast","Xin lỗi, có lỗi xảy ra bạn hãy thao tác lại.");$(".input-box-consult").removeClass("loading-post-consult");$("body").append('<div style="display:none">'+n.Messenger+"<\/div>")}).complete(function(){}))});jQuery(document).ready(function(n){if(n("#wrapper-nt-comment").length>0){var t=new CommentFptShop({moduleId:n("#wrapper-nt-comment").attr("data-modul")});t.init()}});CommentFptShop=function(n){this.option=jQuery.extend({moduleId:0},n)};CommentFptShop.prototype.init=function(){var n=this;$(".scrollerbar").css("padding-right","15px");$("#wrapper-nt-comment").html(n.buildHtmlTemplateInit());$(document).on("click",".fcm-login-close",function(){$(this).closest(".fcm-login").hide("slow");$(document).find(".fshop-cmt-tabtn").show()});$(document).on("click",".fcm-login-fb",function(){LoginFacebook($(this))});$(document).on("click",".new-comment-ntc a",function(){var n=$("#listCommentCate").data("view");$("#listCommentCate").prepend(n);$(this).closest(".new-comment-ntc").remove()});n.loadComment(undefined,undefined,undefined,1,!1);n.filterComment();n.sortComment();n.sendComment();n.likeComment();n.replyComment();n.pagingComment();n.setIconEmotionComment()};CommentFptShop.prototype.buildHtmlTemplateInit=function(){return $("<div class='fshop-comment'>\n<div class='fshop-cmttitle'>\nBình luận<span class='fshop-cmtcount'>0<\/span>\n<\/div>\n<div class='fshop-cmt-head'>\n<div class='clearfix'>\n<div class='fshop-cmt-col6'>\n<div class='fshop-cmt-form'>\n<input id='txt-filter-comment' type='text' class='fshop-cmt-ftxt' placeholder='Tìm kiếm bình luận...'>\n<div class='fshop-cmt-fsbox'>\n<select class='fshop-cmt-fselect' id='select-condition-filter-comment'>\n<option value='0'>Tất cả<\/option>\n<option value='2'>Email<\/option>\n<option value='3'>Tên<\/option>\n<\/select>\n<\/div>\n<\/div>\n<\/div>\n<div class='fshop-cmt-col6'>\n<div class='fshop-cm-hsort'>\n<span data-value='1' class='sort-comment active'>Mới nhất<\/span> | <span class='sort-comment' data-value='0'>Quan tâm nhất<\/span>\n<\/div>\n<\/div>\n<\/div>\n<\/div>\n<div class='fshop-cmt-main'>\n<div class='clearfix'>\n<form>\n<div class='fshop-cmt-tabox'>\n<textarea id='txt-comment-cate' class='fshop-cmt-textarea' rows='3' placeholder='Viết bình luận của bạn...'><\/textarea>\n<input type='submit' class='fshop-cmt-tabtn' value='Bình luận' id='btnCommentCate'>\n<\/div>\n<\/form>\n<div class='fcm-login'>\n<div class='fcm-login-tb clearfix'>\n<span class='fcm-login-close'>×<\/span>\n<form id='register-information'>\n<div class='fcm-login-col'>\n<p class='fcm-login-title'>Nhập thông tin để bình luận:<\/p>\n<p><input class='fcm-login-txt' type='text' placeholder='Họ tên (bắt buộc)' name='name'/><\/p>\n<p><input class='fcm-login-txt' type='email' placeholder='Email' name='email'/><\/p>\n<p><input class='fcm-login-txt' type='text' placeholder='Điệnt thoại' name='phone'/><\/p>\n<p><input class='fcm-login-btn' type='submit' value='Bình luận' /><\/p>\n<\/div>\n<\/form>\n<div class='fcm-login-col'>\n<p class='fcm-login-title'>Hoặc đăng nhập qua: <\/p>\n<ul class='fcm-login-sul'>\n<li>\n<a href='javascript:void(0);' title='' class='fcm-login-fb'>\n<img src='/Content/Publishing/css/images/cmt/i_facebook.png?v=1' />\n<strong>Facebook<\/strong>\n<\/a>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n<\/div>\n<div id='listCommentCate'>\n<\/div>\n<\/div>\n<\/div>\n<div class='fshop-cmt-cmtmores' id='ntc-viewmore-comment' data-page='2'>\n<span>Xem thêm <strong>0<\/strong> bình luận<\/span>\n<\/div>\n<\/div>")};CommentFptShop.prototype.pageID=0;CommentFptShop.prototype.loadComment=function(n,t,i,r,u){var f=this,h=n||"",c=t||0,l=i||1,s=r||1,e=$("#wrapper-nt-comment").find("#listCommentCate"),o=$("#wrapper-nt-comment").find("#ntc-viewmore-comment");e.length>0&&$.ajax({type:"GET",url:UtilCommentFS.linkAjax().linkApiGetListComment,data:{pageId:f.pageID,modulId:f.option.moduleId,referID:$(".fnews-detail-rating").length>0?$(".fnews-detail-rating").attr("data-id"):0,title:$("head title")[0].text,orderby:l,keyword:h,catesearch:c,page:s,isNewTemplate:!0},beforeSend:function(){u?o.html(UtilCommentFS.configConstant().imgLoading):e.html(UtilCommentFS.configConstant().imgBigLoading)}}).done(function(n){u?(e.append(n.View),o.attr("data-page",Number(s)+1)):e.html(n.View);n.TotalRecordRest>0?o.show().html("<span>Xem thêm <strong >0<\/strong> bình luận<\/span>").find("strong").text(n.TotalRecordRest):o.hide().attr("data-page",2);$("#wrapper-nt-comment").find(".fshop-cmtcount").text(n.Total);f.pageID=n.PageID;f.setLikeCommentInit();f.loadNewComment()})};CommentFptShop.prototype.loadNewComment=function(){var n=0;clearInterval(n);n=setInterval(function(){$.ajax({type:"GET",url:UtilCommentFS.linkAjax().linkGetNewComment,data:{pageId:this.pageID,modulId:this.option.moduleId,currentLastId:$("#listCommentCate").find(".fshop-cmt-numlike").first().attr("data-id")}}).done(function(n){if(n&&Number(n.Total)>0){var t=$("<div class='new-comment-ntc'>\n<span>Bạn có <strong>0<\/strong> comment mới.<\/span>\n<a href='javascript:void(0);'>Click để xem<\/a>\n<\/div>");$("#listCommentCate").data("view",n.View);$(document).find(".new-comment-ntc").remove();t.insertBefore(".fshop-cmt-head").fadeIn("300").find("strong").text(n.Total)}})}.bind(this),UtilCommentFS.configConstant().timerGetNewComment)};CommentFptShop.prototype.pagingComment=function(){var n=this;$("#wrapper-nt-comment").find("#ntc-viewmore-comment").off("click").on("click",function(){var i=$(this).attr("data-page"),t=n.getValueFilter();n.loadComment(t.keyword,t.searchin,t.sort,i,!0);$(".fshop-cmt-main").scrollTop($(".fshop-cmt-main")[0].scrollHeight)})};CommentFptShop.prototype.sendComment=function(){var n=this,t="";$("#wrapper-nt-comment").off("click",".fshop-cmt-tabtn").on("click",".fshop-cmt-tabtn",function(n){n.preventDefault();var i=$(this),t=i.prev().val(),r=i.attr("data-id")||0,u=i.closest(".fshop-cmt-tabox").parent().next();if(t=UtilCommentFS.standardizedString(t),$.type(t)==="undefined"||t.length<4){ToastFts.showToast({text:"Bạn cần nhập nội dung lớn hơn 3 ký tự.",type:"Warning"});return}});$(document).on("keyup",".fshop-cmt-textarea",function(){var i="",u="",f="",r=$(this),e=r.next(),o=r.closest(".fshop-cmt-tabox").parent().next(),s=r.attr("data-id")||0;t=r.val();t.length>3&&(e.hide(),o.show("slow",function(){$(this).find(".fcm-login-btn").off("click").on("click",function(h){h.preventDefault();var c=$(this);return(i=c.closest(".fcm-login-col").find('input[name="name"]').val(),f=c.closest(".fcm-login-col").find('input[name="email"]').val(),u=c.closest(".fcm-login-col").find('input[name="phone"]').val(),!i)?(ToastFts.showToast({text:"Bạn cần nhập họ tên!.",type:"Warning"}),!1):(o.hide("slow"),UtilCommentFS.resetInput([".fshop-cmt-textarea",".fcm-login-txt"]),$.ajax({type:"POST",url:UtilCommentFS.linkAjax().linkApiAddComment,data:{pageId:n.pageID,shopCommentID:s,content:t,name:i,email:f,phone:u}}).done(function(u){s===0?$("#wrapper-nt-comment").find("#listCommentCate").prepend(n.buildHtmlComment(!0,{id:u.ID,username:i,comment:t})):r.closest(".fshop-cmt-hide").after(n.buildHtmlComment(!1,{id:u.ID,username:i,comment:t})).hide();n.pageID=u.PageID;n.SendAnsync({linkAnsyn:UtilCommentFS.linkAjax().linkApiAsync,contenComment:t,ID:u.ID,title:$("head title")[0].text,modulId:n.option.moduleId});ToastFts.showToast({text:UtilCommentFS.configConstant().messageSuccess})}),e.show(),!1)})}))})};CommentFptShop.prototype.SendAnsync=function(n){$.post(n.linkAnsyn,{message:n.contenComment,commentId:n.ID,title:n.title,modulId:n.modulId},function(){console.log("da gui thong bao")})};CommentFptShop.prototype.filterComment=function(){var n=this;$("#wrapper-nt-comment").on("keyup","#txt-filter-comment",function(t){var i=n.getValueFilter();if(t.keyCode==13){if(!i.keyword)return alert("Bạn chưa nhập thông tin tìm kiếm"),!1;n.loadComment(i.keyword,i.searchin,i.sort,!1);$("#wrapper-nt-comment").find("#ntc-viewmore-comment").attr("data-page",2)}return!1})};CommentFptShop.prototype.sortComment=function(){var n=this;$("#wrapper-nt-comment").on("click",".fshop-cm-hsort span",function(){var i=$(this),t;i.closest(".fshop-cm-hsort").find(".active").removeClass("active");i.addClass("active");t=n.getValueFilter();n.loadComment(t.keyword,t.searchin,t.sort,!1);$("#wrapper-nt-comment").find("#ntc-viewmore-comment").attr("data-page",2)})};CommentFptShop.prototype.getValueFilter=function(){return $.extend({keyword:"",searchin:0,sort:1},{keyword:UtilCommentFS.standardizedString($("#wrapper-nt-comment").find("#txt-filter-comment").val()),searchin:$("#wrapper-nt-comment").find("#select-condition-filter-comment").val(),sort:$("#wrapper-nt-comment").find(".fshop-cm-hsort").find(".active").attr("data-value")})};CommentFptShop.prototype.likeComment=function(){var n=this;$("#wrapper-nt-comment").on("click",".fshop-cmt-btnlike",function(){var t=$(this),i=t.next(".fshop-cmt-numlike").attr("data-id"),r=t.next(".fshop-cmt-numlike").find("span");t.hasClass("liked")?(t.removeClass("liked"),r.text(Number(r.text())-1),t.text("Thích"),$.post(UtilCommentFS.linkAjax().linkApiUnLike,{CommentID:i}).done(function(){n.saveLikeCommentToCookie(i,!1)})):(t.addClass("liked"),r.text(Number(r.text())+1),t.text("Bỏ thích"),$.post(UtilCommentFS.linkAjax().linkApiLike,{CommentID:i}).done(function(){n.saveLikeCommentToCookie(i,!0)}))})};CommentFptShop.prototype.buildHtmlComment=function(n,t){return n?$(["<div class='fshop-cmt-item'>","<div class='fshop-cmt-ask'>","<div class='fshop-cmt-textmain'>"+t.comment+"<\/div>","<div class='fshop-cmt-bottmain clearfix'>","<div class='fshop-cmt-col6'>","<img class='fshop-cmt-avatar' src='http://fptshop.com.vn/Content/assest/images/no-avatar.png?v=9999' alt=''>","<span class='fshop-cmt-user'>","<strong>"+t.username+"<\/strong> - "+UtilCommentFS.getBackDate(new Date),"<\/span>","<\/div>","<div class='fshop-cmt-col6'>","<p class='fshop-cmt-relate'>","<span class='fshop-cmt-btnreply' data-id='"+t.id+"'>Trả lời<\/span>","<span class='fshop-cmt-btnlike'>Thích<\/span>","<span class='fshop-cmt-numlike' data-id='"+t.id+"'>","<img src='http://fptshop.com.vn/Content/Publishing/Comment/img/icon-numlike.png'>","<span class='number-like'>0<\/span>","<\/span>","<\/p>","<\/div>","<\/div>","<\/div>","<div class='fshop-cmt-reply fshop-cmt-hide'>","<form>","<div class='fshop-cmt-tabox'>","<textarea class='fshop-cmt-textarea' rows='2' placeholder='Viết bình luận của bạn...'><\/textarea>","<input data-id='"+t.id+"' type='button' class='fshop-cmt-tabtn btn-reply-comment' value='Bình luận'>","<\/div>","<\/form>","<\/div>","<\/div>"].join("\n")):$(["<div class='fshop-cmt-reply'>","<div class='fshop-cmt-textmain'>"+t.comment+"<\/div>","<div class='fshop-cmt-bottmain clearfix'>","<div class='fshop-cmt-col6'>","<img class='fshop-cmt-avatar' src='http://fptshop.com.vn/Content/assest/images/no-avatar.png?v=9999' alt=''>","<span class='fshop-cmt-user'>","<strong>"+t.username+"<\/strong><i><\/i> - "+UtilCommentFS.getBackDate(new Date),"<\/span>","<\/div>","<div class='fshop-cmt-col6'>","<p class='fshop-cmt-relate'>","<span class='fshop-cmt-btnlike'>Thích<\/span>","<span class='fshop-cmt-numlike' data-id='"+t.id+"'>","<img src='http://fptshop.com.vn/Content/Publishing/Comment/img/icon-numlike.png' alt=''>","<span class='number-like'>0<\/span>","<\/span>","<\/p>","<\/div>","<\/div>","<\/div>"].join("\n"))};CommentFptShop.prototype.replyComment=function(){$("#wrapper-nt-comment").on("click",".fshop-cmt-btnreply",function(){var n=$(this);n.closest(".fshop-cmt-ask").next().toggle(300)})};CommentFptShop.prototype.setLikeCommentInit=function(){var n=UtilCommentFS.getCookie(UtilCommentFS.configConstant().nameLikeCookie),t;$.trim(n)!==""&&(t=JSON.parse(n),$("#wrapper-nt-comment").find(".fshop-cmt-btnlike").each(function(){var n=$(this),i=n.next().attr("data-id");$.each(t,function(t,r){Number(i)===Number(r)&&n.addClass("liked").text("Bỏ thích")})}))};CommentFptShop.prototype.saveLikeCommentToCookie=function(n,t){var r=UtilCommentFS.getCookie(UtilCommentFS.configConstant().nameLikeCookie),i=[];$.trim(r)&&(i=JSON.parse(r));t?i.push(n):i=$.grep(i,function(t){return Number(t)!=Number(n)});UtilCommentFS.setCookie(UtilCommentFS.configConstant().nameLikeCookie,JSON.stringify(i),365)};CommentFptShop.prototype.setIconEmotionComment=function(){$(document).find("#ntc-wrapper-add-icon").find("span").off("click").on("click",function(){$(this).closest(".ntc-icon-smile").prev().find(".fshop-cmt-textarea").val($(this).html())})};UtilCommentFS=function(n){var t,i,r,u,f,e,o,s;return t=function(){var n="http://api.fptshop.com.vn/Ajax/Comment/";return{linkApiGetListComment:n+"GetListComment",linkApiAddComment:n+"AddComment",linkApiLike:n+"Like",linkApiUnLike:n+"Unlike",linkGetNewComment:n+"GetLastestComment",linkApiAsync:"http://api.fptshop.com.vn/message"}},i=function(t){var i=t,u="",r;return i&&(i=i.replace(/!|\$|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\'| |\"|\&|\#|\[|\]|~/g," "),r=i.match(/\S+/g),n.each(r,function(t,i){u+=n.trim(i)+" "})),i},u=function(n){for(var r=n+"=",u=document.cookie.split(";"),i=0,f=u.length,t;i<f;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""},r=function(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toUTCString();document.cookie=n+"="+t+"; "+u},f=function(){return{nameEmailCookie:"ftscustomerEmail",nameCustomerCookie:"ftscustomerName",namePhoneCookie:"ftscustomerPhone",nameLikeCookie:"ftsCokkieLL",messageSuccess:"<span>Bình luận của bạn đã được ghi nhận<\/span>.<\/br><span>Chúng tôi sẽ phản hồi bạn sau ít phút nhé!<\/span>",imgLoading:"<img src='http://fptshop.com.vn/Content/images/ajax_loader_small.gif'>",imgBigLoading:"<img style='margin:0 auto;' src='http://fptshop.com.vn/Content/images/ajax_loader_big.gif'>",timerGetNewComment:12e4}},e=function(n){var t="",i=Math.round((new Date-n)/864e5),r=Math.round((new Date-n)/36e5,1),u=Math.round((new Date-n)/6e3,1),f=Math.round((new Date-n)/1e3,1);return t=f+" giây trước",u>0&&(t=u+" phút trước"),r>0&&(t=r+" giờ trước"),i>0&&(t=i+" ngày trước"),i>30&&(t="vào ngày "+n.getDate()+"/"+date.getMonth()+1+"/"+date.getFullYear()),t},o=function(n){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(n)},s=function(t){t&&n.each(t,function(t,i){n(document).find(i).val("")})},{linkAjax:t,standardizedString:i,setCookie:r,getCookie:u,configConstant:f,getBackDate:e,checkEmail:o,resetInput:s}}(jQuery);ToastFts=function(n){var t,i,r;return i=function(t){var i={background:"#71b371",img:"http://fptshop.com.vn/Content/v3/images/icon_success.png",color:"#fff"};return t.type==="Warning"&&(i.background="#C14D4D",i.img="http://fptshop.com.vn/Content/v3/images/icon_warning.png",i.color="#F7F7F7"),n(["<div class='nts-toast' style='width:298px;z-index:9999;margin: 0 auto;position: fixed;top: 50%;left: 50%;margin-left: -145px;margin-top: -26px;'>","<div class='nts-wrapper' style='border:1px #71b371 solid;background: "+i.background+";color: "+i.color+";height: auto;border-radius: 3px;-moz-border-radius: 3px;-webkit-border-radius: 3px;padding:12px 12px 10px 1px;;font-size:12px;line-height: 24px;position: relative;'>","<div class='nts-close' style='position: absolute;right: 5px;top: 0;cursor: pointer'>x<\/div>","<div class='nts-icon-success' style='position: absolute;background: url("+i.img+");width: 32px;height : 32px;left:7px'>","<\/div>","<div class='nts-content' style='padding-left: 40px;text-align: center;'>"+t.textMessage+"<\/div>","<\/div>","<\/div>"].join("\n"))},r=function(){n(document).on("click",".nts-close",function(){n("body").find(".nts-toast").fadeOut("slow",function(){setTimeout(function(){this.remove()}.bind(n(this)),1e3)})})},t=function(t){var u=n.extend({type:"success",text:"",stayTime:5e3},t),f="";f=i({textMessage:u.text,type:u.type});n("body").append(f);setTimeout(function(){n("body").find(".nts-toast").fadeOut("slow",function(){setTimeout(function(){this.remove()}.bind(n(this)),1e3)})},3e3);r()},{showToast:t}}(jQuery);window.fbAsyncInit=function(){FB.init({appId:"1468144196840722",status:!0,cookie:!0,xfbml:!0})},function(n){var t,i="facebook-jssdk",r=n.getElementsByTagName("script")[0];n.getElementById(i)||(t=n.createElement("script"),t.id=i,t.async=!0,t.src="//connect.facebook.net/en_US/all.js",r.parentNode.insertBefore(t,r))}(document)