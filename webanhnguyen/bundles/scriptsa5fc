function createMessage(n,t){$("#dialog-message").attr("title",n);$("#dialog-message").html("<p>"+t+"<\/p>");$("#dialog-message").dialog({resizable:!0,height:"auto",width:"auto",modal:!0,buttons:{"Đóng lại":function(){$(this).dialog("close")}}})}function getURLParameter(n){return decodeURIComponent((new RegExp("[?|&]"+n+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}function ResetCoupon(){$(".msgcheckcoupon").html("");$(".msgcheckcoupon").attr("data-money",0);$("#couponCode").val("");$("#checkcoupon").show()}function CalculatorTotalMoney(){var t=0,i=0,n,r;$("#discount-coupon").length>0&&(t=parseFloat($("#discount-coupon").val()),console.log(t));n=parseFloat($(".ppu_tab_pro_price").attr("data-money"));console.log(n);$("#bhv_check").is(":checked")?($(".img_bhv").show(),i=parseInt(n)*6/100):($(".img_bhv").hide(),i=0);r=n-t+i;console.log(r);$(".textTotalMoney").text(ConvertCurrency(r.toString()))}function CalculatorMoneyRecurring(){var n=parseInt($(".price-order-recurring").val()),t=parseInt($(".timeRecurringSelected").val());$("#idResult p").each(function(){var i=parseFloat($(this).data("rate")),r=parseInt(n/t+n/t/100*i);$(this).find("b").html(ConvertCurrency(r.toString())+" đ/tháng")})}function ConvertCurrency(n){return n.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}function AddCompare(n,t){if($.cookie("compareid")==null)$.cookie("compareid",n,{path:"/"}),$.cookie("comparetype",t,{path:"/"});else if($.cookie("comparetype")!=t)$.cookie("compareid",n,{path:"/"}),$.cookie("comparetype",t,{path:"/"});else{var i=$.cookie("compareid").split(",");$.inArray(n.toString(),i)==-1&&(i.push(n),$.cookie("compareid",i,{path:"/"}))}}function RemoveCompare(n){var t=$.cookie("compareid").split(",");t=$.grep(t,function(t){return t!=n});t.length==0?ClearCompare():$.cookie("compareid",t,{path:"/"})}function ClearCompare(){$.cookie("compareid",null,{expires:-1,path:"/"})}function getURLParameter(n){return decodeURIComponent((new RegExp("[?|&]"+n+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}function Convertkhongdau(n){return n=n.toLowerCase(),n=n.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a"),n=n.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e"),n=n.replace(/ì|í|ị|ỉ|ĩ/g,"i"),n=n.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o"),n=n.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u"),n=n.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y"),n=n.replace(/đ/g,"d"),n=n.replace(/!|@|\$|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\'| |\"|\&|\#|\[|\]|~/g,"-"),n=n.replace(/-+-/g,"-"),n.replace(/^\-+|\-+$/g,"")}function ReloadListUI(){$(".product").each(function(n,t){$(t).position().top==0&&$(t).addClass("border-top")})}function FindShop(n,t){var i="/Ajax/Shop/GetStoreByDistrictId";n=="cityId"&&(i="/Ajax/Shop/GetStoreByCityId");t==0&&(i="/Ajax/Shop/GetStoreByCityId",t=$("#ddlCity").val());$.get(i,{id:t},function(n){$("#ddlShop").html("");$.each(n.list,function(n,t){$("#ddlShop").append('<li title="'+t.Name.replace(/Cửa hàng/g,"").trim()+'" class="item-shop" data-x="'+t.Xvalue+'" data-y="'+t.Yvalue+'">'+t.Name.replace(/Cửa hàng/g,"").trim()+"<p><\/li>")})})}function randomRange(n,t){return Math.random()*(t-n)+n}var fptshop,xhr,nameCookieJsScript,images,imgcount,currentItem,THREE,TO_RADIANS;(function(n,t){function i(t,i){var u,f,e,o=t.nodeName.toLowerCase();return"area"===o?(u=t.parentNode,f=u.name,t.href&&f&&"map"===u.nodeName.toLowerCase()?(e=n("img[usemap=#"+f+"]")[0],!!e&&r(e)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&r(t)}function r(t){return n.expr.filters.visible(t)&&!n(t).parents().addBack().filter(function(){return"hidden"===n.css(this,"visibility")}).length}var u=0,f=/^ui-id-\d+$/;n.ui=n.ui||{};n.extend(n.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});n.fn.extend({focus:function(t){return function(i,r){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){n(t).focus();r&&r.call(t)},i)}):t.apply(this,arguments)}}(n.fn.focus),scrollParent:function(){var t;return t=n.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(n.css(this,"position"))&&/(auto|scroll)/.test(n.css(this,"overflow")+n.css(this,"overflow-y")+n.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(n.css(this,"overflow")+n.css(this,"overflow-y")+n.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?n(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var u,f,r=n(this[0]);r.length&&r[0]!==document;){if(u=r.css("position"),("absolute"===u||"relative"===u||"fixed"===u)&&(f=parseInt(r.css("zIndex"),10),!isNaN(f)&&0!==f))return f;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++u)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&n(this).removeAttr("id")})}});n.extend(n.expr[":"],{data:n.expr.createPseudo?n.expr.createPseudo(function(t){return function(i){return!!n.data(i,t)}}):function(t,i,r){return!!n.data(t,r[3])},focusable:function(t){return i(t,!isNaN(n.attr(t,"tabindex")))},tabbable:function(t){var r=n.attr(t,"tabindex"),u=isNaN(r);return(u||r>=0)&&i(t,!u)}});n("<a>").outerWidth(1).jquery||n.each(["Width","Height"],function(i,r){function u(t,i,r,u){return n.each(o,function(){i-=parseFloat(n.css(t,"padding"+this))||0;r&&(i-=parseFloat(n.css(t,"border"+this+"Width"))||0);u&&(i-=parseFloat(n.css(t,"margin"+this))||0)}),i}var o="Width"===r?["Left","Right"]:["Top","Bottom"],f=r.toLowerCase(),e={innerWidth:n.fn.innerWidth,innerHeight:n.fn.innerHeight,outerWidth:n.fn.outerWidth,outerHeight:n.fn.outerHeight};n.fn["inner"+r]=function(i){return i===t?e["inner"+r].call(this):this.each(function(){n(this).css(f,u(this,i)+"px")})};n.fn["outer"+r]=function(t,i){return"number"!=typeof t?e["outer"+r].call(this,t):this.each(function(){n(this).css(f,u(this,t,!0,i)+"px")})}});n.fn.addBack||(n.fn.addBack=function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))});n("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(n.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,n.camelCase(i)):t.call(this)}}(n.fn.removeData));n.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());n.support.selectstart="onselectstart"in document.createElement("div");n.fn.extend({disableSelection:function(){return this.bind((n.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(n){n.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});n.extend(n.ui,{plugin:{add:function(t,i,r){var u,f=n.ui[t].prototype;for(u in r)f.plugins[u]=f.plugins[u]||[],f.plugins[u].push([i,r[u]])},call:function(n,t,i){var r,u=n.plugins[t];if(u&&n.element[0].parentNode&&11!==n.element[0].parentNode.nodeType)for(r=0;u.length>r;r++)n.options[u[r][0]]&&u[r][1].apply(n.element,i)}},hasScroll:function(t,i){if("hidden"===n(t).css("overflow"))return!1;var r=i&&"left"===i?"scrollLeft":"scrollTop",u=!1;return t[r]>0?!0:(t[r]=1,u=t[r]>0,t[r]=0,u)}})})(jQuery),function(n,t){var r=0,i=Array.prototype.slice,u=n.cleanData;n.cleanData=function(t){for(var i,r=0;null!=(i=t[r]);r++)try{n(i).triggerHandler("remove")}catch(f){}u(t)};n.widget=function(i,r,u){var h,e,f,s,c={},o=i.split(".")[0];i=i.split(".")[1];h=o+"-"+i;u||(u=r,r=n.Widget);n.expr[":"][h.toLowerCase()]=function(t){return!!n.data(t,h)};n[o]=n[o]||{};e=n[o][i];f=n[o][i]=function(n,i){return this._createWidget?(arguments.length&&this._createWidget(n,i),t):new f(n,i)};n.extend(f,e,{version:u.version,_proto:n.extend({},u),_childConstructors:[]});s=new r;s.options=n.widget.extend({},s.options);n.each(u,function(i,u){return n.isFunction(u)?(c[i]=function(){var n=function(){return r.prototype[i].apply(this,arguments)},t=function(n){return r.prototype[i].apply(this,n)};return function(){var i,r=this._super,f=this._superApply;return this._super=n,this._superApply=t,i=u.apply(this,arguments),this._super=r,this._superApply=f,i}}(),t):(c[i]=u,t)});f.prototype=n.widget.extend(s,{widgetEventPrefix:e?s.widgetEventPrefix:i},c,{constructor:f,namespace:o,widgetName:i,widgetFullName:h});e?(n.each(e._childConstructors,function(t,i){var r=i.prototype;n.widget(r.namespace+"."+r.widgetName,f,i._proto)}),delete e._childConstructors):r._childConstructors.push(f);n.widget.bridge(i,f)};n.widget.extend=function(r){for(var u,f,o=i.call(arguments,1),e=0,s=o.length;s>e;e++)for(u in o[e])f=o[e][u],o[e].hasOwnProperty(u)&&f!==t&&(r[u]=n.isPlainObject(f)?n.isPlainObject(r[u])?n.widget.extend({},r[u],f):n.widget.extend({},f):f);return r};n.widget.bridge=function(r,u){var f=u.prototype.widgetFullName||r;n.fn[r]=function(e){var h="string"==typeof e,o=i.call(arguments,1),s=this;return e=!h&&o.length?n.widget.extend.apply(null,[e].concat(o)):e,h?this.each(function(){var i,u=n.data(this,f);return u?n.isFunction(u[e])&&"_"!==e.charAt(0)?(i=u[e].apply(u,o),i!==u&&i!==t?(s=i&&i.jquery?s.pushStack(i.get()):i,!1):t):n.error("no such method '"+e+"' for "+r+" widget instance"):n.error("cannot call methods on "+r+" prior to initialization; attempted to call method '"+e+"'")}):this.each(function(){var t=n.data(this,f);t?t.option(e||{})._init():n.data(this,f,new u(e,this))}),s}};n.Widget=function(){};n.Widget._childConstructors=[];n.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=n(i||this.defaultElement||this)[0];this.element=n(i);this.uuid=r++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=n.widget.extend({},this.options,this._getCreateOptions(),t);this.bindings=n();this.hoverable=n();this.focusable=n();i!==this&&(n.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(n){n.target===i&&this.destroy()}}),this.document=n(i.style?i.ownerDocument:i.document||i),this.window=n(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:n.noop,_getCreateEventData:n.noop,_create:n.noop,_init:n.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(n.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:n.noop,widget:function(){return this.element},option:function(i,r){var u,f,e,o=i;if(0===arguments.length)return n.widget.extend({},this.options);if("string"==typeof i)if(o={},u=i.split("."),i=u.shift(),u.length){for(f=o[i]=n.widget.extend({},this.options[i]),e=0;u.length-1>e;e++)f[u[e]]=f[u[e]]||{},f=f[u[e]];if(i=u.pop(),r===t)return f[i]===t?null:f[i];f[i]=r}else{if(r===t)return this.options[i]===t?null:this.options[i];o[i]=r}return this._setOptions(o),this},_setOptions:function(n){var t;for(t in n)this._setOption(t,n[t]);return this},_setOption:function(n,t){return this.options[n]=t,"disabled"===n&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,r,u){var e,f=this;"boolean"!=typeof i&&(u=r,r=i,i=!1);u?(r=e=n(r),this.bindings=this.bindings.add(r)):(u=r,r=this.element,e=this.widget());n.each(u,function(u,o){function s(){return i||f.options.disabled!==!0&&!n(this).hasClass("ui-state-disabled")?("string"==typeof o?f[o]:o).apply(f,arguments):t}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||n.guid++);var h=u.match(/^(\w+)\s*(.*)$/),c=h[1]+f.eventNamespace,l=h[2];l?e.delegate(l,c,s):r.bind(c,s)})},_off:function(n,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;n.unbind(t).undelegate(t)},_delay:function(n,t){function r(){return("string"==typeof n?i[n]:n).apply(i,arguments)}var i=this;return setTimeout(r,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){n(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){n(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){n(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){n(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,r){var u,f,e=this.options[t];if(r=r||{},i=n.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],f=i.originalEvent)for(u in f)u in i||(i[u]=f[u]);return this.element.trigger(i,r),!(n.isFunction(e)&&e.apply(this.element[0],[i].concat(r))===!1||i.isDefaultPrevented())}};n.each({show:"fadeIn",hide:"fadeOut"},function(t,i){n.Widget.prototype["_"+t]=function(r,u,f){"string"==typeof u&&(u={effect:u});var o,e=u?u===!0||"number"==typeof u?i:u.effect||i:t;u=u||{};"number"==typeof u&&(u={duration:u});o=!n.isEmptyObject(u);u.complete=f;u.delay&&r.delay(u.delay);o&&n.effects&&n.effects.effect[e]?r[t](u):e!==t&&r[e]?r[e](u.duration,u.easing,f):r.queue(function(i){n(this)[t]();f&&f.call(r[0]);i()})}})}(jQuery),function(n){var t=!1;n(document).mouseup(function(){t=!1});n.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(n){return t._mouseDown(n)}).bind("click."+this.widgetName,function(i){return!0===n.data(i.target,t.widgetName+".preventClickEvent")?(n.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&n(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i);this._mouseDownEvent=i;var r=this,u=1===i.which,f="string"==typeof this.options.cancel&&i.target.nodeName?n(i.target).closest(this.options.cancel).length:!1;return u&&!f&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===n.data(i.target,this.widgetName+".preventClickEvent")&&n.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(n){return r._mouseMove(n)},this._mouseUpDelegate=function(n){return r._mouseUp(n)},n(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return n.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return n(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&n.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(n){return Math.max(Math.abs(this._mouseDownEvent.pageX-n.pageX),Math.abs(this._mouseDownEvent.pageY-n.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(n){n.widget("ui.draggable",n.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||n(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(n(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){n("<div class='ui-draggable-iframeFix' style='background: #fff;'><\/div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(n(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),n.ui.ddmanager&&(n.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),n.ui.ddmanager&&n.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var r=this,i=!1;return n.ui.ddmanager&&!this.options.dropBehaviour&&(i=n.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"original"!==this.options.helper||n.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||n.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?n(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return n("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),n.ui.ddmanager&&n.ui.ddmanager.dragStop(this,t),n.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!n(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var r=this.options,i=n.isFunction(r.helper)?n(r.helper.apply(this.element[0],[t])):"clone"===r.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===r.appendTo?this.element[0].parentNode:r.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&n.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var n=this.element.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var u,t,i,r=this.options;return r.containment?"window"===r.containment?(this.containment=[n(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,n(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,n(window).scrollLeft()+n(window).width()-this.helperProportions.width-this.margins.left,n(window).scrollTop()+(n(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===r.containment?(this.containment=[0,0,n(document).width()-this.helperProportions.width-this.margins.left,(n(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):r.containment.constructor===Array?(this.containment=r.containment,undefined):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),t=n(r.containment),i=t[0],i&&(u="hidden"!==t.css("overflow"),this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(u?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(u?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=t),undefined):(this.containment=null,undefined)},_convertPositionTo:function(t,i){i||(i=this.position);var r="absolute"===t?1:-1,u="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:u.scrollTop(),left:u.scrollLeft()}),{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*r,left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*r}},_generatePosition:function(t){var i,e,u,f,r=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=t.pageX,s=t.pageY;return this.offset.scroll||(this.offset.scroll={top:h.scrollTop(),left:h.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(e=this.relative_container.offset(),i=[this.containment[0]+e.left,this.containment[1]+e.top,this.containment[2]+e.left,this.containment[3]+e.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(o=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(s=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(o=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(s=i[3]+this.offset.click.top)),r.grid&&(u=r.grid[1]?this.originalPageY+Math.round((s-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,s=i?u-this.offset.click.top>=i[1]||u-this.offset.click.top>i[3]?u:u-this.offset.click.top>=i[1]?u-r.grid[1]:u+r.grid[1]:u,f=r.grid[0]?this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,o=i?f-this.offset.click.left>=i[0]||f-this.offset.click.left>i[2]?f:f-this.offset.click.left>=i[0]?f-r.grid[0]:f+r.grid[0]:f)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(t,i,r){return r=r||this._uiHash(),n.ui.plugin.call(this,t,[i,r]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),n.Widget.prototype._trigger.call(this,t,i,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});n.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var r=n(this).data("ui-draggable"),u=r.options,f=n.extend({},i,{item:r.element});r.sortables=[];n(u.connectToSortable).each(function(){var i=n.data(this,"ui-sortable");i&&!i.options.disabled&&(r.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,f))})},stop:function(t,i){var r=n(this).data("ui-draggable"),u=n.extend({},i,{item:r.element});n.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===r.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,u))})},drag:function(t,i){var r=n(this).data("ui-draggable"),u=this;n.each(r.sortables,function(){var f=!1,e=this;this.instance.positionAbs=r.positionAbs;this.instance.helperProportions=r.helperProportions;this.instance.offset.click=r.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,n.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==e&&this.instance._intersectsWith(this.instance.containerCache)&&n.contains(e.instance.element[0],this.instance.element[0])&&(f=!1),f}));f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=n(u).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}});n.ui.plugin.add("draggable","cursor",{start:function(){var t=n("body"),i=n(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor"));t.css("cursor",i.cursor)},stop:function(){var t=n(this).data("ui-draggable").options;t._cursor&&n("body").css("cursor",t._cursor)}});n.ui.plugin.add("draggable","opacity",{start:function(t,i){var r=n(i.helper),u=n(this).data("ui-draggable").options;r.css("opacity")&&(u._opacity=r.css("opacity"));r.css("opacity",u.opacity)},stop:function(t,i){var r=n(this).data("ui-draggable").options;r._opacity&&n(i.helper).css("opacity",r._opacity)}});n.ui.plugin.add("draggable","scroll",{start:function(){var t=n(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var r=n(this).data("ui-draggable"),i=r.options,u=!1;r.scrollParent[0]!==document&&"HTML"!==r.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=u=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=u=r.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=u=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=u=r.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-n(document).scrollTop()<i.scrollSensitivity?u=n(document).scrollTop(n(document).scrollTop()-i.scrollSpeed):n(window).height()-(t.pageY-n(document).scrollTop())<i.scrollSensitivity&&(u=n(document).scrollTop(n(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-n(document).scrollLeft()<i.scrollSensitivity?u=n(document).scrollLeft(n(document).scrollLeft()-i.scrollSpeed):n(window).width()-(t.pageX-n(document).scrollLeft())<i.scrollSensitivity&&(u=n(document).scrollLeft(n(document).scrollLeft()+i.scrollSpeed))));u!==!1&&n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(r,t)}});n.ui.plugin.add("draggable","snap",{start:function(){var t=n(this).data("ui-draggable"),i=t.options;t.snapElements=[];n(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=n(this),r=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:r.top,left:r.left})})},drag:function(t,i){for(var e,o,s,h,c,a,l,v,w,r=n(this).data("ui-draggable"),b=r.options,f=b.snapTolerance,y=i.offset.left,k=y+r.helperProportions.width,p=i.offset.top,d=p+r.helperProportions.height,u=r.snapElements.length-1;u>=0;u--)c=r.snapElements[u].left,a=c+r.snapElements[u].width,l=r.snapElements[u].top,v=l+r.snapElements[u].height,c-f>k||y>a+f||l-f>d||p>v+f||!n.contains(r.snapElements[u].item.ownerDocument,r.snapElements[u].item)?(r.snapElements[u].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[u].item})),r.snapElements[u].snapping=!1):("inner"!==b.snapMode&&(e=f>=Math.abs(l-d),o=f>=Math.abs(v-p),s=f>=Math.abs(c-k),h=f>=Math.abs(a-y),e&&(i.position.top=r._convertPositionTo("relative",{top:l-r.helperProportions.height,left:0}).top-r.margins.top),o&&(i.position.top=r._convertPositionTo("relative",{top:v,left:0}).top-r.margins.top),s&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),h&&(i.position.left=r._convertPositionTo("relative",{top:0,left:a}).left-r.margins.left)),w=e||o||s||h,"outer"!==b.snapMode&&(e=f>=Math.abs(l-p),o=f>=Math.abs(v-d),s=f>=Math.abs(c-y),h=f>=Math.abs(a-k),e&&(i.position.top=r._convertPositionTo("relative",{top:l,left:0}).top-r.margins.top),o&&(i.position.top=r._convertPositionTo("relative",{top:v-r.helperProportions.height,left:0}).top-r.margins.top),s&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),h&&(i.position.left=r._convertPositionTo("relative",{top:0,left:a-r.helperProportions.width}).left-r.margins.left)),!r.snapElements[u].snapping&&(e||o||s||h||w)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[u].item})),r.snapElements[u].snapping=e||o||s||h||w)}});n.ui.plugin.add("draggable","stack",{start:function(){var i,r=this.data("ui-draggable").options,t=n.makeArray(n(r.stack)).sort(function(t,i){return(parseInt(n(t).css("zIndex"),10)||0)-(parseInt(n(i).css("zIndex"),10)||0)});t.length&&(i=parseInt(n(t[0]).css("zIndex"),10)||0,n(t).each(function(t){n(this).css("zIndex",i+t)}),this.css("zIndex",i+t.length))}});n.ui.plugin.add("draggable","zIndex",{start:function(t,i){var r=n(i.helper),u=n(this).data("ui-draggable").options;r.css("zIndex")&&(u._zIndex=r.css("zIndex"));r.css("zIndex",u.zIndex)},stop:function(t,i){var r=n(this).data("ui-draggable").options;r._zIndex&&n(i.helper).css("zIndex",r._zIndex)}})}(jQuery),function(n){function t(n,t,i){return n>t&&t+i>n}n.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,i=t.accept;this.isover=!1;this.isout=!0;this.accept=n.isFunction(i)?i:function(n){return n.is(i)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};n.ui.ddmanager.droppables[t.scope]=n.ui.ddmanager.droppables[t.scope]||[];n.ui.ddmanager.droppables[t.scope].push(this);t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=n.ui.ddmanager.droppables[this.options.scope];i.length>t;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=n.isFunction(i)?i:function(n){return n.is(i)});n.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=n.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=n.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=n.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=n.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var r=i||n.ui.ddmanager.current,u=!1;return r&&(r.currentItem||r.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=n.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&n.ui.intersect(r,n.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(u=!0,!1):undefined}),u?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1):!1},ui:function(n){return{draggable:n.currentItem||n.element,helper:n.helper,position:n.position,offset:n.positionAbs}}});n.ui.intersect=function(n,i,r){if(!i.offset)return!1;var a,v,e=(n.positionAbs||n.position.absolute).left,s=e+n.helperProportions.width,o=(n.positionAbs||n.position.absolute).top,h=o+n.helperProportions.height,u=i.offset.left,c=u+i.proportions.width,f=i.offset.top,l=f+i.proportions.height;switch(r){case"fit":return e>=u&&c>=s&&o>=f&&l>=h;case"intersect":return e+n.helperProportions.width/2>u&&c>s-n.helperProportions.width/2&&o+n.helperProportions.height/2>f&&l>h-n.helperProportions.height/2;case"pointer":return a=(n.positionAbs||n.position.absolute).left+(n.clickOffset||n.offset.click).left,v=(n.positionAbs||n.position.absolute).top+(n.clickOffset||n.offset.click).top,t(v,f,i.proportions.height)&&t(a,u,i.proportions.width);case"touch":return(o>=f&&l>=o||h>=f&&l>=h||f>o&&h>l)&&(e>=u&&c>=e||s>=u&&c>=s||u>e&&s>c);default:return!1}};n.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var r,f,u=n.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,e=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();n:for(r=0;u.length>r;r++)if(!(u[r].options.disabled||t&&!u[r].accept.call(u[r].element[0],t.currentItem||t.element))){for(f=0;e.length>f;f++)if(e[f]===u[r].element[0]){u[r].proportions.height=0;continue n}u[r].visible="none"!==u[r].element.css("display");u[r].visible&&("mousedown"===o&&u[r]._activate.call(u[r],i),u[r].offset=u[r].element.offset(),u[r].proportions={width:u[r].element[0].offsetWidth,height:u[r].element[0].offsetHeight})}},drop:function(t,i){var r=!1;return n.each((n.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&n.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,i)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),r},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&n.ui.ddmanager.prepareOffsets(t,i);n.each(n.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r,e,f,o=n.ui.intersect(t,this,this.options.tolerance),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;u&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return n.data(this,"ui-droppable").options.scope===e}),f.length&&(r=n.data(f[0],"ui-droppable"),r.greedyChild="isover"===u)),r&&"isover"===u&&(r.isover=!1,r.isout=!0,r._out.call(r,i)),this[u]=!0,this["isout"===u?"isover":"isout"]=!1,this["isover"===u?"_over":"_out"].call(this,i),r&&"isout"===u&&(r.isout=!1,r.isover=!0,r._over.call(r,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable");t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(n){function i(n){return parseInt(n,10)||0}function t(n){return!isNaN(parseInt(n,10))}n.widget("ui.resizable",n.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,f,r,i,o,u=this,t=this.options;if(this.element.addClass("ui-resizable"),n.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(n("<div class='ui-wrapper' style='overflow: hidden;'><\/div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=t.handles||(n(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},f=0;e.length>f;f++)r=n.trim(e[f]),o="ui-resizable-"+r,i=n("<div class='ui-resizable-handle "+o+"'><\/div>"),i.css({zIndex:t.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i);this._renderAxis=function(t){var i,r,u,f;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=n(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=n(this.handles[i],this.element),f=/sw|ne|nw|se|n|s/.test(i)?r.outerHeight():r.outerWidth(),u=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(u,f),this._proportionallyResize()),n(this.handles[i]).length};this._renderAxis(this.element);this._handles=n(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){u.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),u.axis=i&&i[1]?i[1]:"se")});t.autoHide&&(this._handles.hide(),n(this.element).addClass("ui-resizable-autohide").mouseenter(function(){t.disabled||(n(this).removeClass("ui-resizable-autohide"),u._handles.show())}).mouseleave(function(){t.disabled||u.resizing||(n(this).addClass("ui-resizable-autohide"),u._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){n(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var r,i,u=!1;for(r in this.handles)i=n(this.handles[r])[0],(i===t.target||n.contains(i,t.target))&&(u=!0);return!this.options.disabled&&u},_mouseStart:function(t){var f,e,o,u=this.options,s=this.element.position(),r=this.element;return this.resizing=!0,/absolute/.test(r.css("position"))?r.css({position:"absolute",top:r.css("top"),left:r.css("left")}):r.is(".ui-draggable")&&r.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy(),f=i(this.helper.css("left")),e=i(this.helper.css("top")),u.containment&&(f+=n(u.containment).scrollLeft()||0,e+=n(u.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:f,top:e},this.size=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalPosition={left:f,top:e},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof u.aspectRatio?u.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=n(".ui-resizable-"+this.axis).css("cursor"),n("body").css("cursor","auto"===o?this.axis+"-resize":o),r.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,e=this.helper,r={},u=this.originalMousePosition,o=this.axis,s=this.position.top,h=this.position.left,c=this.size.width,l=this.size.height,a=t.pageX-u.left||0,v=t.pageY-u.top||0,f=this._change[o];return f?(i=f.apply(this,[t,a,v]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==s&&(r.top=this.position.top+"px"),this.position.left!==h&&(r.left=this.position.left+"px"),this.size.width!==c&&(r.width=this.size.width+"px"),this.size.height!==l&&(r.height=this.size.height+"px"),e.css(r),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),n.isEmptyObject(r)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var r,u,f,e,o,s,h,c=this.options,i=this;return this._helper&&(r=this._proportionallyResizeElements,u=r.length&&/textarea/i.test(r[0].nodeName),f=u&&n.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,e=u?0:i.sizeDiff.width,o={width:i.helper.width()-e,height:i.helper.height()-f},s=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,h=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null,c.animate||this.element.css(n.extend(o,{top:h,left:s})),i.helper.height(i.size.height),i.helper.width(i.size.width),this._helper&&!c.animate&&this._proportionallyResize()),n("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(n){var u,f,e,o,i,r=this.options;i={minWidth:t(r.minWidth)?r.minWidth:0,maxWidth:t(r.maxWidth)?r.maxWidth:1/0,minHeight:t(r.minHeight)?r.minHeight:0,maxHeight:t(r.maxHeight)?r.maxHeight:1/0};(this._aspectRatio||n)&&(u=i.minHeight*this.aspectRatio,e=i.minWidth/this.aspectRatio,f=i.maxHeight*this.aspectRatio,o=i.maxWidth/this.aspectRatio,u>i.minWidth&&(i.minWidth=u),e>i.minHeight&&(i.minHeight=e),i.maxWidth>f&&(i.maxWidth=f),i.maxHeight>o&&(i.maxHeight=o));this._vBoundaries=i},_updateCache:function(n){this.offset=this.helper.offset();t(n.left)&&(this.position.left=n.left);t(n.top)&&(this.position.top=n.top);t(n.height)&&(this.size.height=n.height);t(n.width)&&(this.size.width=n.width)},_updateRatio:function(n){var i=this.position,r=this.size,u=this.axis;return t(n.height)?n.width=n.height*this.aspectRatio:t(n.width)&&(n.height=n.width/this.aspectRatio),"sw"===u&&(n.left=i.left+(r.width-n.width),n.top=null),"nw"===u&&(n.top=i.top+(r.height-n.height),n.left=i.left+(r.width-n.width)),n},_respectSize:function(n){var i=this._vBoundaries,r=this.axis,u=t(n.width)&&i.maxWidth&&i.maxWidth<n.width,f=t(n.height)&&i.maxHeight&&i.maxHeight<n.height,e=t(n.width)&&i.minWidth&&i.minWidth>n.width,o=t(n.height)&&i.minHeight&&i.minHeight>n.height,s=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,c=/sw|nw|w/.test(r),l=/nw|ne|n/.test(r);return e&&(n.width=i.minWidth),o&&(n.height=i.minHeight),u&&(n.width=i.maxWidth),f&&(n.height=i.maxHeight),e&&c&&(n.left=s-i.minWidth),u&&c&&(n.left=s-i.maxWidth),o&&l&&(n.top=h-i.minHeight),f&&l&&(n.top=h-i.maxHeight),n.width||n.height||n.left||!n.top?n.width||n.height||n.top||!n.left||(n.left=null):n.top=null,n},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,r,u,n,f=this.helper||this.element,i=0;this._proportionallyResizeElements.length>i;i++){if(n=this._proportionallyResizeElements[i],!this.borderDif)for(this.borderDif=[],r=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],u=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],t=0;r.length>t;t++)this.borderDif[t]=(parseInt(r[t],10)||0)+(parseInt(u[t],10)||0);n.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset();this._helper?(this.helper=this.helper||n("<div style='overflow:hidden;'><\/div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(n,t){return{width:this.originalSize.width+t}},w:function(n,t){var i=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:i.width-t}},n:function(n,t,i){var r=this.originalSize,u=this.originalPosition;return{top:u.top+i,height:r.height-i}},s:function(n,t,i){return{height:this.originalSize.height+i}},se:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},sw:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,r]))},ne:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},nw:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,r]))}},_propagate:function(t,i){n.ui.plugin.call(this,t,[i,this.ui()]);"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});n.ui.plugin.add("resizable","animate",{stop:function(t){var i=n(this).data("ui-resizable"),u=i.options,r=i._proportionallyResizeElements,f=r.length&&/textarea/i.test(r[0].nodeName),s=f&&n.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,h=f?0:i.sizeDiff.width,c={width:i.size.width-h,height:i.size.height-s},e=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,o=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(n.extend(c,o&&e?{top:o,left:e}:{}),{duration:u.animateDuration,easing:u.animateEasing,step:function(){var u={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};r&&r.length&&n(r[0]).css({width:u.width,height:u.height});i._updateCache(u);i._propagate("resize",t)}})}});n.ui.plugin.add("resizable","containment",{start:function(){var u,e,o,s,h,c,l,t=n(this).data("ui-resizable"),a=t.options,v=t.element,f=a.containment,r=f instanceof n?f.get(0):/parent/.test(f)?v.parent().get(0):f;r&&(t.containerElement=n(r),/document/.test(f)||f===document?(t.containerOffset={left:0,top:0},t.containerPosition={left:0,top:0},t.parentData={element:n(document),left:0,top:0,width:n(document).width(),height:n(document).height()||document.body.parentNode.scrollHeight}):(u=n(r),e=[],n(["Top","Right","Left","Bottom"]).each(function(n,t){e[n]=i(u.css("padding"+t))}),t.containerOffset=u.offset(),t.containerPosition=u.position(),t.containerSize={height:u.innerHeight()-e[3],width:u.innerWidth()-e[1]},o=t.containerOffset,s=t.containerSize.height,h=t.containerSize.width,c=n.ui.hasScroll(r,"left")?r.scrollWidth:h,l=n.ui.hasScroll(r)?r.scrollHeight:s,t.parentData={element:r,left:o.left,top:o.top,width:c,height:l}))},resize:function(t){var f,o,s,h,i=n(this).data("ui-resizable"),a=i.options,r=i.containerOffset,c=i.position,e=i._aspectRatio||t.shiftKey,u={top:0,left:0},l=i.containerElement;l[0]!==document&&/static/.test(l.css("position"))&&(u=r);c.left<(i._helper?r.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-r.left:i.position.left-u.left),e&&(i.size.height=i.size.width/i.aspectRatio),i.position.left=a.helper?r.left:0);c.top<(i._helper?r.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-r.top:i.position.top),e&&(i.size.width=i.size.height*i.aspectRatio),i.position.top=i._helper?r.top:0);i.offset.left=i.parentData.left+i.position.left;i.offset.top=i.parentData.top+i.position.top;f=Math.abs((i._helper?i.offset.left-u.left:i.offset.left-u.left)+i.sizeDiff.width);o=Math.abs((i._helper?i.offset.top-u.top:i.offset.top-r.top)+i.sizeDiff.height);s=i.containerElement.get(0)===i.element.parent().get(0);h=/relative|absolute/.test(i.containerElement.css("position"));s&&h&&(f-=i.parentData.left);f+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-f,e&&(i.size.height=i.size.width/i.aspectRatio));o+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-o,e&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var t=n(this).data("ui-resizable"),r=t.options,u=t.containerOffset,f=t.containerPosition,e=t.containerElement,i=n(t.helper),o=i.offset(),s=i.outerWidth()-t.sizeDiff.width,h=i.outerHeight()-t.sizeDiff.height;t._helper&&!r.animate&&/relative/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h});t._helper&&!r.animate&&/static/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h})}});n.ui.plugin.add("resizable","alsoResize",{start:function(){var r=n(this).data("ui-resizable"),t=r.options,i=function(t){n(t).each(function(){var t=n(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof t.alsoResize||t.alsoResize.parentNode?i(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],i(t.alsoResize)):n.each(t.alsoResize,function(n){i(n)})},resize:function(t,i){var r=n(this).data("ui-resizable"),u=r.options,f=r.originalSize,e=r.originalPosition,s={height:r.size.height-f.height||0,width:r.size.width-f.width||0,top:r.position.top-e.top||0,left:r.position.left-e.left||0},o=function(t,r){n(t).each(function(){var t=n(this),f=n(this).data("ui-resizable-alsoresize"),u={},e=r&&r.length?r:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];n.each(e,function(n,t){var i=(f[t]||0)+(s[t]||0);i&&i>=0&&(u[t]=i||null)});t.css(u)})};"object"!=typeof u.alsoResize||u.alsoResize.nodeType?o(u.alsoResize):n.each(u.alsoResize,function(n,t){o(n,t)})},stop:function(){n(this).removeData("resizable-alsoresize")}});n.ui.plugin.add("resizable","ghost",{start:function(){var t=n(this).data("ui-resizable"),i=t.options,r=t.size;t.ghost=t.originalElement.clone();t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:"");t.ghost.appendTo(t.helper)},resize:function(){var t=n(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=n(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}});n.ui.plugin.add("resizable","grid",{resize:function(){var t=n(this).data("ui-resizable"),i=t.options,v=t.size,f=t.originalSize,e=t.originalPosition,h=t.axis,c="number"==typeof i.grid?[i.grid,i.grid]:i.grid,o=c[0]||1,s=c[1]||1,l=Math.round((v.width-f.width)/o)*o,a=Math.round((v.height-f.height)/s)*s,r=f.width+l,u=f.height+a,y=i.maxWidth&&r>i.maxWidth,p=i.maxHeight&&u>i.maxHeight,w=i.minWidth&&i.minWidth>r,b=i.minHeight&&i.minHeight>u;i.grid=c;w&&(r+=o);b&&(u+=s);y&&(r-=o);p&&(u-=s);/^(se|s|e)$/.test(h)?(t.size.width=r,t.size.height=u):/^(ne)$/.test(h)?(t.size.width=r,t.size.height=u,t.position.top=e.top-a):/^(sw)$/.test(h)?(t.size.width=r,t.size.height=u,t.position.left=e.left-l):(t.size.width=r,t.size.height=u,t.position.top=e.top-a,t.position.left=e.left-l)}})}(jQuery),function(n){n.widget("ui.selectable",n.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable");this.dragged=!1;this.refresh=function(){t=n(i.options.filter,i.element[0]);t.addClass("ui-selectee");t.each(function(){var t=n(this),i=t.offset();n.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})};this.refresh();this.selectees=t.addClass("ui-selectee");this._mouseInit();this.helper=n("<div class='ui-selectable-helper'><\/div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(t){var i=this,r=this.options;this.opos=[t.pageX,t.pageY];this.options.disabled||(this.selectees=n(r.filter,this.element[0]),this._trigger("start",t),n(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=n.data(this,"selectable-item");r.startselected=!0;t.metaKey||t.ctrlKey||(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,i._trigger("unselecting",t,{unselecting:r.element}))}),n(t.target).parents().addBack().each(function(){var u,r=n.data(this,"selectable-item");return r?(u=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected"),r.$element.removeClass(u?"ui-unselecting":"ui-selected").addClass(u?"ui-selecting":"ui-unselecting"),r.unselecting=!u,r.selecting=u,r.selected=u,u?i._trigger("selecting",t,{selecting:r.element}):i._trigger("unselecting",t,{unselecting:r.element}),!1):undefined}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var e,o=this,s=this.options,i=this.opos[0],r=this.opos[1],u=t.pageX,f=t.pageY;return i>u&&(e=u,u=i,i=e),r>f&&(e=f,f=r,r=e),this.helper.css({left:i,top:r,width:u-i,height:f-r}),this.selectees.each(function(){var e=n.data(this,"selectable-item"),h=!1;e&&e.element!==o.element[0]&&("touch"===s.tolerance?h=!(e.left>u||i>e.right||e.top>f||r>e.bottom):"fit"===s.tolerance&&(h=e.left>i&&u>e.right&&e.top>r&&f>e.bottom),h?(e.selected&&(e.$element.removeClass("ui-selected"),e.selected=!1),e.unselecting&&(e.$element.removeClass("ui-unselecting"),e.unselecting=!1),e.selecting||(e.$element.addClass("ui-selecting"),e.selecting=!0,o._trigger("selecting",t,{selecting:e.element}))):(e.selecting&&((t.metaKey||t.ctrlKey)&&e.startselected?(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.$element.addClass("ui-selected"),e.selected=!0):(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.startselected&&(e.$element.addClass("ui-unselecting"),e.unselecting=!0),o._trigger("unselecting",t,{unselecting:e.element}))),e.selected&&(t.metaKey||t.ctrlKey||e.startselected||(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,o._trigger("unselecting",t,{unselecting:e.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,n(".ui-unselecting",this.element[0]).each(function(){var r=n.data(this,"selectable-item");r.$element.removeClass("ui-unselecting");r.unselecting=!1;r.startselected=!1;i._trigger("unselected",t,{unselected:r.element})}),n(".ui-selecting",this.element[0]).each(function(){var r=n.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected");r.selecting=!1;r.selected=!0;r.startselected=!0;i._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(n){function t(n,t,i){return n>t&&t+i>n}function i(n){return/left|right/.test(n.css("float"))||/inline|table-cell/.test(n.css("display"))}n.widget("ui.sortable",n.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var n=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?"x"===n.axis||i(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var n=this.items.length-1;n>=0;n--)this.items[n].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):n.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var r=null,f=!1,u=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),n(t.target).parents().each(function(){return n.data(this,u.widgetName+"-item")===u?(r=n(this),!1):undefined}),n.data(t.target,u.widgetName+"-item")===u&&(r=n(t.target)),r?!this.options.handle||i||(n(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(f=!0)}),f)?(this.currentItem=r,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,r){var f,e,u=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,u.cursorAt&&this._adjustOffsetFromHelper(u.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),u.containment&&this._setContainment(),u.cursor&&"auto"!==u.cursor&&(e=this.document.find("body"),this.storedCursor=e.css("cursor"),e.css("cursor",u.cursor),this.storedStylesheet=n("<style>*{ cursor: "+u.cursor+" !important; }<\/style>").appendTo(e)),u.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",u.opacity)),u.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",u.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(f=this.containers.length-1;f>=0;f--)this.containers[f]._trigger("activate",t,this._uiHash(this));return n.ui.ddmanager&&(n.ui.ddmanager.current=this),n.ui.ddmanager&&!u.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,u,f,o,i=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-n(document).scrollTop()<i.scrollSensitivity?r=n(document).scrollTop(n(document).scrollTop()-i.scrollSpeed):n(window).height()-(t.pageY-n(document).scrollTop())<i.scrollSensitivity&&(r=n(document).scrollTop(n(document).scrollTop()+i.scrollSpeed)),t.pageX-n(document).scrollLeft()<i.scrollSensitivity?r=n(document).scrollLeft(n(document).scrollLeft()-i.scrollSpeed):n(window).width()-(t.pageX-n(document).scrollLeft())<i.scrollSensitivity&&(r=n(document).scrollLeft(n(document).scrollLeft()+i.scrollSpeed))),r!==!1&&n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;e>=0;e--)if(u=this.items[e],f=u.item[0],o=this._intersectsWithPointer(u),o&&u.instance===this.currentContainer&&f!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==f&&!n.contains(this.placeholder[0],f)&&("semi-dynamic"===this.options.type?!n.contains(this.element[0],f):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(u))break;this._rearrange(t,u);this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(n.ui.ddmanager&&!this.options.dropBehaviour&&n.ui.ddmanager.drop(this,t),this.options.revert){var e=this,f=this.placeholder.offset(),r=this.options.axis,u={};r&&"x"!==r||(u.left=f.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft));r&&"y"!==r||(u.top=f.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop));this.reverting=!0;n(this.helper).animate(u,parseInt(this.options.revert,10)||500,function(){e._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),n.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?n(this.domPosition.prev).after(this.currentItem):n(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n(r).each(function(){var r=(n(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);r&&i.push((t.key||r[1]+"[]")+"="+(t.key&&t.expression?r[1]:r[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},r.each(function(){i.push(n(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(n){var t=this.positionAbs.left,h=t+this.helperProportions.width,i=this.positionAbs.top,c=i+this.helperProportions.height,r=n.left,f=r+n.width,u=n.top,e=u+n.height,o=this.offset.click.top,s=this.offset.click.left,l="x"===this.options.axis||i+o>u&&e>i+o,a="y"===this.options.axis||t+s>r&&f>t+s,v=l&&a;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>n[this.floating?"width":"height"]?v:t+this.helperProportions.width/2>r&&f>h-this.helperProportions.width/2&&i+this.helperProportions.height/2>u&&e>c-this.helperProportions.height/2},_intersectsWithPointer:function(n){var u="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,n.top,n.height),f="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,n.left,n.width),e=u&&f,i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return e?this.floating?r&&"right"===r||"down"===i?2:1:i&&("down"===i?2:1):!1},_intersectsWithSides:function(n){var u=t(this.positionAbs.top+this.offset.click.top,n.top+n.height/2,n.height),f=t(this.positionAbs.left+this.offset.click.left,n.left+n.width/2,n.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&f||"left"===r&&!f:i&&("down"===i&&u||"up"===i&&!u)},_getDragVerticalDirection:function(){var n=this.positionAbs.top-this.lastPositionAbs.top;return 0!==n&&(n>0?"down":"up")},_getDragHorizontalDirection:function(){var n=this.positionAbs.left-this.lastPositionAbs.left;return 0!==n&&(n>0?"right":"left")},refresh:function(n){return this._refreshItems(n),this.refreshPositions(),this},_connectWith:function(){var n=this.options;return n.connectWith.constructor===String?[n.connectWith]:n.connectWith},_getItemsAsjQuery:function(t){var r,u,e,i,s=[],f=[],o=this._connectWith();if(o&&t)for(r=o.length-1;r>=0;r--)for(e=n(o[r]),u=e.length-1;u>=0;u--)i=n.data(e[u],this.widgetFullName),i&&i!==this&&!i.options.disabled&&f.push([n.isFunction(i.options.items)?i.options.items.call(i.element):n(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i]);for(f.push([n.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):n(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=f.length-1;r>=0;r--)f[r][0].each(function(){s.push(this)});return n(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=n.grep(this.items,function(n){for(var i=0;t.length>i;i++)if(t[i]===n.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[];this.containers=[this];var r,u,e,i,o,s,h,l,a=this.items,f=[[n.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):n(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(r=c.length-1;r>=0;r--)for(e=n(c[r]),u=e.length-1;u>=0;u--)i=n.data(e[u],this.widgetFullName),i&&i!==this&&!i.options.disabled&&(f.push([n.isFunction(i.options.items)?i.options.items.call(i.element[0],t,{item:this.currentItem}):n(i.options.items,i.element),i]),this.containers.push(i));for(r=f.length-1;r>=0;r--)for(o=f[r][1],s=f[r][0],u=0,l=s.length;l>u;u++)h=n(s[u]),h.data(this.widgetName+"-item",o),a.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var r,f,u,i=this.items.length-1;i>=0;i--)r=this.items[i],r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(f=this.options.toleranceElement?n(this.options.toleranceElement,r.item):r.item,t||(r.width=f.outerWidth(),r.height=f.outerHeight()),u=f.offset(),r.left=u.left,r.top=u.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)u=this.containers[i].element.offset(),this.containers[i].containerCache.left=u.left,this.containers[i].containerCache.top=u.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var r,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(r=i.placeholder,i.placeholder={element:function(){var u=t.currentItem[0].nodeName.toLowerCase(),i=n("<"+u+">",t.document[0]).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===u?t.currentItem.children().each(function(){n("<td>&#160;<\/td>",t.document[0]).attr("colspan",n(this).attr("colspan")||1).appendTo(i)}):"img"===u&&i.attr("src",t.currentItem.attr("src")),r||i.css("visibility","hidden"),i},update:function(n,u){(!r||i.forcePlaceholderSize)&&(u.height()||u.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),u.width()||u.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}});t.placeholder=n(i.placeholder.element.call(t.element,t.currentItem));t.currentItem.after(t.placeholder);i.placeholder.update(t,t.placeholder)},_contactContainers:function(r){for(var f,v,s,l,y,h,o,p,a,c=null,e=null,u=this.containers.length-1;u>=0;u--)if(!n.contains(this.currentItem[0],this.containers[u].element[0]))if(this._intersectsWith(this.containers[u].containerCache)){if(c&&n.contains(this.containers[u].element[0],c.element[0]))continue;c=this.containers[u];e=u}else this.containers[u].containerCache.over&&(this.containers[u]._trigger("out",r,this._uiHash(this)),this.containers[u].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[e].containerCache.over||(this.containers[e]._trigger("over",r,this._uiHash(this)),this.containers[e].containerCache.over=1);else{for(v=1e4,s=null,a=c.floating||i(this.currentItem),l=a?"left":"top",y=a?"width":"height",h=this.positionAbs[l]+this.offset.click[l],f=this.items.length-1;f>=0;f--)n.contains(this.containers[e].element[0],this.items[f].item[0])&&this.items[f].item[0]!==this.currentItem[0]&&(!a||t(this.positionAbs.top+this.offset.click.top,this.items[f].top,this.items[f].height))&&(o=this.items[f].item.offset()[l],p=!1,Math.abs(o-h)>Math.abs(o+this.items[f][y]-h)&&(p=!0,o+=this.items[f][y]),v>Math.abs(o-h)&&(v=Math.abs(o-h),s=this.items[f],this.direction=p?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[e])return;s?this._rearrange(r,s,null,!0):this._rearrange(r,null,this.containers[e].element,!0);this._trigger("change",r,this._uiHash());this.containers[e]._trigger("change",r,this._uiHash(this));this.currentContainer=this.containers[e];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[e]._trigger("over",r,this._uiHash(this));this.containers[e].containerCache.over=1}},_createHelper:function(t){var r=this.options,i=n.isFunction(r.helper)?n(r.helper.apply(this.element[0],[t,this.currentItem])):"clone"===r.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||n("parent"!==r.appendTo?r.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||r.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||r.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&n.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var n=this.currentItem.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,r,u,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode);("document"===i.containment||"window"===i.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,n("document"===i.containment?document:window).width()-this.helperProportions.width-this.margins.left,(n("document"===i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]);/^(document|window|parent)$/.test(i.containment)||(t=n(i.containment)[0],r=n(i.containment).offset(),u="hidden"!==n(t).css("overflow"),this.containment=[r.left+(parseInt(n(t).css("borderLeftWidth"),10)||0)+(parseInt(n(t).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(n(t).css("borderTopWidth"),10)||0)+(parseInt(n(t).css("paddingTop"),10)||0)-this.margins.top,r.left+(u?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(n(t).css("borderLeftWidth"),10)||0)-(parseInt(n(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(u?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(n(t).css("borderTopWidth"),10)||0)-(parseInt(n(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var r="absolute"===t?1:-1,u="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(u[0].tagName);return{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:u.scrollTop())*r,left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:u.scrollLeft())*r}},_generatePosition:function(t){var r,u,i=this.options,f=t.pageX,e=t.pageY,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(o[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(e=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(e=this.containment[3]+this.offset.click.top)),i.grid&&(r=this.originalPageY+Math.round((e-this.originalPageY)/i.grid[1])*i.grid[1],e=this.containment?r-this.offset.click.top>=this.containment[1]&&r-this.offset.click.top<=this.containment[3]?r:r-this.offset.click.top>=this.containment[1]?r-i.grid[1]:r+i.grid[1]:r,u=this.originalPageX+Math.round((f-this.originalPageX)/i.grid[0])*i.grid[0],f=this.containment?u-this.offset.click.left>=this.containment[0]&&u-this.offset.click.left<=this.containment[2]?u:u-this.offset.click.left>=this.containment[0]?u-i.grid[0]:u+i.grid[0]:u)),{top:e-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:o.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())}},_rearrange:function(n,t,i,r){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var u=this.counter;this._delay(function(){u===this.counter&&this.refreshPositions(!r)})},_clear:function(n,t){this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(n){this._trigger("receive",n,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(n){this._trigger("update",n,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(n){this._trigger("remove",n,this._uiHash())}),r.push(function(n){return function(t){n._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(n){return function(t){n._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||r.push(function(n){return function(t){n._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(function(n){return function(t){n._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",n,this._uiHash()),i=0;r.length>i;i++)r[i].call(this,n);this._trigger("stop",n,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",n,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;r.length>i;i++)r[i].call(this,n);this._trigger("stop",n,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){n.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||n([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(n,t){var i="ui-effects-";n.effects={effect:{}},function(n,t){function f(n,t,i){var r=h[t.type]||{};return null==n?i||!t.def?null:t.def:(n=r.floor?~~n:parseFloat(n),isNaN(n)?t.def:r.mod?(n+r.mod)%r.mod:0>n?0:n>r.max?r.max:n)}function s(f){var o=i(),s=o._rgba=[];return f=f.toLowerCase(),r(v,function(n,i){var r,h=i.re.exec(f),c=h&&i.parse(h),e=i.space||"rgba";return c?(r=o[e](c),o[u[e].cache]=r[u[e].cache],s=o._rgba=r._rgba,!1):t}),s.length?("0,0,0,0"===s.join()&&n.extend(s,e.transparent),o):e[f]}function o(n,t,i){return i=(i+1)%1,1>6*i?n+6*(t-n)*i:1>2*i?t:2>3*i?n+6*(t-n)*(2/3-i):n}var e,a=/^([\-+])=\s*(\d+\.?\d*)/,v=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[n[1],n[2],n[3],n[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[2.55*n[1],2.55*n[2],2.55*n[3],n[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(n){return[n[1],n[2]/100,n[3]/100,n[4]]}}],i=n.Color=function(t,i,r,u){return new n.Color.fn.parse(t,i,r,u)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=i.support={},l=n("<p>")[0],r=n.each;l.style.cssText="background-color:rgba(1,1,1,.5)";c.rgba=l.style.backgroundColor.indexOf("rgba")>-1;r(u,function(n,t){t.cache="_"+n;t.props.alpha={idx:3,type:"percent",def:1}});i.fn=n.extend(i.prototype,{parse:function(o,h,c,l){if(o===t)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=n(o).css(h),h=t);var a=this,v=n.type(o),y=this._rgba=[];return h!==t&&(o=[o,h,c,l],v="array"),"string"===v?this.parse(s(o)||e._default):"array"===v?(r(u.rgba.props,function(n,t){y[t.idx]=f(o[t.idx],t)}),this):"object"===v?(o instanceof i?r(u,function(n,t){o[t.cache]&&(a[t.cache]=o[t.cache].slice())}):r(u,function(t,i){var u=i.cache;r(i.props,function(n,t){if(!a[u]&&i.to){if("alpha"===n||null==o[n])return;a[u]=i.to(a._rgba)}a[u][t.idx]=f(o[n],t,!0)});a[u]&&0>n.inArray(null,a[u].slice(0,3))&&(a[u][3]=1,i.from&&(a._rgba=i.from(a[u])))}),this):t},is:function(n){var o=i(n),f=!0,e=this;return r(u,function(n,i){var s,u=o[i.cache];return u&&(s=e[i.cache]||i.to&&i.to(e._rgba)||[],r(i.props,function(n,i){return null!=u[i.idx]?f=u[i.idx]===s[i.idx]:t})),f}),f},_space:function(){var n=[],t=this;return r(u,function(i,r){t[r.cache]&&n.push(i)}),n.pop()},transition:function(n,t){var e=i(n),c=e._space(),o=u[c],l=0===this.alpha()?i("transparent"):this,a=l[o.cache]||o.to(l._rgba),s=a.slice();return e=e[o.cache],r(o.props,function(n,i){var c=i.idx,r=a[c],u=e[c],o=h[i.type]||{};null!==u&&(null===r?s[c]=u:(o.mod&&(u-r>o.mod/2?r+=o.mod:r-u>o.mod/2&&(r-=o.mod)),s[c]=f((u-r)*t+r,i)))}),this[c](s)},blend:function(t){if(1===this._rgba[3])return this;var r=this._rgba.slice(),u=r.pop(),f=i(t)._rgba;return i(n.map(r,function(n,t){return(1-u)*f[t]+u*n}))},toRgbaString:function(){var i="rgba(",t=n.map(this._rgba,function(n,t){return null==n?t>2?1:0:n});return 1===t[3]&&(t.pop(),i="rgb("),i+t.join()+")"},toHslaString:function(){var i="hsla(",t=n.map(this.hsla(),function(n,t){return null==n&&(n=t>2?1:0),t&&3>t&&(n=Math.round(100*n)+"%"),n});return 1===t[3]&&(t.pop(),i="hsl("),i+t.join()+")"},toHexString:function(t){var i=this._rgba.slice(),r=i.pop();return t&&i.push(~~(255*r)),"#"+n.map(i,function(n){return n=(n||0).toString(16),1===n.length?"0"+n:n}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});i.fn.parse.prototype=i.fn;u.hsla.to=function(n){if(null==n[0]||null==n[1]||null==n[2])return[null,null,null,n[3]];var s,h,i=n[0]/255,r=n[1]/255,f=n[2]/255,c=n[3],u=Math.max(i,r,f),e=Math.min(i,r,f),t=u-e,o=u+e,l=.5*o;return s=e===u?0:i===u?60*(r-f)/t+360:r===u?60*(f-i)/t+120:60*(i-r)/t+240,h=0===t?0:.5>=l?t/o:t/(2-o),[Math.round(s)%360,h,l,null==c?1:c]};u.hsla.from=function(n){if(null==n[0]||null==n[1]||null==n[2])return[null,null,null,n[3]];var r=n[0]/360,u=n[1],t=n[2],e=n[3],i=.5>=t?t*(1+u):t+u-t*u,f=2*t-i;return[Math.round(255*o(f,i,r+1/3)),Math.round(255*o(f,i,r)),Math.round(255*o(f,i,r-1/3)),e]};r(u,function(u,e){var s=e.props,o=e.cache,h=e.to,c=e.from;i.fn[u]=function(u){if(h&&!this[o]&&(this[o]=h(this._rgba)),u===t)return this[o].slice();var l,a=n.type(u),v="array"===a||"object"===a?u:arguments,e=this[o].slice();return r(s,function(n,t){var i=v["object"===a?n:t.idx];null==i&&(i=e[t.idx]);e[t.idx]=f(i,t)}),c?(l=i(c(e)),l[o]=e,l):i(e)};r(s,function(t,r){i.fn[t]||(i.fn[t]=function(i){var f,e=n.type(i),h="alpha"===t?this._hsla?"hsla":"rgba":u,o=this[h](),s=o[r.idx];return"undefined"===e?s:("function"===e&&(i=i.call(this,s),e=n.type(i)),null==i&&r.empty?this:("string"===e&&(f=a.exec(i),f&&(i=s+parseFloat(f[2])*("+"===f[1]?1:-1))),o[r.idx]=i,this[h](o)))})})});i.hook=function(t){var u=t.split(" ");r(u,function(t,r){n.cssHooks[r]={set:function(t,u){var o,f,e="";if("transparent"!==u&&("string"!==n.type(u)||(o=s(u)))){if(u=i(o||u),!c.rgba&&1!==u._rgba[3]){for(f="backgroundColor"===r?t.parentNode:t;(""===e||"transparent"===e)&&f&&f.style;)try{e=n.css(f,"backgroundColor");f=f.parentNode}catch(h){}u=u.blend(e&&"transparent"!==e?e:"_default")}u=u.toRgbaString()}try{t.style[r]=u}catch(h){}}};n.fx.step[r]=function(t){t.colorInit||(t.start=i(t.elem,r),t.end=i(t.end),t.colorInit=!0);n.cssHooks[r].set(t.elem,t.start.transition(t.end,t.pos))}})};i.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");n.cssHooks.borderColor={expand:function(n){var t={};return r(["Top","Right","Bottom","Left"],function(i,r){t["border"+r+"Color"]=n}),t}};e=n.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var r,u,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,f={};if(i&&i.length&&i[0]&&i[i[0]])for(u=i.length;u--;)r=i[u],"string"==typeof i[r]&&(f[n.camelCase(r)]=i[r]);else for(r in i)"string"==typeof i[r]&&(f[r]=i[r]);return f}function r(t,i){var r,u,e={};for(r in i)u=i[r],t[r]!==u&&(f[r]||(n.fx.step[r]||!isNaN(parseFloat(u)))&&(e[r]=u));return e}var u=["add","remove","toggle"],f={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};n.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){n.fx.step[i]=function(n){("none"===n.end||n.setAttr)&&(1!==n.pos||n.setAttr)||(jQuery.style(n.elem,i,n.end),n.setAttr=!0)}});n.fn.addBack||(n.fn.addBack=function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))});n.effects.animateClass=function(t,f,e,o){var s=n.speed(f,e,o);return this.queue(function(){var o,e=n(this),h=e.attr("class")||"",f=s.children?e.find("*").addBack():e;f=f.map(function(){var t=n(this);return{el:t,start:i(this)}});o=function(){n.each(u,function(n,i){t[i]&&e[i+"Class"](t[i])})};o();f=f.map(function(){return this.end=i(this.el[0]),this.diff=r(this.start,this.end),this});e.attr("class",h);f=f.map(function(){var i=this,t=n.Deferred(),r=n.extend({},s,{queue:!1,complete:function(){t.resolve(i)}});return this.el.animate(this.diff,r),t.promise()});n.when.apply(n,f.get()).done(function(){o();n.each(arguments,function(){var t=this.el;n.each(this.diff,function(n){t.css(n,"")})});s.complete.call(e[0])})})};n.fn.extend({addClass:function(t){return function(i,r,u,f){return r?n.effects.animateClass.call(this,{add:i},r,u,f):t.apply(this,arguments)}}(n.fn.addClass),removeClass:function(t){return function(i,r,u,f){return arguments.length>1?n.effects.animateClass.call(this,{remove:i},r,u,f):t.apply(this,arguments)}}(n.fn.removeClass),toggleClass:function(i){return function(r,u,f,e,o){return"boolean"==typeof u||u===t?f?n.effects.animateClass.call(this,u?{add:r}:{remove:r},f,e,o):i.apply(this,arguments):n.effects.animateClass.call(this,{toggle:r},u,f,e)}}(n.fn.toggleClass),switchClass:function(t,i,r,u,f){return n.effects.animateClass.call(this,{add:i,remove:t},r,u,f)}})}(),function(){function r(t,i,r,u){return n.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),n.isFunction(i)&&(u=i,r=null,i={}),("number"==typeof i||n.fx.speeds[i])&&(u=r,r=i,i={}),n.isFunction(r)&&(u=r,r=null),i&&n.extend(t,i),r=r||i.duration,t.duration=n.fx.off?0:"number"==typeof r?r:r in n.fx.speeds?n.fx.speeds[r]:n.fx.speeds._default,t.complete=u||i.complete,t}function u(t){return!t||"number"==typeof t||n.fx.speeds[t]?!0:"string"!=typeof t||n.effects.effect[t]?n.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}n.extend(n.effects,{version:"1.10.3",save:function(n,t){for(var r=0;t.length>r;r++)null!==t[r]&&n.data(i+t[r],n[0].style[t[r]])},restore:function(n,r){for(var f,u=0;r.length>u;u++)null!==r[u]&&(f=n.data(i+r[u]),f===t&&(f=""),n.css(r[u],f))},setMode:function(n,t){return"toggle"===t&&(t=n.is(":hidden")?"show":"hide"),t},getBaseline:function(n,t){var i,r;switch(n[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=n[0]/t.height}switch(n[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=n[1]/t.width}return{x:r,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},u=n("<div><\/div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),f={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(e){r=document.body}return t.wrap(u),(t[0]===r||n.contains(t[0],r))&&n(r).focus(),u=t.parent(),"static"===t.css("position")?(u.css({position:"relative"}),t.css({position:"relative"})):(n.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),n.each(["top","left","bottom","right"],function(n,r){i[r]=t.css(r);isNaN(parseInt(i[r],10))&&(i[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(f),u.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||n.contains(t[0],i))&&n(i).focus()),t},setTransition:function(t,i,r,u){return u=u||{},n.each(i,function(n,i){var f=t.cssUnit(i);f[0]>0&&(u[i]=f[0]*r+f[1])}),u}});n.fn.extend({effect:function(){function i(i){function f(){n.isFunction(o)&&o.call(r[0]);n.isFunction(i)&&i()}var r=n(this),o=t.complete,u=t.mode;(r.is(":hidden")?"hide"===u:"show"===u)?(r[u](),f()):e.call(r[0],t,f)}var t=r.apply(this,arguments),u=t.mode,f=t.queue,e=n.effects.effect[t.effect];return n.fx.off||!e?u?this[u](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):f===!1?this.each(i):this.queue(f||"fx",i)},show:function(n){return function(t){if(u(t))return n.apply(this,arguments);var i=r.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(n.fn.show),hide:function(n){return function(t){if(u(t))return n.apply(this,arguments);var i=r.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(n.fn.hide),toggle:function(n){return function(t){if(u(t)||"boolean"==typeof t)return n.apply(this,arguments);var i=r.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(n.fn.toggle),cssUnit:function(t){var i=this.css(t),r=[];return n.each(["em","px","%","pt"],function(n,t){i.indexOf(t)>0&&(r=[parseFloat(i),t])}),r}})}(),function(){var t={};n.each(["Quad","Cubic","Quart","Quint","Expo"],function(n,i){t[i]=function(t){return Math.pow(t,n+2)}});n.extend(t,{Sine:function(n){return 1-Math.cos(n*Math.PI/2)},Circ:function(n){return 1-Math.sqrt(1-n*n)},Elastic:function(n){return 0===n||1===n?n:-Math.pow(2,8*(n-1))*Math.sin((80*(n-1)-7.5)*Math.PI/15)},Back:function(n){return n*n*(3*n-2)},Bounce:function(n){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>n;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-n,2)}});n.each(t,function(t,i){n.easing["easeIn"+t]=i;n.easing["easeOut"+t]=function(n){return 1-i(1-n)};n.easing["easeInOut"+t]=function(n){return.5>n?i(2*n)/2:1-i(-2*n+2)/2}})}()}(jQuery),function(n){var r=0,t={},i={};t.height=t.paddingTop=t.paddingBottom=t.borderTopWidth=t.borderBottomWidth="hide";i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show";n.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=n();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");t.collapsible||t.active!==!1&&null!=t.active||(t.active=0);this._processPanels();0>t.active&&(t.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():n(),content:this.active.length?this.active.next():n()}},_createIcons:function(){var t=this.options.icons;t&&(n("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var n;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});this._destroyIcons();n=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&n.css("height","")},_setOption:function(n,t){return"active"===n?(this._activate(t),undefined):("event"===n&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(n,t),"collapsible"!==n||t||this.options.active!==!1||this._activate(0),"icons"===n&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===n&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),undefined)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=n.ui.keyCode,u=this.headers.length,f=this.headers.index(t.target),r=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(f+1)%u];break;case i.LEFT:case i.UP:r=this.headers[(f-1+u)%u];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:r=this.headers[0];break;case i.END:r=this.headers[u-1]}r&&(n(t.target).attr("tabIndex",-1),n(r).attr("tabIndex",0),r.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===n.ui.keyCode.UP&&t.ctrlKey&&n(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels();t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=n()):t.active===!1?this._activate(0):this.active.length&&!n.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=n()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active);this._destroyIcons();this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,i=this.options,u=i.heightStyle,e=this.element.parent(),f=this.accordionId="ui-accordion-"+(this.element.attr("id")||++r);this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();this.headers.attr("role","tab").each(function(t){var i=n(this),r=i.attr("id"),e=i.next(),u=e.attr("id");r||(r=f+"-header-"+t,i.attr("id",r));u||(u=f+"-panel-"+t,e.attr("id",u));i.attr("aria-controls",u);e.attr("aria-labelledby",r)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(i.event);"fill"===u?(t=e.height(),this.element.siblings(":visible").each(function(){var i=n(this),r=i.css("position");"absolute"!==r&&"fixed"!==r&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=n(this).outerHeight(!0)}),this.headers.next().each(function(){n(this).height(Math.max(0,t-n(this).innerHeight()+n(this).height()))}).css("overflow","auto")):"auto"===u&&(t=0,this.headers.next().each(function(){t=Math.max(t,n(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:n.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):n()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&n.each(t.split(" "),function(n,t){i[t]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,i);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,u=this.active,r=n(t.currentTarget),f=r[0]===u[0],e=f&&i.collapsible,s=e?n():r.next(),h=u.next(),o={oldHeader:u,oldPanel:h,newHeader:e?n():r,newPanel:s};t.preventDefault();f&&!i.collapsible||this._trigger("beforeActivate",t,o)===!1||(i.active=e?!1:this.headers.index(r),this.active=f?n():r,this._toggle(o),u.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&u.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),f||(r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&r.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),r.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var r=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=r;this.prevHide=i;this.options.animate?this._animate(r,i,t):(i.hide(),r.show(),this._toggleComplete(t));i.attr({"aria-expanded":"false","aria-hidden":"true"});i.prev().attr("aria-selected","false");r.length&&i.length?i.prev().attr("tabIndex",-1):r.length&&this.headers.filter(function(){return 0===n(this).attr("tabIndex")}).attr("tabIndex",-1);r.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(n,r,u){var l,f,e,a=this,h=0,v=n.length&&(!r.length||n.index()<r.index()),s=this.options.animate||{},o=v&&s.down||s,c=function(){a._toggleComplete(u)};return"number"==typeof o&&(e=o),"string"==typeof o&&(f=o),f=f||o.easing||s.easing,e=e||o.duration||s.duration,r.length?n.length?(l=n.show().outerHeight(),r.animate(t,{duration:e,easing:f,step:function(n,t){t.now=Math.round(n)}}),n.hide().animate(i,{duration:e,easing:f,complete:c,step:function(n,t){t.now=Math.round(n);"height"!==t.prop?h+=t.now:"content"!==a.options.heightStyle&&(t.now=Math.round(l-r.outerHeight()-h),h=0)}}),undefined):r.animate(t,e,f,c):n.animate(i,e,f,c)},_toggleComplete:function(n){var t=n.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");t.length&&(t.parent()[0].className=t.parent()[0].className);this._trigger("activate",null,n)}})}(jQuery),function(n){var t=0;n.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,r,u=this.element[0].nodeName.toLowerCase(),f="textarea"===u,e="input"===u;this.isMultiLine=f?!0:e?!1:this.element.prop("isContentEditable");this.valueMethod=this.element[f||e?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(u){if(this.element.prop("readOnly"))return t=!0,r=!0,i=!0,undefined;t=!1;r=!1;i=!1;var f=n.ui.keyCode;switch(u.keyCode){case f.PAGE_UP:t=!0;this._move("previousPage",u);break;case f.PAGE_DOWN:t=!0;this._move("nextPage",u);break;case f.UP:t=!0;this._keyEvent("previous",u);break;case f.DOWN:t=!0;this._keyEvent("next",u);break;case f.ENTER:case f.NUMPAD_ENTER:this.menu.active&&(t=!0,u.preventDefault(),this.menu.select(u));break;case f.TAB:this.menu.active&&this.menu.select(u);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(u),u.preventDefault());break;default:i=!0;this._searchTimeout(u)}},keypress:function(r){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&r.preventDefault(),undefined;if(!i){var u=n.ui.keyCode;switch(r.keyCode){case u.PAGE_UP:this._move("previousPage",r);break;case u.PAGE_DOWN:this._move("nextPage",r);break;case u.UP:this._keyEvent("previous",r);break;case u.DOWN:this._keyEvent("next",r)}}},input:function(n){return r?(r=!1,n.preventDefault(),undefined):(this._searchTimeout(n),undefined)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(n){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(n),this._change(n),undefined)}});this._initSource();this.menu=n("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu");this._on(this.menu.element,{mousedown:function(t){t.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];n(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target===t.element[0]||r.target===i||n.contains(i,r.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){n(t.target).trigger(t.originalEvent)}),undefined;var r=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(n,t){var i=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r;this.selectedItem=i}));!1!==this._trigger("select",n,{item:i})&&this._value(i.value);this.term=this._value();this.close(n);this.selectedItem=i}});this.liveRegion=n("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(n,t){this._super(n,t);"source"===n&&this._initSource();"appendTo"===n&&this.menu.element.appendTo(this._appendTo());"disabled"===n&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?n(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var i,r,t=this;n.isArray(this.options.source)?(i=this.options.source,this.source=function(t,r){r(n.ui.autocomplete.filter(i,t.term))}):"string"==typeof this.options.source?(r=this.options.source,this.source=function(i,u){t.xhr&&t.xhr.abort();t.xhr=n.ajax({url:r,data:i,dataType:"json",success:function(n){u(n)},error:function(){u([])}})}):this.source=this.options.source},_searchTimeout:function(n){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,n))},this.options.delay)},search:function(n,t){return n=null!=n?n:this._value(),this.term=this._value(),n.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(n):undefined},_search:function(n){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:n},this._response())},_response:function(){var n=this,i=++t;return function(r){i===t&&n.__response(r);n.pending--;n.pending||n.element.removeClass("ui-autocomplete-loading")}},__response:function(n){n&&(n=this._normalize(n));this._trigger("response",null,{content:n});!this.options.disabled&&n&&n.length&&!this.cancelSearch?(this._suggest(n),this._trigger("open")):this._close()},close:function(n){this.cancelSearch=!0;this._close(n)},_close:function(n){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",n))},_change:function(n){this.previous!==this._value()&&this._trigger("change",n,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:n.map(t,function(t){return"string"==typeof t?{label:t,value:t}:n.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t);this.isNewMenu=!0;this.menu.refresh();i.show();this._resizeMenu();i.position(n.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var n=this.menu.element;n.outerWidth(Math.max(n.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var r=this;n.each(i,function(n,i){r._renderItemData(t,i)})},_renderItemData:function(n,t){return this._renderItem(n,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return n("<li>").append(n("<a>").text(i.label)).appendTo(t)},_move:function(n,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(n)||this.menu.isLastItem()&&/^next/.test(n)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[n](t),undefined):(this.search(null,t),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(n,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(n,t),t.preventDefault())}});n.extend(n.ui.autocomplete,{escapeRegex:function(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var r=RegExp(n.ui.autocomplete.escapeRegex(i),"i");return n.grep(t,function(n){return r.test(n.label||n.value||n)})}});n.widget("ui.autocomplete",n.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(n){return n+(n>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(n){var t;this._superApply(arguments);this.options.disabled||this.cancelSearch||(t=n&&n.length?this.options.messages.results(n.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(n){var i,r,u,t,f="ui-button ui-widget ui-state-default ui-corner-all",s="ui-state-hover ui-state-active ",e="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var t=n(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},o=function(t){var i=t.name,r=t.form,u=n([]);return i&&(i=i.replace(/'/g,"\\'"),u=r?n(r).find("[name='"+i+"']"):n("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),u};n.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h);"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var s=this,e=this.options,c="checkbox"===this.type||"radio"===this.type,a=c?"":"ui-state-active",l="ui-state-focus";null===e.label&&(e.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);this.buttonElement.addClass(f).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){e.disabled||this===i&&n(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){e.disabled||n(this).removeClass(a)}).bind("click"+this.eventNamespace,function(n){e.disabled&&(n.preventDefault(),n.stopImmediatePropagation())});this.element.bind("focus"+this.eventNamespace,function(){s.buttonElement.addClass(l)}).bind("blur"+this.eventNamespace,function(){s.buttonElement.removeClass(l)});c&&(this.element.bind("change"+this.eventNamespace,function(){t||s.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(n){e.disabled||(t=!1,r=n.pageX,u=n.pageY)}).bind("mouseup"+this.eventNamespace,function(n){e.disabled||(r!==n.pageX||u!==n.pageY)&&(t=!0)}));"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return e.disabled||t?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(e.disabled||t)return!1;n(this).addClass("ui-state-active");s.buttonElement.attr("aria-pressed","true");var i=s.element[0];o(i).not(i).map(function(){return n(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return e.disabled?!1:(n(this).addClass("ui-state-active"),i=this,s.document.one("mouseup",function(){i=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return e.disabled?!1:(n(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(t){return e.disabled?!1:((t.keyCode===n.ui.keyCode.SPACE||t.keyCode===n.ui.keyCode.ENTER)&&n(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){n(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===n.ui.keyCode.SPACE&&n(this).click()}));this._setOption("disabled",e.disabled);this._resetButton()},_determineButtonType:function(){var n,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button";"checkbox"===this.type||"radio"===this.type?(n=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=n.find(t),this.buttonElement.length||(n=n.length?n.siblings():this.element.siblings(),this.buttonElement=n.filter(t),this.buttonElement.length||(this.buttonElement=n.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(f+" "+s+" "+e).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(n,t){return this._super(n,t),"disabled"===n?(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t);"radio"===this.type?o(this.element[0]).each(function(){n(this).is(":checked")?n(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):n(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var i=this.buttonElement.removeClass(e),f=n("<span><\/span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(i.empty()).text(),t=this.options.icons,u=t.primary&&t.secondary,r=[];t.primary||t.secondary?(this.options.text&&r.push("ui-button-text-icon"+(u?"s":t.primary?"-primary":"-secondary")),t.primary&&i.prepend("<span class='ui-button-icon-primary ui-icon "+t.primary+"'><\/span>"),t.secondary&&i.append("<span class='ui-button-icon-secondary ui-icon "+t.secondary+"'><\/span>"),this.options.text||(r.push(u?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||i.attr("title",n.trim(f)))):r.push("ui-button-text-only");i.addClass(r.join(" "))}});n.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(n,t){"disabled"===n&&this.buttons.button("option",n,t);this._super(n,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return n(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return n(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(n,t){function f(){this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._datepickerShowing=!1;this._inDialog=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};n.extend(this._defaults,this.regional[""]);this.dpDiv=e(n("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'><\/div>"))}function e(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){n(this).removeClass("ui-state-hover");-1!==this.className.indexOf("ui-datepicker-prev")&&n(this).removeClass("ui-datepicker-prev-hover");-1!==this.className.indexOf("ui-datepicker-next")&&n(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){n.datepicker._isDisabledDatepicker(u.inline?t.parent()[0]:u.input[0])||(n(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),n(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&n(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&n(this).addClass("ui-datepicker-next-hover"))})}function r(t,i){n.extend(t,i);for(var r in i)null==i[r]&&(t[r]=i[r]);return t}n.extend(n.ui,{datepicker:{version:"1.10.3"}});var u,i="datepicker";n.extend(f.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(n){return r(this._defaults,n||{}),this},_attachDatepicker:function(t,i){var r,f,u;r=t.nodeName.toLowerCase();f="div"===r||"span"===r;t.id||(this.uuid+=1,t.id="dp"+this.uuid);u=this._newInst(n(t),f);u.settings=n.extend({},i||{});"input"===r?this._connectDatepicker(t,u):f&&this._inlineDatepicker(t,u)},_newInst:function(t,i){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?e(n("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'><\/div>")):this.dpDiv}},_connectDatepicker:function(t,r){var u=n(t);r.append=n([]);r.trigger=n([]);u.hasClass(this.markerClassName)||(this._attachments(u,r),u.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(r),n.data(t,i,r),r.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var u,r,f,e=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove();e&&(i.append=n("<span class='"+this._appendClass+"'>"+e+"<\/span>"),t[o?"before":"after"](i.append));t.unbind("focus",this._showDatepicker);i.trigger&&i.trigger.remove();u=this._get(i,"showOn");("focus"===u||"both"===u)&&t.focus(this._showDatepicker);("button"===u||"both"===u)&&(r=this._get(i,"buttonText"),f=this._get(i,"buttonImage"),i.trigger=n(this._get(i,"buttonImageOnly")?n("<img/>").addClass(this._triggerClass).attr({src:f,alt:r,title:r}):n("<button type='button'><\/button>").addClass(this._triggerClass).html(f?n("<img/>").attr({src:f,alt:r,title:r}):r)),t[o?"before":"after"](i.trigger),i.trigger.click(function(){return n.datepicker._datepickerShowing&&n.datepicker._lastInput===t[0]?n.datepicker._hideDatepicker():n.datepicker._datepickerShowing&&n.datepicker._lastInput!==t[0]?(n.datepicker._hideDatepicker(),n.datepicker._showDatepicker(t[0])):n.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(n){if(this._get(n,"autoSize")&&!n.inline){var r,u,f,t,i=new Date(2009,11,20),e=this._get(n,"dateFormat");e.match(/[DM]/)&&(r=function(n){for(u=0,f=0,t=0;n.length>t;t++)n[t].length>u&&(u=n[t].length,f=t);return f},i.setMonth(r(this._get(n,e.match(/MM/)?"monthNames":"monthNamesShort"))),i.setDate(r(this._get(n,e.match(/DD/)?"dayNames":"dayNamesShort"))+20-i.getDay()));n.input.attr("size",this._formatDate(n,i).length)}},_inlineDatepicker:function(t,r){var u=n(t);u.hasClass(this.markerClassName)||(u.addClass(this.markerClassName).append(r.dpDiv),n.data(t,i,r),this._setDate(r,this._getDefaultDate(r),!0),this._updateDatepicker(r),this._updateAlternate(r),r.settings.disabled&&this._disableDatepicker(t),r.dpDiv.css("display","block"))},_dialogDatepicker:function(t,u,f,e,o){var h,c,l,a,v,s=this._dialogInst;return s||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=n("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),n("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},n.data(this._dialogInput[0],i,s)),r(s.settings,e||{}),u=u&&u.constructor===Date?this._formatDate(s,u):u,this._dialogInput.val(u),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(c=document.documentElement.clientWidth,l=document.documentElement.clientHeight,a=document.documentElement.scrollLeft||document.body.scrollLeft,v=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+a,l/2-150+v]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=f,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),n.blockUI&&n.blockUI(this.dpDiv),n.data(this._dialogInput[0],i,s),this},_destroyDatepicker:function(t){var r,u=n(t),f=n.data(t,i);u.hasClass(this.markerClassName)&&(r=t.nodeName.toLowerCase(),n.removeData(t,i),"input"===r?(f.append.remove(),f.trigger.remove(),u.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===r||"span"===r)&&u.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var r,u,f=n(t),e=n.data(t,i);f.hasClass(this.markerClassName)&&(r=t.nodeName.toLowerCase(),"input"===r?(t.disabled=!1,e.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===r||"span"===r)&&(u=f.children("."+this._inlineClass),u.children().removeClass("ui-state-disabled"),u.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=n.map(this._disabledInputs,function(n){return n===t?null:n}))},_disableDatepicker:function(t){var r,u,f=n(t),e=n.data(t,i);f.hasClass(this.markerClassName)&&(r=t.nodeName.toLowerCase(),"input"===r?(t.disabled=!0,e.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===r||"span"===r)&&(u=f.children("."+this._inlineClass),u.children().addClass("ui-state-disabled"),u.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=n.map(this._disabledInputs,function(n){return n===t?null:n}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(n){if(!n)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===n)return!0;return!1},_getInst:function(t){try{return n.data(t,i)}catch(r){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(i,u,f){var o,c,s,h,e=this._getInst(i);return 2===arguments.length&&"string"==typeof u?"defaults"===u?n.extend({},n.datepicker._defaults):e?"all"===u?n.extend({},e.settings):this._get(e,u):null:(o=u||{},"string"==typeof u&&(o={},o[u]=f),e&&(this._curInst===e&&this._hideDatepicker(),c=this._getDateDatepicker(i,!0),s=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),r(e.settings,o),null!==s&&o.dateFormat!==t&&o.minDate===t&&(e.settings.minDate=this._formatDate(e,s)),null!==h&&o.dateFormat!==t&&o.maxDate===t&&(e.settings.maxDate=this._formatDate(e,h)),"disabled"in o&&(o.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(n(i),e),this._autoSize(e),this._setDate(e,c),this._updateAlternate(e),this._updateDatepicker(e)),t)},_changeDatepicker:function(n,t,i){this._optionDatepicker(n,t,i)},_refreshDatepicker:function(n){var t=this._getInst(n);t&&this._updateDatepicker(t)},_setDateDatepicker:function(n,t){var i=this._getInst(n);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(n,t){var i=this._getInst(n);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var u,e,f,i=n.datepicker._getInst(t.target),r=!0,o=i.dpDiv.is(".ui-datepicker-rtl");if(i._keyEvent=!0,n.datepicker._datepickerShowing)switch(t.keyCode){case 9:n.datepicker._hideDatepicker();r=!1;break;case 13:return f=n("td."+n.datepicker._dayOverClass+":not(."+n.datepicker._currentClass+")",i.dpDiv),f[0]&&n.datepicker._selectDay(t.target,i.selectedMonth,i.selectedYear,f[0]),u=n.datepicker._get(i,"onSelect"),u?(e=n.datepicker._formatDate(i),u.apply(i.input?i.input[0]:null,[e,i])):n.datepicker._hideDatepicker(),!1;case 27:n.datepicker._hideDatepicker();break;case 33:n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 34:n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&n.datepicker._clearDate(t.target);r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&n.datepicker._gotoToday(t.target);r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,o?1:-1,"D");r=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,-7,"D");r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,o?-1:1,"D");r=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,7,"D");r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?n.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(i){var r,u,f=n.datepicker._getInst(i.target);return n.datepicker._get(f,"constrainInput")?(r=n.datepicker._possibleChars(n.datepicker._get(f,"dateFormat")),u=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">u||!r||r.indexOf(u)>-1):t},_doKeyUp:function(t){var r,i=n.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{r=n.datepicker.parseDate(n.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,n.datepicker._getFormatConfig(i));r&&(n.datepicker._setDateFromField(i),n.datepicker._updateAlternate(i),n.datepicker._updateDatepicker(i))}catch(u){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=n("input",t.parentNode)[0]),!n.datepicker._isDisabledDatepicker(t)&&n.datepicker._lastInput!==t){var i,o,s,u,f,e,h;i=n.datepicker._getInst(t);n.datepicker._curInst&&n.datepicker._curInst!==i&&(n.datepicker._curInst.dpDiv.stop(!0,!0),i&&n.datepicker._datepickerShowing&&n.datepicker._hideDatepicker(n.datepicker._curInst.input[0]));o=n.datepicker._get(i,"beforeShow");s=o?o.apply(t,[t,i]):{};s!==!1&&(r(i.settings,s),i.lastVal=null,n.datepicker._lastInput=t,n.datepicker._setDateFromField(i),n.datepicker._inDialog&&(t.value=""),n.datepicker._pos||(n.datepicker._pos=n.datepicker._findPos(t),n.datepicker._pos[1]+=t.offsetHeight),u=!1,n(t).parents().each(function(){return u|="fixed"===n(this).css("position"),!u}),f={left:n.datepicker._pos[0],top:n.datepicker._pos[1]},n.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),n.datepicker._updateDatepicker(i),f=n.datepicker._checkOffset(i,f,u),i.dpDiv.css({position:n.datepicker._inDialog&&n.blockUI?"static":u?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"}),i.inline||(e=n.datepicker._get(i,"showAnim"),h=n.datepicker._get(i,"duration"),i.dpDiv.zIndex(n(t).zIndex()+1),n.datepicker._datepickerShowing=!0,n.effects&&n.effects.effect[e]?i.dpDiv.show(e,n.datepicker._get(i,"showOptions"),h):i.dpDiv[e||"show"](e?h:null),n.datepicker._shouldFocusInput(i)&&i.input.focus(),n.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4;u=t;t.dpDiv.empty().append(this._generateHTML(t));this._attachHandlers(t);t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,r=this._getNumberOfMonths(t),f=r[1];t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");f>1&&t.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",17*f+"em");t.dpDiv[(1!==r[0]||1!==r[1]?"add":"remove")+"Class"]("ui-datepicker-multi");t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");t===n.datepicker._curInst&&n.datepicker._datepickerShowing&&n.datepicker._shouldFocusInput(t)&&t.input.focus();t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml);i=t.yearshtml=null},0))},_shouldFocusInput:function(n){return n.input&&n.input.is(":visible")&&!n.input.is(":disabled")&&!n.input.is(":focus")},_checkOffset:function(t,i,r){var u=t.dpDiv.outerWidth(),f=t.dpDiv.outerHeight(),h=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,e=document.documentElement.clientWidth+(r?0:n(document).scrollLeft()),s=document.documentElement.clientHeight+(r?0:n(document).scrollTop());return i.left-=this._get(t,"isRTL")?u-h:0,i.left-=r&&i.left===t.input.offset().left?n(document).scrollLeft():0,i.top-=r&&i.top===t.input.offset().top+o?n(document).scrollTop():0,i.left-=Math.min(i.left,i.left+u>e&&e>u?Math.abs(i.left+u-e):0),i.top-=Math.min(i.top,i.top+f>s&&s>f?Math.abs(f+o):0),i},_findPos:function(t){for(var i,r=this._getInst(t),u=this._get(r,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||n.expr.filters.hidden(t));)t=t[u?"previousSibling":"nextSibling"];return i=n(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var u,e,f,o,r=this._curInst;!r||t&&r!==n.data(t,i)||this._datepickerShowing&&(u=this._get(r,"showAnim"),e=this._get(r,"duration"),f=function(){n.datepicker._tidyDialog(r)},n.effects&&(n.effects.effect[u]||n.effects[u])?r.dpDiv.hide(u,n.datepicker._get(r,"showOptions"),e,f):r.dpDiv["slideDown"===u?"slideUp":"fadeIn"===u?"fadeOut":"hide"](u?e:null,f),u||f(),this._datepickerShowing=!1,o=this._get(r,"onClose"),o&&o.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),n.blockUI&&(n.unblockUI(),n("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(n){n.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(n.datepicker._curInst){var i=n(t.target),r=n.datepicker._getInst(i[0]);(i[0].id===n.datepicker._mainDivId||0!==i.parents("#"+n.datepicker._mainDivId).length||i.hasClass(n.datepicker.markerClassName)||i.closest("."+n.datepicker._triggerClass).length||!n.datepicker._datepickerShowing||n.datepicker._inDialog&&n.blockUI)&&(!i.hasClass(n.datepicker.markerClassName)||n.datepicker._curInst===r)||n.datepicker._hideDatepicker()}},_adjustDate:function(t,i,r){var f=n(t),u=this._getInst(f[0]);this._isDisabledDatepicker(f[0])||(this._adjustInstDate(u,i+("M"===r?this._get(u,"showCurrentAtPos"):0),r),this._updateDatepicker(u))},_gotoToday:function(t){var r,u=n(t),i=this._getInst(u[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(r=new Date,i.selectedDay=r.getDate(),i.drawMonth=i.selectedMonth=r.getMonth(),i.drawYear=i.selectedYear=r.getFullYear());this._notifyChange(i);this._adjustDate(u)},_selectMonthYear:function(t,i,r){var f=n(t),u=this._getInst(f[0]);u["selected"+("M"===r?"Month":"Year")]=u["draw"+("M"===r?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10);this._notifyChange(u);this._adjustDate(f)},_selectDay:function(t,i,r,u){var f,e=n(t);n(u).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])||(f=this._getInst(e[0]),f.selectedDay=f.currentDay=n("a",u).html(),f.selectedMonth=f.currentMonth=i,f.selectedYear=f.currentYear=r,this._selectDate(t,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(t){var i=n(t);this._selectDate(i,"")},_selectDate:function(t,i){var u,f=n(t),r=this._getInst(f[0]);i=null!=i?i:this._formatDate(r);r.input&&r.input.val(i);this._updateAlternate(r);u=this._get(r,"onSelect");u?u.apply(r.input?r.input[0]:null,[i,r]):r.input&&r.input.trigger("change");r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,r,u,f=this._get(t,"altField");f&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),u=this.formatDate(i,r,this._getFormatConfig(t)),n(f).each(function(){n(this).val(u)}))},noWeekends:function(n){var t=n.getDay();return[t>0&&6>t,""]},iso8601Week:function(n){var i,t=new Date(n.getTime());return t.setDate(t.getDate()+4-(t.getDay()||7)),i=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(i,r,u){if(null==i||null==r)throw"Invalid arguments";if(r="object"==typeof r?""+r:r+"",""===r)return null;for(var v,y,f,e=0,p=(u?u.shortYearCutoff:null)||this._defaults.shortYearCutoff,g="string"!=typeof p?p:(new Date).getFullYear()%100+parseInt(p,10),nt=(u?u.dayNamesShort:null)||this._defaults.dayNamesShort,tt=(u?u.dayNames:null)||this._defaults.dayNames,it=(u?u.monthNamesShort:null)||this._defaults.monthNamesShort,rt=(u?u.monthNames:null)||this._defaults.monthNames,o=-1,h=-1,c=-1,w=-1,b=!1,a=function(n){var t=i.length>s+1&&i.charAt(s+1)===n;return t&&s++,t},l=function(n){var i=a(n),u="@"===n?14:"!"===n?20:"y"===n&&i?4:"o"===n?3:2,f=RegExp("^\\d{1,"+u+"}"),t=r.substring(e).match(f);if(!t)throw"Missing number at position "+e;return e+=t[0].length,parseInt(t[0],10)},d=function(i,u,f){var o=-1,s=n.map(a(i)?f:u,function(n,t){return[[t,n]]}).sort(function(n,t){return-(n[1].length-t[1].length)});if(n.each(s,function(n,i){var u=i[1];return r.substr(e,u.length).toLowerCase()===u.toLowerCase()?(o=i[0],e+=u.length,!1):t}),-1!==o)return o+1;throw"Unknown name at position "+e;},k=function(){if(r.charAt(e)!==i.charAt(s))throw"Unexpected literal at position "+e;e++},s=0;i.length>s;s++)if(b)"'"!==i.charAt(s)||a("'")?k():b=!1;else switch(i.charAt(s)){case"d":c=l("d");break;case"D":d("D",nt,tt);break;case"o":w=l("o");break;case"m":h=l("m");break;case"M":h=d("M",it,rt);break;case"y":o=l("y");break;case"@":f=new Date(l("@"));o=f.getFullYear();h=f.getMonth()+1;c=f.getDate();break;case"!":f=new Date((l("!")-this._ticksTo1970)/1e4);o=f.getFullYear();h=f.getMonth()+1;c=f.getDate();break;case"'":a("'")?k():b=!0;break;default:k()}if(r.length>e&&(y=r.substr(e),!/^\s+/.test(y)))throw"Extra/unparsed characters found in date: "+y;if(-1===o?o=(new Date).getFullYear():100>o&&(o+=(new Date).getFullYear()-(new Date).getFullYear()%100+(g>=o?0:-100)),w>-1)for(h=1,c=w;;){if(v=this._getDaysInMonth(o,h-1),v>=c)break;h++;c-=v}if(f=this._daylightSavingAdjust(new Date(o,h-1,c)),f.getFullYear()!==o||f.getMonth()+1!==h||f.getDate()!==c)throw"Invalid date";return f},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(n,t,i){if(!t)return"";var u,h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,c=(i?i.dayNames:null)||this._defaults.dayNames,l=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,f=function(t){var i=n.length>u+1&&n.charAt(u+1)===t;return i&&u++,i},e=function(n,t,i){var r=""+t;if(f(n))for(;i>r.length;)r="0"+r;return r},s=function(n,t,i,r){return f(n)?r[t]:i[t]},r="",o=!1;if(t)for(u=0;n.length>u;u++)if(o)"'"!==n.charAt(u)||f("'")?r+=n.charAt(u):o=!1;else switch(n.charAt(u)){case"d":r+=e("d",t.getDate(),2);break;case"D":r+=s("D",t.getDay(),h,c);break;case"o":r+=e("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":r+=e("m",t.getMonth()+1,2);break;case"M":r+=s("M",t.getMonth(),l,a);break;case"y":r+=f("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":r+=t.getTime();break;case"!":r+=1e4*t.getTime()+this._ticksTo1970;break;case"'":f("'")?r+="'":o=!0;break;default:r+=n.charAt(u)}return r},_possibleChars:function(n){for(var i="",r=!1,u=function(i){var r=n.length>t+1&&n.charAt(t+1)===i;return r&&t++,r},t=0;n.length>t;t++)if(r)"'"!==n.charAt(t)||u("'")?i+=n.charAt(t):r=!1;else switch(n.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":u("'")?i+="'":r=!0;break;default:i+=n.charAt(t)}return i},_get:function(n,i){return n.settings[i]!==t?n.settings[i]:this._defaults[i]},_setDateFromField:function(n,t){if(n.input.val()!==n.lastVal){var f=this._get(n,"dateFormat"),r=n.lastVal=n.input?n.input.val():null,u=this._getDefaultDate(n),i=u,e=this._getFormatConfig(n);try{i=this.parseDate(f,r,e)||u}catch(o){r=t?"":r}n.selectedDay=i.getDate();n.drawMonth=n.selectedMonth=i.getMonth();n.drawYear=n.selectedYear=i.getFullYear();n.currentDay=r?i.getDate():0;n.currentMonth=r?i.getMonth():0;n.currentYear=r?i.getFullYear():0;this._adjustInstDate(n)}},_getDefaultDate:function(n){return this._restrictMinMax(n,this._determineDate(n,this._get(n,"defaultDate"),new Date))},_determineDate:function(t,i,r){var f=function(n){var t=new Date;return t.setDate(t.getDate()+n),t},e=function(i){try{return n.datepicker.parseDate(n.datepicker._get(t,"dateFormat"),i,n.datepicker._getFormatConfig(t))}catch(h){}for(var o=(i.toLowerCase().match(/^c/)?n.datepicker._getDate(t):null)||new Date,f=o.getFullYear(),e=o.getMonth(),r=o.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=s.exec(i);u;){switch(u[2]||"d"){case"d":case"D":r+=parseInt(u[1],10);break;case"w":case"W":r+=7*parseInt(u[1],10);break;case"m":case"M":e+=parseInt(u[1],10);r=Math.min(r,n.datepicker._getDaysInMonth(f,e));break;case"y":case"Y":f+=parseInt(u[1],10);r=Math.min(r,n.datepicker._getDaysInMonth(f,e))}u=s.exec(i)}return new Date(f,e,r)},u=null==i||""===i?r:"string"==typeof i?e(i):"number"==typeof i?isNaN(i)?r:f(i):new Date(i.getTime());return u=u&&"Invalid Date"==""+u?r:u,u&&(u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0)),this._daylightSavingAdjust(u)},_daylightSavingAdjust:function(n){return n?(n.setHours(n.getHours()>12?n.getHours()+2:0),n):null},_setDate:function(n,t,i){var u=!t,f=n.selectedMonth,e=n.selectedYear,r=this._restrictMinMax(n,this._determineDate(n,t,new Date));n.selectedDay=n.currentDay=r.getDate();n.drawMonth=n.selectedMonth=n.currentMonth=r.getMonth();n.drawYear=n.selectedYear=n.currentYear=r.getFullYear();f===n.selectedMonth&&e===n.selectedYear||i||this._notifyChange(n);this._adjustInstDate(n);n.input&&n.input.val(u?"":this._formatDate(n))},_getDate:function(n){return!n.currentYear||n.input&&""===n.input.val()?null:this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay))},_attachHandlers:function(t){var r=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){n.datepicker._adjustDate(i,-r,"M")},next:function(){n.datepicker._adjustDate(i,+r,"M")},hide:function(){n.datepicker._hideDatepicker()},today:function(){n.datepicker._gotoToday(i)},selectDay:function(){return n.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return n.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return n.datepicker._selectMonthYear(i,this,"Y"),!1}};n(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(n){var b,s,rt,h,ut,k,ft,et,ri,c,ot,ui,fi,ei,oi,st,g,si,ht,nt,o,y,ct,p,lt,l,u,at,vt,yt,pt,tt,wt,i,bt,kt,d,a,it,dt=new Date,gt=this._daylightSavingAdjust(new Date(dt.getFullYear(),dt.getMonth(),dt.getDate())),f=this._get(n,"isRTL"),li=this._get(n,"showButtonPanel"),hi=this._get(n,"hideIfNoPrevNext"),ni=this._get(n,"navigationAsDateFormat"),e=this._getNumberOfMonths(n),ai=this._get(n,"showCurrentAtPos"),ci=this._get(n,"stepMonths"),ti=1!==e[0]||1!==e[1],ii=this._daylightSavingAdjust(n.currentDay?new Date(n.currentYear,n.currentMonth,n.currentDay):new Date(9999,9,9)),w=this._getMinMaxDate(n,"min"),v=this._getMinMaxDate(n,"max"),t=n.drawMonth-ai,r=n.drawYear;if(0>t&&(t+=12,r--),v)for(b=this._daylightSavingAdjust(new Date(v.getFullYear(),v.getMonth()-e[0]*e[1]+1,v.getDate())),b=w&&w>b?w:b;this._daylightSavingAdjust(new Date(r,t,1))>b;)t--,0>t&&(t=11,r--);for(n.drawMonth=t,n.drawYear=r,s=this._get(n,"prevText"),s=ni?this.formatDate(s,this._daylightSavingAdjust(new Date(r,t-ci,1)),this._getFormatConfig(n)):s,rt=this._canAdjustMonth(n,-1,r,t)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"e":"w")+"'>"+s+"<\/span><\/a>":hi?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"e":"w")+"'>"+s+"<\/span><\/a>",h=this._get(n,"nextText"),h=ni?this.formatDate(h,this._daylightSavingAdjust(new Date(r,t+ci,1)),this._getFormatConfig(n)):h,ut=this._canAdjustMonth(n,1,r,t)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+h+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"w":"e")+"'>"+h+"<\/span><\/a>":hi?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+h+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"w":"e")+"'>"+h+"<\/span><\/a>",k=this._get(n,"currentText"),ft=this._get(n,"gotoCurrent")&&n.currentDay?ii:gt,k=ni?this.formatDate(k,ft,this._getFormatConfig(n)):k,et=n.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(n,"closeText")+"<\/button>",ri=li?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(f?et:"")+(this._isInRange(n,ft)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+k+"<\/button>":"")+(f?"":et)+"<\/div>":"",c=parseInt(this._get(n,"firstDay"),10),c=isNaN(c)?0:c,ot=this._get(n,"showWeek"),ui=this._get(n,"dayNames"),fi=this._get(n,"dayNamesMin"),ei=this._get(n,"monthNames"),oi=this._get(n,"monthNamesShort"),st=this._get(n,"beforeShowDay"),g=this._get(n,"showOtherMonths"),si=this._get(n,"selectOtherMonths"),ht=this._getDefaultDate(n),nt="",y=0;e[0]>y;y++){for(ct="",this.maxRows=4,p=0;e[1]>p;p++){if(lt=this._daylightSavingAdjust(new Date(r,t,n.selectedDay)),l=" ui-corner-all",u="",ti){if(u+="<div class='ui-datepicker-group",e[1]>1)switch(p){case 0:u+=" ui-datepicker-group-first";l=" ui-corner-"+(f?"right":"left");break;case e[1]-1:u+=" ui-datepicker-group-last";l=" ui-corner-"+(f?"left":"right");break;default:u+=" ui-datepicker-group-middle";l=""}u+="'>"}for(u+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+l+"'>"+(/all|left/.test(l)&&0===y?f?ut:rt:"")+(/all|right/.test(l)&&0===y?f?rt:ut:"")+this._generateMonthYearHeader(n,t,r,w,v,y>0||p>0,ei,oi)+"<\/div><table class='ui-datepicker-calendar'><thead><tr>",at=ot?"<th class='ui-datepicker-week-col'>"+this._get(n,"weekHeader")+"<\/th>":"",o=0;7>o;o++)vt=(o+c)%7,at+="<th"+((o+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+ui[vt]+"'>"+fi[vt]+"<\/span><\/th>";for(u+=at+"<\/tr><\/thead><tbody>",yt=this._getDaysInMonth(r,t),r===n.selectedYear&&t===n.selectedMonth&&(n.selectedDay=Math.min(n.selectedDay,yt)),pt=(this._getFirstDayOfMonth(r,t)-c+7)%7,tt=Math.ceil((pt+yt)/7),wt=ti?this.maxRows>tt?this.maxRows:tt:tt,this.maxRows=wt,i=this._daylightSavingAdjust(new Date(r,t,1-pt)),bt=0;wt>bt;bt++){for(u+="<tr>",kt=ot?"<td class='ui-datepicker-week-col'>"+this._get(n,"calculateWeek")(i)+"<\/td>":"",o=0;7>o;o++)d=st?st.apply(n.input?n.input[0]:null,[i]):[!0,""],a=i.getMonth()!==t,it=a&&!si||!d[0]||w&&w>i||v&&i>v,kt+="<td class='"+((o+c+6)%7>=5?" ui-datepicker-week-end":"")+(a?" ui-datepicker-other-month":"")+(i.getTime()===lt.getTime()&&t===n.selectedMonth&&n._keyEvent||ht.getTime()===i.getTime()&&ht.getTime()===lt.getTime()?" "+this._dayOverClass:"")+(it?" "+this._unselectableClass+" ui-state-disabled":"")+(a&&!g?"":" "+d[1]+(i.getTime()===ii.getTime()?" "+this._currentClass:"")+(i.getTime()===gt.getTime()?" ui-datepicker-today":""))+"'"+(a&&!g||!d[2]?"":" title='"+d[2].replace(/'/g,"&#39;")+"'")+(it?"":" data-handler='selectDay' data-event='click' data-month='"+i.getMonth()+"' data-year='"+i.getFullYear()+"'")+">"+(a&&!g?"&#xa0;":it?"<span class='ui-state-default'>"+i.getDate()+"<\/span>":"<a class='ui-state-default"+(i.getTime()===gt.getTime()?" ui-state-highlight":"")+(i.getTime()===ii.getTime()?" ui-state-active":"")+(a?" ui-priority-secondary":"")+"' href='#'>"+i.getDate()+"<\/a>")+"<\/td>",i.setDate(i.getDate()+1),i=this._daylightSavingAdjust(i);u+=kt+"<\/tr>"}t++;t>11&&(t=0,r++);u+="<\/tbody><\/table>"+(ti?"<\/div>"+(e[0]>0&&p===e[1]-1?"<div class='ui-datepicker-row-break'><\/div>":""):"");ct+=u}nt+=ct}return nt+=ri,n._keyEvent=!1,nt},_generateMonthYearHeader:function(n,t,i,r,u,f,e,o){var k,d,h,v,y,p,s,a,w=this._get(n,"changeMonth"),b=this._get(n,"changeYear"),g=this._get(n,"showMonthAfterYear"),c="<div class='ui-datepicker-title'>",l="";if(f||!w)l+="<span class='ui-datepicker-month'>"+e[t]+"<\/span>";else{for(k=r&&r.getFullYear()===i,d=u&&u.getFullYear()===i,l+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",h=0;12>h;h++)(!k||h>=r.getMonth())&&(!d||u.getMonth()>=h)&&(l+="<option value='"+h+"'"+(h===t?" selected='selected'":"")+">"+o[h]+"<\/option>");l+="<\/select>"}if(g||(c+=l+(!f&&w&&b?"":"&#xa0;")),!n.yearshtml)if(n.yearshtml="",f||!b)c+="<span class='ui-datepicker-year'>"+i+"<\/span>";else{for(v=this._get(n,"yearRange").split(":"),y=(new Date).getFullYear(),p=function(n){var t=n.match(/c[+\-].*/)?i+parseInt(n.substring(1),10):n.match(/[+\-].*/)?y+parseInt(n,10):parseInt(n,10);return isNaN(t)?y:t},s=p(v[0]),a=Math.max(s,p(v[1]||"")),s=r?Math.max(s,r.getFullYear()):s,a=u?Math.min(a,u.getFullYear()):a,n.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";a>=s;s++)n.yearshtml+="<option value='"+s+"'"+(s===i?" selected='selected'":"")+">"+s+"<\/option>";n.yearshtml+="<\/select>";c+=n.yearshtml;n.yearshtml=null}return c+=this._get(n,"yearSuffix"),g&&(c+=(!f&&w&&b?"":"&#xa0;")+l),c+"<\/div>"},_adjustInstDate:function(n,t,i){var u=n.drawYear+("Y"===i?t:0),f=n.drawMonth+("M"===i?t:0),e=Math.min(n.selectedDay,this._getDaysInMonth(u,f))+("D"===i?t:0),r=this._restrictMinMax(n,this._daylightSavingAdjust(new Date(u,f,e)));n.selectedDay=r.getDate();n.drawMonth=n.selectedMonth=r.getMonth();n.drawYear=n.selectedYear=r.getFullYear();("M"===i||"Y"===i)&&this._notifyChange(n)},_restrictMinMax:function(n,t){var i=this._getMinMaxDate(n,"min"),r=this._getMinMaxDate(n,"max"),u=i&&i>t?i:t;return r&&u>r?r:u},_notifyChange:function(n){var t=this._get(n,"onChangeMonthYear");t&&t.apply(n.input?n.input[0]:null,[n.selectedYear,n.selectedMonth+1,n])},_getNumberOfMonths:function(n){var t=this._get(n,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(n,t){return this._determineDate(n,this._get(n,t+"Date"),null)},_getDaysInMonth:function(n,t){return 32-this._daylightSavingAdjust(new Date(n,t,32)).getDate()},_getFirstDayOfMonth:function(n,t){return new Date(n,t,1).getDay()},_canAdjustMonth:function(n,t,i,r){var f=this._getNumberOfMonths(n),u=this._daylightSavingAdjust(new Date(i,r+(0>t?t:f[0]*f[1]),1));return 0>t&&u.setDate(this._getDaysInMonth(u.getFullYear(),u.getMonth())),this._isInRange(n,u)},_isInRange:function(n,t){var i,f,e=this._getMinMaxDate(n,"min"),o=this._getMinMaxDate(n,"max"),r=null,u=null,s=this._get(n,"yearRange");return s&&(i=s.split(":"),f=(new Date).getFullYear(),r=parseInt(i[0],10),u=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=f),i[1].match(/[+\-].*/)&&(u+=f)),(!e||t.getTime()>=e.getTime())&&(!o||t.getTime()<=o.getTime())&&(!r||t.getFullYear()>=r)&&(!u||u>=t.getFullYear())},_getFormatConfig:function(n){var t=this._get(n,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(n,"dayNamesShort"),dayNames:this._get(n,"dayNames"),monthNamesShort:this._get(n,"monthNamesShort"),monthNames:this._get(n,"monthNames")}},_formatDate:function(n,t,i,r){t||(n.currentDay=n.selectedDay,n.currentMonth=n.selectedMonth,n.currentYear=n.selectedYear);var u=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(r,i,t)):this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay));return this.formatDate(this._get(n,"dateFormat"),u,this._getFormatConfig(n))}});n.fn.datepicker=function(t){if(!this.length)return this;n.datepicker.initialized||(n(document).mousedown(n.datepicker._checkExternalClick),n.datepicker.initialized=!0);0===n("#"+n.datepicker._mainDivId).length&&n("body").append(n.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this].concat(i)):n.datepicker._attachDatepicker(this,t)}):n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i))};n.datepicker=new f;n.datepicker.initialized=!1;n.datepicker.uuid=(new Date).getTime();n.datepicker.version="1.10.3"}(jQuery),function(n){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};n.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=n(this).css(t).offset().top;0>i&&n(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();this.options.draggable&&n.fn.draggable&&this._makeDraggable();this.options.resizable&&n.fn.resizable&&this._makeResizable();this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?n(t):this.document.find(t||"body").eq(0)},_destroy:function(){var n,t=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();this.uiDialog.stop(!0,!0).remove();this.originalTitle&&this.element.attr("title",this.originalTitle);n=t.parent.children().eq(t.index);n.length&&n[0]!==this.element[0]?n.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:n.noop,enable:n.noop,close:function(t){var i=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||n(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(n,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",n),i},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=n(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable();t._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var n=this.element.find("[autofocus]");n.length||(n=this.element.find(":tabbable"));n.length||(n=this.uiDialogButtonPane.find(":tabbable"));n.length||(n=this.uiDialogTitlebarClose.filter(":tabbable"));n.length||(n=this.uiDialog);n.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||n.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault();i.call(this);this._delay(i)},_createWrapper:function(){this.uiDialog=n("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===n.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),undefined;if(t.keyCode===n.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),r=i.filter(":first"),u=i.filter(":last");t.target!==u[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==r[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(u.focus(1),t.preventDefault()):(r.focus(1),t.preventDefault())}},mousedown:function(n){this._moveToTop(n)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=n("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(t){n(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}});this.uiDialogTitlebarClose=n("<button><\/button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(n){n.preventDefault();this.close(n)}});t=n("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);this._title(t);this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(n){this.options.title||n.html("&#160;");n.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=n("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiButtonSet=n("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var i=this,t=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),n.isEmptyObject(t)||n.isArray(t)&&!t.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(n.each(t,function(t,r){var u,f;r=n.isFunction(r)?{click:r,text:t}:r;r=n.extend({type:"button"},r);u=r.click;r.click=function(){u.apply(i.element[0],arguments)};f={icons:r.icons,text:r.showText};delete r.icons;delete r.showText;n("<button><\/button>",r).button(f).appendTo(i.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function i(n){return{position:n.position,offset:n.offset}}var t=this,r=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,u){n(this).addClass("ui-dialog-dragging");t._blockFrames();t._trigger("dragStart",r,i(u))},drag:function(n,r){t._trigger("drag",n,i(r))},stop:function(u,f){r.position=[f.position.left-t.document.scrollLeft(),f.position.top-t.document.scrollTop()];n(this).removeClass("ui-dialog-dragging");t._unblockFrames();t._trigger("dragStop",u,i(f))}})},_makeResizable:function(){function r(n){return{originalPosition:n.originalPosition,originalSize:n.originalSize,position:n.position,size:n.size}}var i=this,t=this.options,u=t.resizable,f=this.uiDialog.css("position"),e="string"==typeof u?u:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:t.maxWidth,maxHeight:t.maxHeight,minWidth:t.minWidth,minHeight:this._minHeight(),handles:e,start:function(t,u){n(this).addClass("ui-dialog-resizing");i._blockFrames();i._trigger("resizeStart",t,r(u))},resize:function(n,t){i._trigger("resize",n,r(t))},stop:function(u,f){t.height=n(this).height();t.width=n(this).width();n(this).removeClass("ui-dialog-resizing");i._unblockFrames();i._trigger("resizeStop",u,r(f))}}).css("position",f)},_minHeight:function(){var n=this.options;return"auto"===n.height?n.minHeight:Math.min(n.minHeight,n.height)},_position:function(){var n=this.uiDialog.is(":visible");n||this.uiDialog.show();this.uiDialog.position(this.options.position);n||this.uiDialog.hide()},_setOptions:function(r){var e=this,u=!1,f={};n.each(r,function(n,r){e._setOption(n,r);n in t&&(u=!0);n in i&&(f[n]=r)});u&&(this._size(),this._position());this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(n,t){var u,r,i=this.uiDialog;"dialogClass"===n&&i.removeClass(this.options.dialogClass).addClass(t);"disabled"!==n&&(this._super(n,t),"appendTo"===n&&this.uiDialog.appendTo(this._appendTo()),"buttons"===n&&this._createButtons(),"closeText"===n&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===n&&(u=i.is(":data(ui-draggable)"),u&&!t&&i.draggable("destroy"),!u&&t&&this._makeDraggable()),"position"===n&&this._position(),"resizable"===n&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&"string"==typeof t&&i.resizable("option","handles",t),r||t===!1||this._makeResizable()),"title"===n&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,i,r,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});n.minWidth>n.width&&(n.width=n.minWidth);t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight();i=Math.max(0,n.minHeight-t);r="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none";"auto"===n.height?this.element.css({minHeight:i,maxHeight:r,height:"auto"}):this.element.height(Math.max(0,n.height-t));this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=n(this);return n("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return n(t.target).closest(".ui-dialog").length?!0:!!n(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;n.ui.dialog.overlayInstances||this._delay(function(){n.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(r){t._allowInteraction(r)||(r.preventDefault(),n(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})});this.overlay=n("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});n.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(n.ui.dialog.overlayInstances--,n.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}});n.ui.dialog.overlayInstances=0;n.uiBackCompat!==!1&&n.widget("ui.dialog",n.ui.dialog,{_position:function(){var u,t=this.options.position,i=[],r=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(i=t.split?t.split(" "):[t[0],t[1]],1===i.length&&(i[1]=i[0]),n.each(["left","top"],function(n,t){+i[n]===i[n]&&(r[n]=i[n],i[n]=t)}),t={my:i[0]+(0>r[0]?r[0]:"+"+r[0])+" "+i[1]+(0>r[1]?r[1]:"+"+r[1]),at:i.join(" ")}),t=n.extend({},n.ui.dialog.prototype.options.position,t)):t=n.ui.dialog.prototype.options.position;u=this.uiDialog.is(":visible");u||this.uiDialog.show();this.uiDialog.position(t);u||this.uiDialog.hide()}})}(jQuery),function(n){var t=/up|down|vertical/,i=/up|left|vertical|horizontal/;n.effects.effect.blind=function(r,u){var e,o,s,f=n(this),c=["position","top","bottom","left","right","height","width"],p=n.effects.setMode(f,r.mode||"hide"),w=r.direction||"up",h=t.test(w),l=h?"height":"width",a=h?"top":"left",b=i.test(w),v={},y="show"===p;f.parent().is(".ui-effects-wrapper")?n.effects.save(f.parent(),c):n.effects.save(f,c);f.show();e=n.effects.createWrapper(f).css({overflow:"hidden"});o=e[l]();s=parseFloat(e.css(a))||0;v[l]=y?o:0;b||(f.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),v[a]=y?s:o+s);y&&(e.css(l,0),b||e.css(a,s+o));e.animate(v,{duration:r.duration,easing:r.easing,queue:!1,complete:function(){"hide"===p&&f.hide();n.effects.restore(f,c);n.effects.removeWrapper(f);u()}})}}(jQuery),function(n){n.effects.effect.bounce=function(t,i){var v,f,e,r=n(this),y=["position","top","bottom","left","right","height","width"],k=n.effects.setMode(r,t.mode||"effect"),o="hide"===k,p="show"===k,h=t.direction||"up",u=t.distance,w=t.times||5,d=2*w+(p||o?1:0),c=t.duration/d,l=t.easing,s="up"===h||"down"===h?"top":"left",b="up"===h||"left"===h,a=r.queue(),g=a.length;for((p||o)&&y.push("opacity"),n.effects.save(r,y),r.show(),n.effects.createWrapper(r),u||(u=r["top"===s?"outerHeight":"outerWidth"]()/3),p&&(e={opacity:1},e[s]=0,r.css("opacity",0).css(s,b?2*-u:2*u).animate(e,c,l)),o&&(u/=Math.pow(2,w-1)),e={},e[s]=0,v=0;w>v;v++)f={},f[s]=(b?"-=":"+=")+u,r.animate(f,c,l).animate(e,c,l),u=o?2*u:u/2;o&&(f={opacity:0},f[s]=(b?"-=":"+=")+u,r.animate(f,c,l));r.queue(function(){o&&r.hide();n.effects.restore(r,y);n.effects.removeWrapper(r);i()});g>1&&a.splice.apply(a,[1,0].concat(a.splice(g,d+1)));r.dequeue()}}(jQuery),function(n){n.effects.effect.clip=function(t,i){var h,u,f,r=n(this),c=["position","top","bottom","left","right","height","width"],v=n.effects.setMode(r,t.mode||"hide"),e="show"===v,y=t.direction||"vertical",l="vertical"===y,o=l?"height":"width",a=l?"top":"left",s={};n.effects.save(r,c);r.show();h=n.effects.createWrapper(r).css({overflow:"hidden"});u="IMG"===r[0].tagName?h:r;f=u[o]();e&&(u.css(o,0),u.css(a,f/2));s[o]=e?f:0;s[a]=e?0:f/2;u.animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){e||r.hide();n.effects.restore(r,c);n.effects.removeWrapper(r);i()}})}}(jQuery),function(n){n.effects.effect.drop=function(t,i){var u,r=n(this),h=["position","top","bottom","left","right","opacity","height","width"],c=n.effects.setMode(r,t.mode||"hide"),e="show"===c,f=t.direction||"left",o="up"===f||"down"===f?"top":"left",s="up"===f||"left"===f?"pos":"neg",l={opacity:e?1:0};n.effects.save(r,h);r.show();n.effects.createWrapper(r);u=t.distance||r["top"===o?"outerHeight":"outerWidth"](!0)/2;e&&r.css("opacity",0).css(o,"pos"===s?-u:u);l[o]=(e?"pos"===s?"+=":"-=":"pos"===s?"-=":"+=")+u;r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===c&&r.hide();n.effects.restore(r,h);n.effects.removeWrapper(r);i()}})}}(jQuery),function(n){n.effects.effect.explode=function(t,i){function b(){p.push(this);p.length===o*c&&k()}function k(){r.css({visibility:"visible"});n(p).remove();u||r.hide();i()}for(var e,l,a,v,y,o=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=o,r=n(this),d=n.effects.setMode(r,t.mode||"hide"),u="show"===d,w=r.show().css("visibility","hidden").offset(),s=Math.ceil(r.outerWidth()/c),h=Math.ceil(r.outerHeight()/o),p=[],f=0;o>f;f++)for(a=w.top+f*h,y=f-(o-1)/2,e=0;c>e;e++)l=w.left+e*s,v=e-(c-1)/2,r.clone().appendTo("body").wrap("<div><\/div>").css({position:"absolute",visibility:"visible",left:-e*s,top:-f*h}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:s,height:h,left:l+(u?v*s:0),top:a+(u?y*h:0),opacity:u?0:1}).animate({left:l+(u?0:v*s),top:a+(u?0:y*h),opacity:u?1:0},t.duration||500,t.easing,b)}}(jQuery),function(n){n.effects.effect.fade=function(t,i){var r=n(this),u=n.effects.setMode(r,t.mode||"toggle");r.animate({opacity:u},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),function(n){n.effects.effect.fold=function(t,i){var r,e,u=n(this),s=["position","top","bottom","left","right","height","width"],h=n.effects.setMode(u,t.mode||"hide"),o="show"===h,c="hide"===h,f=t.size||15,l=/([0-9]+)%/.exec(f),a=!!t.horizFirst,v=o!==a,y=v?["width","height"]:["height","width"],p=t.duration/2,w={},b={};n.effects.save(u,s);u.show();r=n.effects.createWrapper(u).css({overflow:"hidden"});e=v?[r.width(),r.height()]:[r.height(),r.width()];l&&(f=parseInt(l[1],10)/100*e[c?0:1]);o&&r.css(a?{height:0,width:f}:{height:f,width:0});w[y[0]]=o?e[0]:f;b[y[1]]=o?e[1]:0;r.animate(w,p,t.easing).animate(b,p,t.easing,function(){c&&u.hide();n.effects.restore(u,s);n.effects.removeWrapper(u);i()})}}(jQuery),function(n){n.effects.effect.highlight=function(t,i){var r=n(this),u=["backgroundImage","backgroundColor","opacity"],f=n.effects.setMode(r,t.mode||"show"),e={backgroundColor:r.css("backgroundColor")};"hide"===f&&(e.opacity=0);n.effects.save(r,u);r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(e,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===f&&r.hide();n.effects.restore(r,u);i()}})}}(jQuery),function(n){n.effects.effect.pulsate=function(t,i){var e,r=n(this),o=n.effects.setMode(r,t.mode||"show"),h="show"===o,a="hide"===o,v=h||"hide"===o,s=2*(t.times||5)+(v?1:0),c=t.duration/s,u=0,f=r.queue(),l=f.length;for((h||!r.is(":visible"))&&(r.css("opacity",0).show(),u=1),e=1;s>e;e++)r.animate({opacity:u},c,t.easing),u=1-u;r.animate({opacity:u},c,t.easing);r.queue(function(){a&&r.hide();i()});l>1&&f.splice.apply(f,[1,0].concat(f.splice(l,s+1)));r.dequeue()}}(jQuery),function(n){n.effects.effect.puff=function(t,i){var r=n(this),e=n.effects.setMode(r,t.mode||"hide"),o="hide"===e,s=parseInt(t.percent,10)||150,f=s/100,u={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};n.extend(t,{effect:"scale",queue:!1,fade:!0,mode:e,complete:i,percent:o?s:100,from:o?u:{height:u.height*f,width:u.width*f,outerHeight:u.outerHeight*f,outerWidth:u.outerWidth*f}});r.effect(t)};n.effects.effect.scale=function(t,i){var u=n(this),r=n.extend(!0,{},t),f=n.effects.setMode(u,t.mode||"effect"),s=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===f?0:100),h=t.direction||"both",c=t.origin,e={height:u.height(),width:u.width(),outerHeight:u.outerHeight(),outerWidth:u.outerWidth()},o={y:"horizontal"!==h?s/100:1,x:"vertical"!==h?s/100:1};r.effect="size";r.queue=!1;r.complete=i;"effect"!==f&&(r.origin=c||["middle","center"],r.restore=!0);r.from=t.from||("show"===f?{height:0,width:0,outerHeight:0,outerWidth:0}:e);r.to={height:e.height*o.y,width:e.width*o.x,outerHeight:e.outerHeight*o.y,outerWidth:e.outerWidth*o.x};r.fade&&("show"===f&&(r.from.opacity=0,r.to.opacity=1),"hide"===f&&(r.from.opacity=1,r.to.opacity=0));u.effect(r)};n.effects.effect.size=function(t,i){var f,l,u,r=n(this),w=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["width","height","overflow"],v=["fontSize"],e=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],o=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],h=n.effects.setMode(r,t.mode||"effect"),y=t.restore||"effect"!==h,c=t.scale||"both",b=t.origin||["middle","center"],k=r.css("position"),s=y?w:["position","top","bottom","left","right","overflow","opacity"],p={height:0,width:0,outerHeight:0,outerWidth:0};"show"===h&&r.show();f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};"toggle"===t.mode&&"show"===h?(r.from=t.to||p,r.to=t.from||f):(r.from=t.from||("show"===h?p:f),r.to=t.to||("hide"===h?p:f));u={from:{y:r.from.height/f.height,x:r.from.width/f.width},to:{y:r.to.height/f.height,x:r.to.width/f.width}};("box"===c||"both"===c)&&(u.from.y!==u.to.y&&(s=s.concat(e),r.from=n.effects.setTransition(r,e,u.from.y,r.from),r.to=n.effects.setTransition(r,e,u.to.y,r.to)),u.from.x!==u.to.x&&(s=s.concat(o),r.from=n.effects.setTransition(r,o,u.from.x,r.from),r.to=n.effects.setTransition(r,o,u.to.x,r.to)));("content"===c||"both"===c)&&u.from.y!==u.to.y&&(s=s.concat(v).concat(a),r.from=n.effects.setTransition(r,v,u.from.y,r.from),r.to=n.effects.setTransition(r,v,u.to.y,r.to));n.effects.save(r,s);r.show();n.effects.createWrapper(r);r.css("overflow","hidden").css(r.from);b&&(l=n.effects.getBaseline(b,f),r.from.top=(f.outerHeight-r.outerHeight())*l.y,r.from.left=(f.outerWidth-r.outerWidth())*l.x,r.to.top=(f.outerHeight-r.to.outerHeight)*l.y,r.to.left=(f.outerWidth-r.to.outerWidth)*l.x);r.css(r.from);("content"===c||"both"===c)&&(e=e.concat(["marginTop","marginBottom"]).concat(v),o=o.concat(["marginLeft","marginRight"]),a=w.concat(e).concat(o),r.find("*[width]").each(function(){var i=n(this),r={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};y&&n.effects.save(i,a);i.from={height:r.height*u.from.y,width:r.width*u.from.x,outerHeight:r.outerHeight*u.from.y,outerWidth:r.outerWidth*u.from.x};i.to={height:r.height*u.to.y,width:r.width*u.to.x,outerHeight:r.height*u.to.y,outerWidth:r.width*u.to.x};u.from.y!==u.to.y&&(i.from=n.effects.setTransition(i,e,u.from.y,i.from),i.to=n.effects.setTransition(i,e,u.to.y,i.to));u.from.x!==u.to.x&&(i.from=n.effects.setTransition(i,o,u.from.x,i.from),i.to=n.effects.setTransition(i,o,u.to.x,i.to));i.css(i.from);i.animate(i.to,t.duration,t.easing,function(){y&&n.effects.restore(i,a)})}));r.animate(r.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===r.to.opacity&&r.css("opacity",r.from.opacity);"hide"===h&&r.hide();n.effects.restore(r,s);y||("static"===k?r.css({position:"relative",top:r.to.top,left:r.to.left}):n.each(["top","left"],function(n,t){r.css(t,function(t,i){var f=parseInt(i,10),u=n?r.to.left:r.to.top;return"auto"===i?u+"px":f+u+"px"})}));n.effects.removeWrapper(r);i()}})}}(jQuery),function(n){n.effects.effect.shake=function(t,i){var o,r=n(this),v=["position","top","bottom","left","right","height","width"],k=n.effects.setMode(r,t.mode||"effect"),f=t.direction||"left",s=t.distance||20,y=t.times||3,p=2*y+1,u=Math.round(t.duration/p),h="up"===f||"down"===f?"top":"left",c="up"===f||"left"===f,l={},a={},w={},e=r.queue(),b=e.length;for(n.effects.save(r,v),r.show(),n.effects.createWrapper(r),l[h]=(c?"-=":"+=")+s,a[h]=(c?"+=":"-=")+2*s,w[h]=(c?"-=":"+=")+2*s,r.animate(l,u,t.easing),o=1;y>o;o++)r.animate(a,u,t.easing).animate(w,u,t.easing);r.animate(a,u,t.easing).animate(l,u/2,t.easing).queue(function(){"hide"===k&&r.hide();n.effects.restore(r,v);n.effects.removeWrapper(r);i()});b>1&&e.splice.apply(e,[1,0].concat(e.splice(b,p+1)));r.dequeue()}}(jQuery),function(n){n.effects.effect.slide=function(t,i){var u,r=n(this),s=["position","top","bottom","left","right","width","height"],h=n.effects.setMode(r,t.mode||"show"),c="show"===h,f=t.direction||"left",e="up"===f||"down"===f?"top":"left",o="up"===f||"left"===f,l={};n.effects.save(r,s);r.show();u=t.distance||r["top"===e?"outerHeight":"outerWidth"](!0);n.effects.createWrapper(r).css({overflow:"hidden"});c&&r.css(e,o?isNaN(u)?"-"+u:-u:u);l[e]=(c?o?"+=":"-=":o?"-=":"+=")+u;r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===h&&r.hide();n.effects.restore(r,s);n.effects.removeWrapper(r);i()}})}}(jQuery),function(n){n.effects.effect.transfer=function(t,i){var u=n(this),r=n(t.to),f="fixed"===r.css("position"),e=n("body"),o=f?e.scrollTop():0,s=f?e.scrollLeft():0,h=r.offset(),l={top:h.top-o,left:h.left-s,height:r.innerHeight(),width:r.innerWidth()},c=u.offset(),a=n("<div class='ui-effects-transfer'><\/div>").appendTo(document.body).addClass(t.className).css({top:c.top-o,left:c.left-s,height:u.innerHeight(),width:u.innerWidth(),position:f?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){a.remove();i()})}}(jQuery),function(n){n.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,n.proxy(function(n){this.options.disabled&&n.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item > a":function(n){n.preventDefault()},"click .ui-state-disabled > a":function(n){n.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=n(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=n(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(n,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(n,i)},blur:function(t){this._delay(function(){n.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(t){n(t.target).closest(".ui-menu").length||this.collapseAll(t);this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=n(this);t.data("ui-menu-submenu-carat")&&t.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function o(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,f,r,e,u,s=!0;switch(t.keyCode){case n.ui.keyCode.PAGE_UP:this.previousPage(t);break;case n.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case n.ui.keyCode.HOME:this._move("first","first",t);break;case n.ui.keyCode.END:this._move("last","last",t);break;case n.ui.keyCode.UP:this.previous(t);break;case n.ui.keyCode.DOWN:this.next(t);break;case n.ui.keyCode.LEFT:this.collapse(t);break;case n.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case n.ui.keyCode.ENTER:case n.ui.keyCode.SPACE:this._activate(t);break;case n.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=!1;f=this.previousFilter||"";r=String.fromCharCode(t.keyCode);e=!1;clearTimeout(this.filterTimer);r===f?e=!0:r=f+r;u=RegExp("^"+o(r),"i");i=this.activeMenu.children(".ui-menu-item").filter(function(){return u.test(n(this).children("a").text())});i=e&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i;i.length||(r=String.fromCharCode(t.keyCode),u=RegExp("^"+o(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return u.test(n(this).children("a").text())}));i.length?(this.focus(t,i),i.length>1?(this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}s&&t.preventDefault()},_activate:function(n){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(n):this.select(n))},refresh:function(){var t,r=this.options.icons.submenu,i=this.element.find(this.options.menus);i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=n(this),i=t.prev("a"),u=n("<span>").addClass("ui-menu-icon ui-icon "+r).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(u);t.attr("aria-labelledby",i.attr("id"))});t=i.add(this.element);t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});t.children(":not(.ui-menu-item)").each(function(){var t=n(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")});t.children(".ui-state-disabled").attr("aria-disabled","true");this.active&&!n.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(n,t){"icons"===n&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu);this._super(n,t)},focus:function(n,t){var i,r;this.blur(n,n&&"focus"===n.type);this._scrollIntoView(t);this.active=t.first();r=this.active.children("a").addClass("ui-state-focus");this.options.role&&this.element.attr("aria-activedescendant",r.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");n&&"keydown"===n.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);i=t.children(".ui-menu");i.length&&/^mouse/.test(n.type)&&this._startOpening(i);this.activeMenu=t.parent();this._trigger("focus",n,{item:t})},_scrollIntoView:function(t){var e,o,i,r,u,f;this._hasScroll()&&(e=parseFloat(n.css(this.activeMenu[0],"borderTopWidth"))||0,o=parseFloat(n.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-e-o,r=this.activeMenu.scrollTop(),u=this.activeMenu.height(),f=t.height(),0>i?this.activeMenu.scrollTop(r+i):i+f>u&&this.activeMenu.scrollTop(r+i-u+f))},blur:function(n,t){t||clearTimeout(this.timer);this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",n,{item:this.active}))},_startOpening:function(n){clearTimeout(this.timer);"true"===n.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(n)},this.delay))},_open:function(t){var i=n.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true");t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer);this.timer=this._delay(function(){var r=i?this.element:n(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element);this._close(r);this.blur(t);this.activeMenu=r},this.delay)},_close:function(n){n||(n=this.active?this.active.parent():this.element);n.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(n){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(n,t))},expand:function(n){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(n,t)}))},next:function(n){this._move("next","first",n)},previous:function(n){this._move("prev","last",n)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(n,t,i){var r;this.active&&(r="first"===n||"last"===n?this.active["first"===n?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[n+"All"](".ui-menu-item").eq(0));r&&r.length&&this.active||(r=this.activeMenu.children(".ui-menu-item")[t]());this.focus(i,r)},nextPage:function(t){var i,r,u;return this.active?(this.isLastItem()||(this._hasScroll()?(r=this.active.offset().top,u=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=n(this),0>i.offset().top-r-u}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(t),undefined)},previousPage:function(t){var i,r,u;return this.active?(this.isFirstItem()||(this._hasScroll()?(r=this.active.offset().top,u=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=n(this),i.offset().top-r+u>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(t),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||n(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0);this._trigger("select",t,i)}})}(jQuery),function(n,t){function e(n,t,i){return[parseFloat(n[0])*(a.test(n[0])?t/100:1),parseFloat(n[1])*(a.test(n[1])?i/100:1)]}function r(t,i){return parseInt(n.css(t,i),10)||0}function v(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:n.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}n.ui=n.ui||{};var f,u=Math.max,i=Math.abs,o=Math.round,s=/left|center|right/,h=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,a=/%$/,y=n.fn.position;n.position={scrollbarWidth:function(){if(f!==t)return f;var u,r,i=n("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'><\/div><\/div>"),e=i.children()[0];return n("body").append(i),u=e.offsetWidth,i.css("overflow","scroll"),r=e.offsetWidth,u===r&&(r=i[0].clientWidth),i.remove(),f=u-r},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),u="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,f="scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight;return{width:f?n.position.scrollbarWidth():0,height:u?n.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=n(t||window),r=n.isWindow(i[0]);return{element:i,isWindow:r,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:r?i.width():i.outerWidth(),height:r?i.height():i.outerHeight()}}};n.fn.position=function(t){if(!t||!t.of)return y.apply(this,arguments);t=n.extend({},t);var b,f,a,w,p,d,g=n(t.of),tt=n.position.getWithinInfo(t.within),it=n.position.getScrollInfo(tt),k=(t.collision||"flip").split(" "),nt={};return d=v(g),g[0].preventDefault&&(t.at="left top"),f=d.width,a=d.height,w=d.offset,p=n.extend({},w),n.each(["my","at"],function(){var i,r,n=(t[this]||"").split(" ");1===n.length&&(n=s.test(n[0])?n.concat(["center"]):h.test(n[0])?["center"].concat(n):["center","center"]);n[0]=s.test(n[0])?n[0]:"center";n[1]=h.test(n[1])?n[1]:"center";i=c.exec(n[0]);r=c.exec(n[1]);nt[this]=[i?i[0]:0,r?r[0]:0];t[this]=[l.exec(n[0])[0],l.exec(n[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===t.at[0]?p.left+=f:"center"===t.at[0]&&(p.left+=f/2),"bottom"===t.at[1]?p.top+=a:"center"===t.at[1]&&(p.top+=a/2),b=e(nt.at,f,a),p.left+=b[0],p.top+=b[1],this.each(function(){var y,d,h=n(this),c=h.outerWidth(),l=h.outerHeight(),rt=r(this,"marginLeft"),ut=r(this,"marginTop"),ft=c+rt+r(this,"marginRight")+it.width,et=l+ut+r(this,"marginBottom")+it.height,s=n.extend({},p),v=e(nt.my,h.outerWidth(),h.outerHeight());"right"===t.my[0]?s.left-=c:"center"===t.my[0]&&(s.left-=c/2);"bottom"===t.my[1]?s.top-=l:"center"===t.my[1]&&(s.top-=l/2);s.left+=v[0];s.top+=v[1];n.support.offsetFractions||(s.left=o(s.left),s.top=o(s.top));y={marginLeft:rt,marginTop:ut};n.each(["left","top"],function(i,r){n.ui.position[k[i]]&&n.ui.position[k[i]][r](s,{targetWidth:f,targetHeight:a,elemWidth:c,elemHeight:l,collisionPosition:y,collisionWidth:ft,collisionHeight:et,offset:[b[0]+v[0],b[1]+v[1]],my:t.my,at:t.at,within:tt,elem:h})});t.using&&(d=function(n){var r=w.left-s.left,v=r+f-c,e=w.top-s.top,y=e+a-l,o={target:{element:g,left:w.left,top:w.top,width:f,height:a},element:{element:h,left:s.left,top:s.top,width:c,height:l},horizontal:0>v?"left":r>0?"right":"center",vertical:0>y?"top":e>0?"bottom":"middle"};c>f&&f>i(r+v)&&(o.horizontal="center");l>a&&a>i(e+y)&&(o.vertical="middle");o.important=u(i(r),i(v))>u(i(e),i(y))?"horizontal":"vertical";t.using.call(this,n,o)});h.offset(n.extend(s,{using:d}))})};n.ui.position={fit:{left:function(n,t){var h,e=t.within,r=e.isWindow?e.scrollLeft:e.offset.left,o=e.width,s=n.left-t.collisionPosition.marginLeft,i=r-s,f=s+t.collisionWidth-o-r;t.collisionWidth>o?i>0&&0>=f?(h=n.left+i+t.collisionWidth-o-r,n.left+=i-h):n.left=f>0&&0>=i?r:i>f?r+o-t.collisionWidth:r:i>0?n.left+=i:f>0?n.left-=f:n.left=u(n.left-s,n.left)},top:function(n,t){var h,o=t.within,r=o.isWindow?o.scrollTop:o.offset.top,e=t.within.height,s=n.top-t.collisionPosition.marginTop,i=r-s,f=s+t.collisionHeight-e-r;t.collisionHeight>e?i>0&&0>=f?(h=n.top+i+t.collisionHeight-e-r,n.top+=i-h):n.top=f>0&&0>=i?r:i>f?r+e-t.collisionHeight:r:i>0?n.top+=i:f>0?n.top-=f:n.top=u(n.top-s,n.top)}},flip:{left:function(n,t){var o,s,r=t.within,y=r.offset.left+r.scrollLeft,c=r.width,h=r.isWindow?r.scrollLeft:r.offset.left,l=n.left-t.collisionPosition.marginLeft,a=l-h,v=l+t.collisionWidth-c-h,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,e=-2*t.offset[0];0>a?(o=n.left+u+f+e+t.collisionWidth-c-y,(0>o||i(a)>o)&&(n.left+=u+f+e)):v>0&&(s=n.left-t.collisionPosition.marginLeft+u+f+e-h,(s>0||v>i(s))&&(n.left+=u+f+e))},top:function(n,t){var o,s,r=t.within,y=r.offset.top+r.scrollTop,a=r.height,h=r.isWindow?r.scrollTop:r.offset.top,v=n.top-t.collisionPosition.marginTop,c=v-h,l=v+t.collisionHeight-a-h,p="top"===t.my[1],u=p?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,e=-2*t.offset[1];0>c?(s=n.top+u+f+e+t.collisionHeight-a-y,n.top+u+f+e>c&&(0>s||i(c)>s)&&(n.top+=u+f+e)):l>0&&(o=n.top-t.collisionPosition.marginTop+u+f+e-h,n.top+u+f+e>l&&(o>0||l>i(o))&&(n.top+=u+f+e))}},flipfit:{left:function(){n.ui.position.flip.left.apply(this,arguments);n.ui.position.fit.left.apply(this,arguments)},top:function(){n.ui.position.flip.top.apply(this,arguments);n.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,r,u,f,e=document.getElementsByTagName("body")[0],o=document.createElement("div");t=document.createElement(e?"div":"body");r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};e&&n.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in r)t.style[f]=r[f];t.appendChild(o);i=e||document.documentElement;i.insertBefore(t,i.firstChild);o.style.cssText="position: absolute; left: 10.7432222px;";u=n(o).offset().left;n.support.offsetFractions=u>10&&11>u;t.innerHTML="";i.removeChild(t)}()}(jQuery),function(n,t){n.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min});this.valueDiv=n("<div class='ui-progressbar-value ui-widget-header ui-corner-left'><\/div>").appendTo(this.element);this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove()},value:function(n){return n===t?this.options.value:(this.options.value=this._constrainedValue(n),this._refreshValue(),t)},_constrainedValue:function(n){return n===t&&(n=this.options.value),this.indeterminate=n===!1,"number"!=typeof n&&(n=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,n))},_setOptions:function(n){var t=n.value;delete n.value;this._super(n);this.options.value=this._constrainedValue(t);this._refreshValue()},_setOption:function(n,t){"max"===n&&(t=Math.max(this.min,t));this._super(n,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%");this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate);this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=n("<div class='ui-progressbar-overlay'><\/div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null));this.oldValue!==t&&(this.oldValue=t,this._trigger("change"));t===this.options.max&&this._trigger("complete")}})}(jQuery),function(n){var t=5;n.widget("ui.slider",n.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1;this._mouseSliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=!1},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var r,i,u=this.options,t=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f=[];for(i=u.values&&u.values.length||1,t.length>i&&(t.slice(i).remove(),t=t.slice(0,i)),r=t.length;i>r;r++)f.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'><\/a>");this.handles=t.add(n(f.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(t){n(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:n.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=n("<div><\/div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=n([])},_setupEvents:function(){var n=this.handles.add(this.range).filter("a");this._off(n);this._on(n,this._handleEvents);this._hoverable(n);this._focusable(n)},_destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all");this._mouseDestroy()},_mouseCapture:function(t){var s,f,r,i,u,h,e,c,o=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),s={x:t.pageX,y:t.pageY},f=this._normValueFromMouse(s),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(f-o.values(t));(r>e||r===e&&(t===o._lastChangedValue||o.values(t)===l.min))&&(r=e,i=n(this),u=t)}),h=this._start(t,u),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=u,i.addClass("ui-state-active").focus(),e=i.offset(),c=!n(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-e.left-i.width()/2,top:t.pageY-e.top-i.height()/2-(parseInt(i.css("borderTopWidth"),10)||0)-(parseInt(i.css("borderBottomWidth"),10)||0)+(parseInt(i.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,u,f),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(n){var t={x:n.pageX,y:n.pageY},i=this._normValueFromMouse(t);return this._slide(n,this._handleIndex,i),!1},_mouseStop:function(n){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(n,this._handleIndex),this._change(n,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(n){var i,r,t,u,f;return"horizontal"===this.orientation?(i=this.elementSize.width,r=n.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(i=this.elementSize.height,r=n.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),t=r/i,t>1&&(t=1),0>t&&(t=0),"vertical"===this.orientation&&(t=1-t),u=this._valueMax()-this._valueMin(),f=this._valueMin()+t*u,this._trimAlignValue(f)},_start:function(n,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",n,i)},_slide:function(n,t,i){var r,f,u;this.options.values&&this.options.values.length?(r=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>r||1===t&&r>i)&&(i=r),i!==this.values(t)&&(f=this.values(),f[t]=i,u=this._trigger("slide",n,{handle:this.handles[t],value:i,values:f}),r=this.values(t?0:1),u!==!1&&this.values(t,i,!0))):i!==this.value()&&(u=this._trigger("slide",n,{handle:this.handles[t],value:i}),u!==!1&&this.value(i))},_stop:function(n,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values());this._trigger("stop",n,i)},_change:function(n,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values());this._lastChangedValue=t;this._trigger("change",n,i)}},value:function(n){return arguments.length?(this.options.value=this._trimAlignValue(n),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(t,i){var u,f,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),undefined;if(!arguments.length)return this._values();if(!n.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(u=this.options.values,f=arguments[0],r=0;u.length>r;r+=1)u[r]=this._trimAlignValue(f[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,i){var r,u=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),n.isArray(this.options.values)&&(u=this.options.values.length),n.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=0;u>r;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0;this._refreshValue();this._animateOff=!1;break;case"range":this._animateOff=!0;this._refresh();this._animateOff=!1}},_value:function(){var n=this.options.value;return this._trimAlignValue(n)},_values:function(n){var r,t,i;if(arguments.length)return r=this.options.values[n],r=this._trimAlignValue(r);if(this.options.values&&this.options.values.length){for(t=this.options.values.slice(),i=0;t.length>i;i+=1)t[i]=this._trimAlignValue(t[i]);return t}return[]},_trimAlignValue:function(n){if(this._valueMin()>=n)return this._valueMin();if(n>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(n-this._valueMin())%t,r=n-i;return 2*Math.abs(i)>=t&&(r+=i>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var s,t,c,f,h,e=this.options.range,i=this.options,r=this,u=this._animateOff?!1:i.animate,o={};this.options.values&&this.options.values.length?this.handles.each(function(f){t=100*((r.values(f)-r._valueMin())/(r._valueMax()-r._valueMin()));o["horizontal"===r.orientation?"left":"bottom"]=t+"%";n(this).stop(1,1)[u?"animate":"css"](o,i.animate);r.options.range===!0&&("horizontal"===r.orientation?(0===f&&r.range.stop(1,1)[u?"animate":"css"]({left:t+"%"},i.animate),1===f&&r.range[u?"animate":"css"]({width:t-s+"%"},{queue:!1,duration:i.animate})):(0===f&&r.range.stop(1,1)[u?"animate":"css"]({bottom:t+"%"},i.animate),1===f&&r.range[u?"animate":"css"]({height:t-s+"%"},{queue:!1,duration:i.animate})));s=t}):(c=this.value(),f=this._valueMin(),h=this._valueMax(),t=h!==f?100*((c-f)/(h-f)):0,o["horizontal"===this.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[u?"animate":"css"](o,i.animate),"min"===e&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:t+"%"},i.animate),"max"===e&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:i.animate}),"min"===e&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:t+"%"},i.animate),"max"===e&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:i.animate}))},_handleEvents:{keydown:function(i){var o,u,r,f,e=n(i.target).data("ui-slider-handle-index");switch(i.keyCode){case n.ui.keyCode.HOME:case n.ui.keyCode.END:case n.ui.keyCode.PAGE_UP:case n.ui.keyCode.PAGE_DOWN:case n.ui.keyCode.UP:case n.ui.keyCode.RIGHT:case n.ui.keyCode.DOWN:case n.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,n(i.target).addClass("ui-state-active"),o=this._start(i,e),o===!1))return}switch(f=this.options.step,u=r=this.options.values&&this.options.values.length?this.values(e):this.value(),i.keyCode){case n.ui.keyCode.HOME:r=this._valueMin();break;case n.ui.keyCode.END:r=this._valueMax();break;case n.ui.keyCode.PAGE_UP:r=this._trimAlignValue(u+(this._valueMax()-this._valueMin())/t);break;case n.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(u-(this._valueMax()-this._valueMin())/t);break;case n.ui.keyCode.UP:case n.ui.keyCode.RIGHT:if(u===this._valueMax())return;r=this._trimAlignValue(u+f);break;case n.ui.keyCode.DOWN:case n.ui.keyCode.LEFT:if(u===this._valueMin())return;r=this._trimAlignValue(u-f)}this._slide(i,e,r)},click:function(n){n.preventDefault()},keyup:function(t){var i=n(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),n(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(n){function t(n){return function(){var t=this.element.val();n.apply(this,arguments);this._refresh();t!==this.element.val()&&this._trigger("change")}}n.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return n.each(["min","max","step"],function(n,r){var u=i.attr(r);void 0!==u&&u.length&&(t[r]=u)}),t},_events:{keydown:function(n){this._start(n)&&this._keydown(n)&&n.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(n){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",n),void 0)},mousewheel:function(n,t){if(t){if(!this.spinning&&!this._start(n))return!1;this._spin((t>0?1:-1)*this.options.step,n);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(n)},100);n.preventDefault()}},"mousedown .ui-spinner-button":function(t){function r(){var n=this.element[0]===this.document[0].activeElement;n||(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i}))}var i;i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();t.preventDefault();r.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;r.call(this)});this._start(t)!==!1&&this._repeat(null,n(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(n(t.currentTarget).hasClass("ui-state-active"))return this._start(t)===!1?!1:(this._repeat(null,n(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var n=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=n.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(.5*n.height())&&n.height()>0&&n.height(n.height());this.options.disabled&&this.disable()},_keydown:function(t){var r=this.options,i=n.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,r.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-r.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'><\/span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;<\/span><\/a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;<\/span><\/a>"},_start:function(n){return this.spinning||this._trigger("start",n)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(n,t,i){n=n||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,t,i)},n);this._spin(t*this.options.step,i)},_spin:function(n,t){var i=this.value()||0;this.counter||(this.counter=1);i=this._adjustValue(i+n*this._increment(this.counter));this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?n.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var n=this._precisionOf(this.options.step);return null!==this.options.min&&(n=Math.max(n,this._precisionOf(this.options.min))),n},_precisionOf:function(n){var t=""+n,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(n){var r,i,t=this.options;return r=null!==t.min?t.min:0,i=n-r,i=Math.round(i/t.step)*t.step,n=r+i,n=parseFloat(n.toFixed(this._precision())),null!==t.max&&n>t.max?t.max:null!==t.min&&t.min>n?t.min:n},_stop:function(n){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",n))},_setOption:function(n,t){if("culture"===n||"numberFormat"===n){var i=this._parse(this.element.val());return this.options[n]=t,this.element.val(this._format(i)),void 0}("max"===n||"min"===n||"step"===n)&&"string"==typeof t&&(t=this._parse(t));"icons"===n&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down));this._super(n,t);"disabled"===n&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(n){this._super(n);this._value(this.element.val())}),_parse:function(n){return"string"==typeof n&&""!==n&&(n=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(n,10,this.options.culture):+n),""===n||isNaN(n)?null:n},_format:function(n){return""===n?"":window.Globalize&&this.options.numberFormat?Globalize.format(n,this.options.numberFormat,this.options.culture):n},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(n,t){var i;""!==n&&(i=this._parse(n),null!==i&&(t||(i=this._adjustValue(i)),n=this._format(i)));this.element.val(n);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:t(function(n){this._stepUp(n)}),_stepUp:function(n){this._start()&&(this._spin((n||1)*this.options.step),this._stop())},stepDown:t(function(n){this._stepDown(n)}),_stepDown:function(n){this._start()&&(this._spin((n||1)*-this.options.step),this._stop())},pageUp:t(function(n){this._stepUp((n||1)*this.options.page)}),pageDown:t(function(n){this._stepDown((n||1)*this.options.page)}),value:function(n){return arguments.length?(t(this._value).call(this,n),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(n,t){function u(){return++f}function i(n){return n.hash.length>1&&decodeURIComponent(n.href.replace(r,""))===decodeURIComponent(location.href.replace(r,""))}var f=0,r=/#.*$/;n.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var i=this,t=this.options;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",t.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){n(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){n(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();t.active=this._initialActive();n.isArray(t.disabled)&&(t.disabled=n.unique(t.disabled.concat(n.map(this.tabs.filter(".ui-state-disabled"),function(n){return i.tabs.index(n)}))).sort());this.active=this.options.active!==!1&&this.anchors.length?this._findActive(t.active):n();this._refresh();this.active.length&&this.load(t.active)},_initialActive:function(){var i=this.options.active,r=this.options.collapsible,u=location.hash.substring(1);return null===i&&(u&&this.tabs.each(function(r,f){return n(f).attr("aria-controls")===u?(i=r,!1):t}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=this.tabs.length?0:!1)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=r?!1:0)),!r&&i===!1&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):n()}},_tabKeydown:function(i){var u=n(this.document[0].activeElement).closest("li"),r=this.tabs.index(u),f=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case n.ui.keyCode.RIGHT:case n.ui.keyCode.DOWN:r++;break;case n.ui.keyCode.UP:case n.ui.keyCode.LEFT:f=!1;r--;break;case n.ui.keyCode.END:r=this.anchors.length-1;break;case n.ui.keyCode.HOME:r=0;break;case n.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(r),t;case n.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r),t;default:return}i.preventDefault();clearTimeout(this.activating);r=this._focusNextTab(r,f);i.ctrlKey||(u.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===n.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===n.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===n.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):t},_findNextTab:function(t,i){function u(){return t>r&&(t=0),0>t&&(t=r),t}for(var r=this.tabs.length-1;-1!==n.inArray(u(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(n,t){return n=this._findNextTab(n,t),this.tabs.eq(n).focus(),n},_setOption:function(n,i){return"active"===n?(this._activate(i),t):"disabled"===n?(this._setupDisabled(i),t):(this._super(n,i),"collapsible"===n&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===n&&this._setupEvents(i),"heightStyle"===n&&this._setupHeightStyle(i),t)},_tabId:function(n){return n.attr("aria-controls")||"ui-tabs-"+u()},_sanitizeSelector:function(n){return n?n.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=n.map(i.filter(".ui-state-disabled"),function(n){return i.index(n)});this._processTabs();t.active!==!1&&this.anchors.length?this.active.length&&!n.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=n()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=n());this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return n("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=n();this.anchors.each(function(r,u){var e,f,s,h=n(u).uniqueId().attr("id"),o=n(u).closest("li"),c=o.attr("aria-controls");i(u)?(e=u.hash,f=t.element.find(t._sanitizeSelector(e))):(s=t._tabId(o),e="#"+s,f=t.element.find(e),f.length||(f=t._createPanel(s),f.insertAfter(t.panels[r-1]||t.tablist)),f.attr("aria-live","polite"));f.length&&(t.panels=t.panels.add(f));c&&o.data("ui-tabs-aria-controls",c);o.attr({"aria-controls":e.substring(1),"aria-labelledby":h});f.attr("aria-labelledby",h)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return n("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){n.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,r=0;i=this.tabs[r];r++)t===!0||-1!==n.inArray(r,t)?n(i).addClass("ui-state-disabled").attr("aria-disabled","true"):n(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(n){n.preventDefault()}};t&&n.each(t.split(" "),function(n,t){i[t]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,i);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,r=this.element.parent();"fill"===t?(i=r.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=n(this),r=t.css("position");"absolute"!==r&&"fixed"!==r&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=n(this).outerHeight(!0)}),this.panels.each(function(){n(this).height(Math.max(0,i-n(this).innerHeight()+n(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,n(this).height("").height())}).height(i))},_eventHandler:function(t){var u=this.options,r=this.active,c=n(t.currentTarget),i=c.closest("li"),f=i[0]===r[0],e=f&&u.collapsible,o=e?n():this._getPanelForTab(i),s=r.length?this._getPanelForTab(r):n(),h={oldTab:r,oldPanel:s,newTab:e?n():i,newPanel:o};t.preventDefault();i.hasClass("ui-state-disabled")||i.hasClass("ui-tabs-loading")||this.running||f&&!u.collapsible||this._trigger("beforeActivate",t,h)===!1||(u.active=e?!1:this.tabs.index(i),this.active=f?n():i,this.xhr&&this.xhr.abort(),s.length||o.length||n.error("jQuery UI Tabs: Mismatching fragment identifier."),o.length&&this.load(this.tabs.index(i),t),this._toggle(t,h))},_toggle:function(t,i){function e(){u.running=!1;u._trigger("activate",t,i)}function o(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active");r.length&&u.options.show?u._show(r,u.options.show,e):(r.show(),e())}var u=this,r=i.newPanel,f=i.oldPanel;this.running=!0;f.length&&this.options.hide?this._hide(f,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");o()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),f.hide(),o());f.attr({"aria-expanded":"false","aria-hidden":"true"});i.oldTab.attr("aria-selected","false");r.length&&f.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return 0===n(this).attr("tabIndex")}).attr("tabIndex",-1);r.attr({"aria-expanded":"true","aria-hidden":"false"});i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var r,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),r=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:r,currentTarget:r,preventDefault:n.noop}))},_findActive:function(t){return t===!1?n():this.tabs.eq(t)},_getIndex:function(n){return"string"==typeof n&&(n=this.anchors.index(this.anchors.filter("[href$='"+n+"']"))),n},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){n.data(this,"ui-tabs-destroy")?n(this).remove():n(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var t=n(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var r=this.options.disabled;r!==!1&&(i===t?r=!1:(i=this._getIndex(i),r=n.isArray(r)?n.map(r,function(n){return n!==i?n:null}):n.map(this.tabs,function(n,t){return t!==i?t:null})),this._setupDisabled(r))},disable:function(i){var r=this.options.disabled;if(r!==!0){if(i===t)r=!0;else{if(i=this._getIndex(i),-1!==n.inArray(i,r))return;r=n.isArray(r)?n.merge([i],r).sort():[i]}this._setupDisabled(r)}},load:function(t,r){t=this._getIndex(t);var f=this,u=this.tabs.eq(t),o=u.find(".ui-tabs-anchor"),e=this._getPanelForTab(u),s={tab:u,panel:e};i(o[0])||(this.xhr=n.ajax(this._ajaxSettings(o,r,s)),this.xhr&&"canceled"!==this.xhr.statusText&&(u.addClass("ui-tabs-loading"),e.attr("aria-busy","true"),this.xhr.success(function(n){setTimeout(function(){e.html(n);f._trigger("load",r,s)},1)}).complete(function(n,t){setTimeout(function(){"abort"===t&&f.panels.stop(!1,!0);u.removeClass("ui-tabs-loading");e.removeAttr("aria-busy");n===f.xhr&&delete f.xhr},1)})))},_ajaxSettings:function(t,i,r){var u=this;return{url:t.attr("href"),beforeSend:function(t,f){return u._trigger("beforeLoad",i,n.extend({jqXHR:t,ajaxSettings:f},r))}}},_getPanelForTab:function(t){var i=n(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(n){function t(t,i){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(i);t.data("ui-tooltip-id",i).attr("aria-describedby",n.trim(r.join(" ")))}function i(t){var u=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),r=n.inArray(u,i);-1!==r&&i.splice(r,1);t.removeData("ui-tooltip-id");i=n.trim(i.join(" "));i?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")}var r=0;n.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var t=n(this).attr("title")||"";return n("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable()},_setOption:function(t,i){var r=this;return"disabled"===t?(this[i?"_disable":"_enable"](),this.options[t]=i,void 0):(this._super(t,i),"content"===t&&n.each(this.tooltips,function(n,t){r._updateContent(t)}),void 0)},_disable:function(){var t=this;n.each(this.tooltips,function(i,r){var u=n.Event("blur");u.target=u.currentTarget=r[0];t.close(u,!0)});this.element.find(this.options.items).addBack().each(function(){var t=n(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=n(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var r=this,i=n(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each(function(){var i,t=n(this);t.data("ui-tooltip-open")&&(i=n.Event("blur"),i.target=i.currentTarget=this,r.close(i,!0));t.attr("title")&&(t.uniqueId(),r.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._updateContent(i,t))},_updateContent:function(n,t){var i,r=this.options.content,u=this,f=t?t.type:null;return"string"==typeof r?this._open(t,n,r):(i=r.call(n[0],function(i){n.data("ui-tooltip-open")&&u._delay(function(){t&&(t.type=f);this._open(t,n,i)})}),i&&this._open(t,n,i),void 0)},_open:function(i,r,u){function o(n){s.of=n;f.is(":hidden")||f.position(s)}var f,e,h,s=n.extend({},this.options.position);if(u){if(f=this._find(r),f.length)return f.find(".ui-tooltip-content").html(u),void 0;r.is("[title]")&&(i&&"mouseover"===i.type?r.attr("title",""):r.removeAttr("title"));f=this._tooltip(r);t(r,f.attr("id"));f.find(".ui-tooltip-content").html(u);this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):f.position(n.extend({of:r},this.options.position));f.hide();this._show(f,this.options.show);this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){f.is(":visible")&&(o(s.of),clearInterval(h))},n.fx.interval));this._trigger("open",i,{tooltip:f});e={keyup:function(t){if(t.keyCode===n.ui.keyCode.ESCAPE){var i=n.Event(t);i.currentTarget=r[0];this.close(i,!0)}},remove:function(){this._removeTooltip(f)}};i&&"mouseover"!==i.type||(e.mouseleave="close");i&&"focusin"!==i.type||(e.focusout="close");this._on(!0,r,e)}},close:function(t){var f=this,r=n(t?t.currentTarget:this.element),u=this._find(r);this.closing||(clearInterval(this.delayedShow),r.data("ui-tooltip-title")&&r.attr("title",r.data("ui-tooltip-title")),i(r),u.stop(!0),this._hide(u,this.options.hide,function(){f._removeTooltip(n(this))}),r.removeData("ui-tooltip-open"),this._off(r,"mouseleave focusout keyup"),r[0]!==this.element[0]&&this._off(r,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&n.each(this.parents,function(t,i){n(i.element).attr("title",i.title);delete f.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:u}),this.closing=!1)},_tooltip:function(t){var u="ui-tooltip-"+r++,i=n("<div>").attr({id:u,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return n("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[u]=t,i},_find:function(t){var i=t.data("ui-tooltip-id");return i?n("#"+i):n()},_removeTooltip:function(n){n.remove();delete this.tooltips[n.attr("id")]},_destroy:function(){var t=this;n.each(this.tooltips,function(i,r){var u=n.Event("blur");u.target=u.currentTarget=r[0];t.close(u,!0);n("#"+i).remove();r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})}(jQuery),function(n){n.extend(n.fn,{validate:function(t){if(this.length){var i=n.data(this[0],"validator");return i?i:(i=new n.validator(t,this[0]),n.data(this[0],"validator",i),i.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){i.cancelSubmit=!0}),i.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){i.submitButton=this}),this.submit(function(t){function r(){if(i.settings.submitHandler){if(i.submitButton)var t=n("<input type='hidden'/>").attr("name",i.submitButton.name).val(i.submitButton.value).appendTo(i.currentForm);return i.settings.submitHandler.call(i,i.currentForm),i.submitButton&&t.remove(),!1}return!0}return(i.settings.debug&&t.preventDefault(),i.cancelSubmit)?(i.cancelSubmit=!1,r()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):r():(i.focusInvalid(),!1)})),i)}t&&t.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(n(this[0]).is("form"))return this.validate().form();var t=!0,i=n(this[0].form).validate();return this.each(function(){t&=i.element(this)}),t},removeAttrs:function(t){var i={},r=this;return n.each(t.split(/\s/),function(n,t){i[t]=r.attr(t);r.removeAttr(t)}),i},rules:function(t,i){var r=this[0],e;if(t){var u=n.data(r.form,"validator").settings,o=u.rules,f=n.validator.staticRules(r);switch(t){case"add":n.extend(f,n.validator.normalizeRule(i));o[r.name]=f;i.messages&&(u.messages[r.name]=n.extend(u.messages[r.name],i.messages));break;case"remove":return i?(e={},n.each(i.split(/\s/),function(n,t){e[t]=f[t];delete f[t]}),e):(delete o[r.name],f)}}return r=n.validator.normalizeRules(n.extend({},n.validator.metadataRules(r),n.validator.classRules(r),n.validator.attributeRules(r),n.validator.staticRules(r)),r),r.required&&(u=r.required,delete r.required,r=n.extend({required:u},r)),r}});n.extend(n.expr[":"],{blank:function(t){return!n.trim(""+t.value)},filled:function(t){return!!n.trim(""+t.value)},unchecked:function(n){return!n.checked}});n.validator=function(t,i){this.settings=n.extend(!0,{},n.validator.defaults,t);this.currentForm=i;this.init()};n.validator.format=function(t,i){return arguments.length==1?function(){var i=n.makeArray(arguments);return i.unshift(t),n.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!=Array&&(i=n.makeArray(arguments).slice(1)),i.constructor!=Array&&(i=[i]),n.each(i,function(n,i){t=t.replace(RegExp("\\{"+n+"\\}","g"),i)}),t)};n.extend(n.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:n([]),errorLabelContainer:n([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(n){this.lastActive=n;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,n,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(n)).hide())},onfocusout:function(n){!this.checkable(n)&&(n.name in this.submitted||!this.optional(n))&&this.element(n)},onkeyup:function(n){(n.name in this.submitted||n==this.lastElement)&&this.element(n)},onclick:function(n){n.name in this.submitted?this.element(n):n.parentNode.name in this.submitted&&this.element(n.parentNode)},highlight:function(t,i,r){n(t).addClass(i).removeClass(r)},unhighlight:function(t,i,r){n(t).removeClass(i).addClass(r)}},setDefaults:function(t){n.extend(n.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:n.validator.format("Please enter no more than {0} characters."),minlength:n.validator.format("Please enter at least {0} characters."),rangelength:n.validator.format("Please enter a value between {0} and {1} characters long."),range:n.validator.format("Please enter a value between {0} and {1}."),max:n.validator.format("Please enter a value less than or equal to {0}."),min:n.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function i(t){var i=n.data(this[0].form,"validator");t="on"+t.type.replace(/^validate/,"");i.settings[t]&&i.settings[t].call(i,this[0])}var r,t;this.labelContainer=n(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||n(this.currentForm);this.containers=n(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();r=this.groups={};n.each(this.settings.groups,function(t,i){n.each(i.split(/\s/),function(n,i){r[i]=t})});t=this.settings.rules;n.each(t,function(i,r){t[i]=n.validator.normalizeRule(r)});n(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",i).validateDelegate(":radio, :checkbox, select, option","click",i);this.settings.invalidHandler&&n(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),n.extend(this.submitted,this.errorMap),this.invalid=n.extend({},this.errorMap),this.valid()||n(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var n=0,t=this.currentElements=this.elements();t[n];n++)this.check(t[n]);return this.valid()},element:function(t){this.lastElement=t=this.clean(t);this.prepareElement(t);this.currentElements=n(t);var i=this.check(t);return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){n.extend(this.errorMap,t);this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=n.grep(this.successList,function(n){return!(n.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){n.fn.resetForm&&n(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(n){var t=0,i;for(i in n)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{n(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&n.grep(this.errorList,function(n){return n.element.name==t.name}).length==1&&t},elements:function(){var t=this,i={};return n([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return(!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(n(this).rules()))?!1:i[this.name]=!0})},clean:function(t){return n(t)[0]},errors:function(){return n(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=n([]);this.toHide=n([]);this.currentElements=n([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(n){this.reset();this.toHide=this.errorsFor(n)},check:function(t){var i,r,u,f,e;t=this.clean(t);this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]);i=n(t).rules();r=!1;for(u in i){f={method:u,parameters:i[u]};try{if(e=n.validator.methods[u].call(this,t.value.replace(/\r/g,""),t,f.parameters),e=="dependency-mismatch")r=!0;else{if(r=!1,e=="pending"){this.toHide=this.toHide.not(this.errorsFor(t));return}if(!e)return this.formatAndAdd(t,f),!1}}catch(o){this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+f.method+"' method",o);throw o;}}if(!r)return this.objectLength(i)&&this.successList.push(t),!0},customMetaMessage:function(t,i){if(n.metadata){var r=this.settings.meta?n(t).metadata()[this.settings.meta]:n(t).metadata();return r&&r.messages&&r.messages[i]}},customMessage:function(n,t){var i=this.settings.messages[n];return i&&(i.constructor==String?i:i[t])},findDefined:function(){for(var n=0;n<arguments.length;n++)if(arguments[n]!==undefined)return arguments[n]},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customMetaMessage(t,i),!this.settings.ignoreTitle&&t.title||undefined,n.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"<\/strong>")},formatAndAdd:function(n,t){var i=this.defaultMessage(n,t.method),r=/\$?\{(\d+)\}/g;typeof i=="function"?i=i.call(this,t.parameters,n):r.test(i)&&(i=jQuery.format(i.replace(r,"{$1}"),t.parameters));this.errorList.push({message:i,element:n});this.errorMap[n.name]=i;this.submitted[n.name]=i},addWrapper:function(n){return this.settings.wrapper&&(n=n.add(n.parent(this.settings.wrapper))),n},defaultShowErrors:function(){for(var t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,t=this.validElements();t[n];n++)this.settings.unhighlight.call(this,t[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return n(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var r=this.errorsFor(t);r.length?(r.removeClass().addClass(this.settings.errorClass),r.attr("generated")&&r.html(i)):(r=n("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(r=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(r).length||(this.settings.errorPlacement?this.settings.errorPlacement(r,n(t)):r.insertAfter(t)));!i&&this.settings.success&&(r.text(""),typeof this.settings.success=="string"?r.addClass(this.settings.success):this.settings.success(r));this.toShow=this.toShow.add(r)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return n(this).attr("for")==i})},idOrName:function(n){return this.groups[n.name]||(this.checkable(n)?n.name:n.id||n.name)},checkable:function(n){return/radio|checkbox/i.test(n.type)},findByName:function(t){var i=this.currentForm;return n(document.getElementsByName(t)).map(function(n,r){return r.form==i&&r.name==t&&r||null})},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return n("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(n,t){return this.dependTypes[typeof n]?this.dependTypes[typeof n](n,t):!0},dependTypes:{boolean:function(n){return n},string:function(t,i){return!!n(t,i.form).length},"function":function(n,t){return n(t)}},optional:function(t){return!n.validator.methods.required.call(this,n.trim(t.value),t)&&"dependency-mismatch"},startRequest:function(n){this.pending[n.name]||(this.pendingRequest++,this.pending[n.name]=!0)},stopRequest:function(t,i){this.pendingRequest--;this.pendingRequest<0&&(this.pendingRequest=0);delete this.pending[t.name];i&&this.pendingRequest==0&&this.formSubmitted&&this.form()?(n(this.currentForm).submit(),this.formSubmitted=!1):!i&&this.pendingRequest==0&&this.formSubmitted&&(n(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return n.data(t,"previousValue")||n.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor==String?this.classRuleSettings[t]=i:n.extend(this.classRuleSettings,t)},classRules:function(t){var i={};return(t=n(t).attr("class"))&&n.each(t.split(" "),function(){this in n.validator.classRuleSettings&&n.extend(i,n.validator.classRuleSettings[this])}),i},attributeRules:function(t){var i={},r,u;t=n(t);for(r in n.validator.methods)u=t.attr(r),u&&(i[r]=u);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},metadataRules:function(t){if(!n.metadata)return{};var i=n.data(t.form,"validator").settings.meta;return i?n(t).metadata()[i]:n(t).metadata()},staticRules:function(t){var i={},r=n.data(t.form,"validator");return r.settings.rules&&(i=n.validator.normalizeRule(r.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return n.each(t,function(r,u){if(u===!1)delete t[r];else if(u.param||u.depends){var f=!0;switch(typeof u.depends){case"string":f=!!n(u.depends,i.form).length;break;case"function":f=u.depends.call(i,i)}f?t[r]=u.param!==undefined?u.param:!0:delete t[r]}}),n.each(t,function(r,u){t[r]=n.isFunction(u)?u(i):u}),n.each(["minlength","maxlength","min","max"],function(){t[this]&&(t[this]=Number(t[this]))}),n.each(["rangelength","range"],function(){t[this]&&(t[this]=[Number(t[this][0]),Number(t[this][1])])}),n.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t.messages&&delete t.messages,t},normalizeRule:function(t){if(typeof t=="string"){var i={};n.each(t.split(/\s/),function(){i[this]=!0});t=i}return t},addMethod:function(t,i,r){n.validator.methods[t]=i;n.validator.messages[t]=r!=undefined?r:n.validator.messages[t];i.length<3&&n.validator.addClassRules(t,n.validator.normalizeRule(t))},methods:{required:function(t,i,r){if(!this.depend(r,i))return"dependency-mismatch";switch(i.nodeName.toLowerCase()){case"select":return(t=n(i).val())&&t.length>0;case"input":if(this.checkable(i))return this.getLength(t,i)>0;default:return n.trim(t).length>0}},remote:function(t,i,r){var f,u,e;return this.optional(i)?"dependency-mismatch":(f=this.previousValue(i),this.settings.messages[i.name]||(this.settings.messages[i.name]={}),f.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=f.message,r=typeof r=="string"&&{url:r}||r,this.pending[i.name])?"pending":f.old===t?f.valid:(f.old=t,u=this,this.startRequest(i),e={},e[i.name]=t,n.ajax(n.extend(!0,{url:r,mode:"abort",port:"validate"+i.name,dataType:"json",data:e,success:function(r){var o,e;u.settings.messages[i.name].remote=f.originalMessage;o=r===!0;o?(e=u.formSubmitted,u.prepareElement(i),u.formSubmitted=e,u.successList.push(i),u.showErrors()):(e={},r=r||u.defaultMessage(i,"remote"),e[i.name]=f.message=n.isFunction(r)?r(t):r,u.showErrors(e));f.valid=o;u.stopRequest(i,o)}},r)),"pending")},minlength:function(t,i,r){return this.optional(i)||this.getLength(n.trim(t),i)>=r},maxlength:function(t,i,r){return this.optional(i)||this.getLength(n.trim(t),i)<=r},rangelength:function(t,i,r){return t=this.getLength(n.trim(t),i),this.optional(i)||t>=r[0]&&t<=r[1]},min:function(n,t,i){return this.optional(t)||n>=i},max:function(n,t,i){return this.optional(t)||n<=i},range:function(n,t,i){return this.optional(t)||n>=i[0]&&n<=i[1]},email:function(n,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(n)},url:function(n,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(n)},date:function(n,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(n))},dateISO:function(n,t){return this.optional(t)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(n)},number:function(n,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(n)},digits:function(n,t){return this.optional(t)||/^\d+$/.test(n)},creditcard:function(n,t){var r;if(this.optional(t))return"dependency-mismatch";if(/[^0-9-]+/.test(n))return!1;var f=0,i=0,u=!1;for(n=n.replace(/\D/g,""),r=n.length-1;r>=0;r--)i=n.charAt(r),i=parseInt(i,10),u&&(i*=2)>9&&(i-=9),f+=i,u=!u;return f%10==0},accept:function(n,t,i){return i=typeof i=="string"?i.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||n.match(RegExp(".("+i+")$","i"))},equalTo:function(t,i,r){return r=n(r).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){n(i).valid()}),t==r.val()}}});n.format=n.validator.format}(jQuery),function(n){var t={},i;n.ajaxPrefilter?n.ajaxPrefilter(function(n,i,r){i=n.port;n.mode=="abort"&&(t[i]&&t[i].abort(),t[i]=r)}):(i=n.ajax,n.ajax=function(r){var u=("port"in r?r:n.ajaxSettings).port;return("mode"in r?r:n.ajaxSettings).mode=="abort"?(t[u]&&t[u].abort(),t[u]=i.apply(this,arguments)):i.apply(this,arguments)})}(jQuery),function(n){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||n.each({focus:"focusin",blur:"focusout"},function(t,i){function r(t){return t=n.event.fix(t),t.type=i,n.event.handle.call(this,t)}n.event.special[i]={setup:function(){this.addEventListener(t,r,!0)},teardown:function(){this.removeEventListener(t,r,!0)},handler:function(t){return arguments[0]=n.event.fix(t),arguments[0].type=i,n.event.handle.apply(this,arguments)}}});n.extend(n.fn,{validateDelegate:function(t,i,r){return this.bind(i,function(i){var u=n(i.target);if(u.is(t))return r.apply(u,arguments)})}})}(jQuery),function(n){"use strict";var v=n.Base64,i,e;typeof module!="undefined"&&module.exports&&(i=require("buffer").Buffer);var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=function(n){for(var i={},t=0,r=n.length;t<r;t++)i[n.charAt(t)]=t;return i}(r),t=String.fromCharCode,y=function(n){var i;return n.length<2?(i=n.charCodeAt(0),i<128?n:i<2048?t(192|i>>>6)+t(128|i&63):t(224|i>>>12&15)+t(128|i>>>6&63)+t(128|i&63)):(i=65536+(n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320),t(240|i>>>18&7)+t(128|i>>>12&63)+t(128|i>>>6&63)+t(128|i&63))},p=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,s=function(n){return n.replace(p,y)},w=function(n){var i=[0,2,1][n.length%3],t=n.charCodeAt(0)<<16|(n.length>1?n.charCodeAt(1):0)<<8|(n.length>2?n.charCodeAt(2):0),u=[r.charAt(t>>>18),r.charAt(t>>>12&63),i>=2?"=":r.charAt(t>>>6&63),i>=1?"=":r.charAt(t&63)];return u.join("")},h=n.btoa?function(t){return n.btoa(t)}:function(n){return n.replace(/[\s\S]{1,3}/g,w)},c=i?function(n){return new i(n).toString("base64")}:function(n){return h(s(n))},u=function(n,t){return t?c(n).replace(/[+\/]/g,function(n){return n=="+"?"-":"_"}).replace(/=/g,""):c(n)},b=function(n){return u(n,!0)},k=new RegExp("[À-ß][-¿]|[à-ï][-¿]{2}|[ð-÷][-¿]{3}","g"),d=function(n){switch(n.length){case 4:var r=(7&n.charCodeAt(0))<<18|(63&n.charCodeAt(1))<<12|(63&n.charCodeAt(2))<<6|63&n.charCodeAt(3),i=r-65536;return t((i>>>10)+55296)+t((i&1023)+56320);case 3:return t((15&n.charCodeAt(0))<<12|(63&n.charCodeAt(1))<<6|63&n.charCodeAt(2));default:return t((31&n.charCodeAt(0))<<6|63&n.charCodeAt(1))}},l=function(n){return n.replace(k,d)},g=function(n){var i=n.length,e=i%4,r=(i>0?f[n.charAt(0)]<<18:0)|(i>1?f[n.charAt(1)]<<12:0)|(i>2?f[n.charAt(2)]<<6:0)|(i>3?f[n.charAt(3)]:0),u=[t(r>>>16),t(r>>>8&255),t(r&255)];return u.length-=[0,0,2,1][e],u.join("")},a=n.atob?function(t){return n.atob(t)}:function(n){return n.replace(/[\s\S]{1,4}/g,g)},nt=i?function(n){return new i(n,"base64").toString()}:function(n){return l(a(n))},o=function(n){return nt(n.replace(/[-_]/g,function(n){return n=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},tt=function(){var t=n.Base64;return n.Base64=v,t};n.Base64={VERSION:"2.1.5",atob:a,btoa:h,fromBase64:o,toBase64:u,utob:s,encode:u,encodeURI:b,btou:l,decode:o,noConflict:tt};typeof Object.defineProperty=="function"&&(e=function(n){return{value:n,enumerable:!1,writable:!0,configurable:!0}},n.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",e(function(){return o(this)}));Object.defineProperty(String.prototype,"toBase64",e(function(n){return u(this,n)}));Object.defineProperty(String.prototype,"toBase64URI",e(function(){return u(this,!0)}))})}(this);this.Meteor&&(Base64=global.Base64);!function(n){var t=function(t,i){var u=n(t),r={server:"server.php",fps:1,radius:164.5,segments:[],colors:[],speed:Math.PI/16,upTime:50,downTime:300,centerX:165,centerY:165,font:"12px verdana",fontFill:117,width:330,height:330,stoppable:0,minStop:0,maxStop:0,segmentArc:0,segmentArc8:0,tryButton:undefined,spinButton:undefined};n.extend(r,i);u&&r.segments.length&&(this.vars=r,this.vars.lkelm=u,this.initialize())};t.prototype={initialize:function(){try{this.initWheel();this.initAudio();this.initCanvas();this.update()}catch(n){alert("Wheel is not loaded "+n);return}},initAudio:function(){var t=this.vars,n=document.createElement("audio");n.setAttribute("src","wheel.mp3");this.sound=n},rePlayAudio:function(){var t=this.vars,n=document.createElement("audio");n.setAttribute("src","wheel.mp3");wheel.sound=n;this.sound.play()},initCanvas:function(){var t=this.vars,i=t.lkelm.find("canvas").get(0);if(n(i).attr("width",t.width).attr("height",t.height),typeof FlashCanvas!="undefined"&&FlashCanvas.initElement(i),this.context=i.getContext("2d"),t.tryButton)n(t.tryButton).on("click touchstart",n.proxy(this.trySpin,this));if(t.spinButton)n(t.spinButton).on("click touchstart",n.proxy(this.spin,this));n(document).on("click touchstart",".spin-button",n.proxy(this.spin,this))},initWheel:function(){var n=this.vars,i,t;for(this.PI2=Math.PI*2,this.segmentArc=this.PI2/n.segments.length,this.segmentArc8=this.segmentArc/8,this.stoppable=0,this.spinning=!1,i=0,t=0;t<n.downTime;t++)i+=n.speed*t/n.downTime;this.stopArclength=i},spin:function(){var t=this.vars,i,r;if(!this.spinning){if(stopAllSpin){alert("Bạn đã sử dụng hết lượt quay của sản phẩm này");return}return this.minStop=0,this.maxStop=0,this.stoppable=0,this.frames=0,this.phrase=0,this.spinning=!0,this.timerHandle=setInterval(n.proxy(this.onTimerTick,this),t.fps),n.removeCookie("_qld"+productID_ld,{path:"/"}),i=this,r=n("#checkclient").val(),n.ajax({type:"POST",url:"/Ajax/Product/GetRandomIndex",data:{gender:!0,name:name_ld,phone:phone_ld,productID:productID_ld,check:r},success:function(n){typeof n.index!="undefined"&&(n.Error||(code_ld=n.code,_index=n.index,setTimeout(function(){checktry=!0;i.stop(_index)},t.upTime*t.fps+1e3)))},error:function(){}}),!1}},trySpin:function(){var t=this.vars;if(!this.spinning){this.minStop=0;this.maxStop=0;this.stoppable=0;this.frames=0;this.phrase=0;this.spinning=!0;this.timerHandle=setInterval(n.proxy(this.onTimerTick,this),t.fps);var i=[1,2,3,4,5,6,7,8,9,10,11,12,14,13,15,17,16],r=i[Math.floor(Math.random()*i.length)],u=this;return setTimeout(function(){checktry=!1;u.stop(r)},t.upTime*t.fps+1e3),!1}},stop:function(n){var i=this.vars,t=this.segmentArc*parseInt(n);return needarc=n!=5?this.PI2-(this.stopArclength+t)%this.PI2-.9:this.PI2-(this.stopArclength+t)%this.PI2+5.3,this.minStop=needarc+this.segmentArc8,this.maxStop=needarc+this.segmentArc-this.segmentArc8,this.stoppable=1,_index=n,!1},onTimerTick:function(){var n=this.vars,t=!1,i;for(t,this.phrase==0?(this.frames++,this.angleDelta=n.speed*(this.frames/n.upTime),this.frames>=n.upTime&&(this.phrase=1)):this.phrase==1?(this.angleDelta=n.speed,this.cc=0):this.phrase==2&&(this.frames++,this.angleDelta=n.speed*((n.downTime-this.frames)/n.downTime),this.frames>=n.downTime&&(t=!0)),this.currentAngle+=this.angleDelta;this.currentAngle>=this.PI2;)this.currentAngle-=this.PI2;this.phrase==1&&this.stoppable==1&&this.currentAngle>=this.minStop&&this.currentAngle<=this.maxStop&&(this.frames=0,this.phrase=2);t&&(clearInterval(this.timerHandle),this.timerHandle=0,this.angleDelta=0,n.onCompleted&&(i=this,setTimeout(function(){n.onCompleted(i)},100)),this.spinning=!1);this.draw()},update:function(){var n=this.vars;this.currentAngle=-3/n.segments.length*this.PI2;this.draw()},draw:function(){this.clear();var n=this.context,t=this.vars;n.save();n.beginPath();n.arc(t.centerX,t.centerY,t.radius,0,2*Math.PI,!1);n.fillStyle="#e4e4e4";n.fill();n.strokeStyle="#dedede ";n.stroke();this.drawWheel()},clear:function(){var n=this.vars;this.context.clearRect(0,0,n.width,n.height)},drawSegment:function(n,t,i){var u=this.vars,r=this.context,f=u.segments[n];color=u.colors[n];r.save();r.beginPath();r.fillStyle=color;r.strokeStyle=color;r.moveTo(u.centerX,u.centerY);r.arc(u.centerX,u.centerY,u.radius-3,t,i,!1);r.lineTo(u.centerX,u.centerY);r.closePath();r.fill();r.restore();r.save();r.translate(u.centerX,u.centerY);r.rotate((t+i)/2);r.fillStyle=color==="#e4e4e4"?"#c6020a":"#ffffff";r.fillText(f.text,this.vars.fontFill,0);r.restore()},drawWheel:function(){var e=this.vars,n=this.context,r=this.currentAngle,u=r,o=e.segments,f=o.length,t,i;for(n.textBaseline="middle",n.textAlign="center",n.font=this.vars.font,n.strokeStyle="rgba(220, 220, 220, 0.6)",n.lineWidth=1,t=1;t<=f;t++)i=this.PI2*(t/f)+r,this.drawSegment(t-1,u,i),u=i}};n.fn.spinnerDraw=function(i){return this.each(function(){var u=n(this),r=u.data("spinnerDraw"),f=typeof i=="object"&&i;r?typeof i=="string"&&r[i]&&r[i]():u.data("spinnerDraw",r=new t(this,f))})}}(window.jQuery),function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){function i(n){return t.raw?n:encodeURIComponent(n)}function f(n){return t.raw?n:decodeURIComponent(n)}function e(n){return i(t.json?JSON.stringify(n):String(n))}function o(n){n.indexOf('"')===0&&(n=n.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return n=decodeURIComponent(n.replace(u," ")),t.json?JSON.parse(n):n}catch(i){}}function r(i,r){var u=t.raw?i:o(i);return n.isFunction(r)?r(u):u}var u=/\+/g,t=n.cookie=function(u,o,s){var y,a,h,v,c,p;if(o!==undefined&&!n.isFunction(o))return s=n.extend({},t.defaults,s),typeof s.expires=="number"&&(y=s.expires,a=s.expires=new Date,a.setTime(+a+y*864e5)),document.cookie=[i(u),"=",e(o),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("");for(h=u?undefined:{},v=document.cookie?document.cookie.split("; "):[],c=0,p=v.length;c<p;c++){var w=v[c].split("="),b=f(w.shift()),l=w.join("=");if(u&&u===b){h=r(l,o);break}u||(l=r(l))===undefined||(h[b]=l)}return h};t.defaults={};n.removeCookie=function(t,i){return n.cookie(t)===undefined?!1:(n.cookie(t,"",n.extend({},i,{expires:-1})),!n.cookie(t))}}),function(n){n.fn.extend({leanModal:function(t){function i(t){n("#lean_overlay").fadeOut(200);n(t).css({display:"none"})}var r=n("<div id='lean_overlay'><\/div>");return n("body").append(r),t=n.extend({top:100,overlay:.5,closeButton:null},t),this.each(function(){var r=t;n(this).click(function(t){var u=n(this).attr("href"),e,f;n("#lean_overlay").click(function(){i(u)});n(r.closeButton).click(function(){i(u)});e=n(u).outerHeight();f=n(u).outerWidth();n(".lean_overlay").css({display:"block",opacity:0});n("#lean_overlay").fadeTo(200,r.overlay);n(u).css({display:"block",position:"fixed",opacity:0,"z-index":11e3,left:"50%","margin-left":-(f/2)+"px",top:r.top+"px"});n(u).fadeTo(200,1);t.preventDefault()})})}})}(jQuery),function(n){n.fn.extend({fptmodal:function(t){var i={content:"",optionDefault:20,callback:undefined},t=n.extend(i,t);return this.each(function(){var e=n(this),i=n('<div class="f-modal">'+t.content+"<\/div>"),r=n('<div class="modal-opacity"><\/div>'),u=window.innerWidth>0?window.innerWidth:screen.width,f=window.innerHeight>0?window.innerHeight:screen.height;n("body").append(i);n("body").append(r);$top=(f-i.height())/2;$left=(u-i.width())/2;i.css({top:0,left:$left,opacity:0});i.animate({top:$top,opacity:1},300,function(){t.callback&&t.callback()});r.click(function(n){n.preventDefault();i.animate({top:0,opacity:0},300);r.animate({opacity:0},300,function(){i.remove();r.remove()})});i.find(".close-f-modal").click(function(){r.trigger("click")})})}})}(jQuery),function(n){"use strict";n.fn.jQCloud=function(t,i){var r=this,f=r.attr("id")||Math.floor(Math.random()*1e6).toString(36),e={width:r.width(),height:r.height(),center:{x:(i&&i.width?i.width:r.width())/2,y:(i&&i.height?i.height:r.height())/2},delayedMode:t.length>50,shape:!1,encodeURI:!0,removeOverflowing:!0},u;return i=n.extend(e,i||{}),r.addClass("jqcloud").width(i.width).height(i.height),r.css("position")==="static"&&r.css("position","relative"),u=function(){for(var l=function(n,t){for(var r=function(n,t){return Math.abs(2*n.offsetLeft+n.offsetWidth-2*t.offsetLeft-t.offsetWidth)<n.offsetWidth+t.offsetWidth&&Math.abs(2*n.offsetTop+n.offsetHeight-2*t.offsetTop-t.offsetHeight)<n.offsetHeight+t.offsetHeight?!0:!1},i=0,i=0;i<t.length;i++)if(r(n,t[i]))return!0;return!1},e=0;e<t.length;e++)t[e].weight=parseFloat(t[e].weight,10);t.sort(function(n,t){return n.weight<t.weight?1:n.weight>t.weight?-1:0});var u=i.shape==="rectangular"?18:2,h=[],o=i.width/i.height,c=function(e,s){var it=f+"_word_"+e,ft="#"+it,b=6.28*Math.random(),k=0,d=0,w=0,rt=5,ut="",g="",c,y;if(s.html=n.extend(s.html,{id:it}),s.html&&s.html["class"]&&(ut=s.html["class"],delete s.html["class"]),t[0].weight>t[t.length-1].weight&&(rt=Math.round((s.weight-t[t.length-1].weight)/(t[0].weight-t[t.length-1].weight)*9)+1),c=n("<span>").attr(s.html).addClass("w"+rt+" "+ut),s.link?(typeof s.link=="string"&&(s.link={href:s.link}),i.encodeURI&&(s.link=n.extend(s.link,{href:encodeURI(s.link.href).replace(/'/g,"%27")})),g=n("<a>").attr(s.link).text(s.text)):g=s.text,c.append(g),!!s.handlers)for(y in s.handlers)s.handlers.hasOwnProperty(y)&&typeof s.handlers[y]=="function"&&n(c).bind(y,s.handlers[y]);r.append(c);var nt=c.width(),tt=c.height(),a=i.center.x-nt/2,v=i.center.y-tt/2,p=c[0].style;for(p.position="absolute",p.left=a+"px",p.top=v+"px";l(c[0],h);){if(i.shape==="rectangular"){d++;d*u>(1+Math.floor(w/2))*u*(w%4%2==0?1:o)&&(d=0,w++);switch(w%4){case 1:a+=u*o+Math.random()*2;break;case 2:v-=u+Math.random()*2;break;case 3:a-=u*o+Math.random()*2;break;case 0:v+=u+Math.random()*2}}else k+=u,b+=(e%2==0?1:-1)*u,a=i.center.x-nt/2+k*Math.cos(b)*o,v=i.center.y+k*Math.sin(b)-tt/2;p.left=a+"px";p.top=v+"px"}if(i.removeOverflowing&&(a<0||v<0||a+nt>i.width||v+tt>i.height)){c.remove();return}h.push(c[0]);n.isFunction(s.afterWordRender)&&s.afterWordRender.call(c)},s=function(u){if(u=u||0,!r.is(":visible")){setTimeout(function(){s(u)},10);return}u<t.length?(c(u,t[u]),setTimeout(function(){s(u+1)},10)):n.isFunction(i.afterCloudRender)&&i.afterCloudRender.call(r)};i.delayedMode?s():(n.each(t,c),n.isFunction(i.afterCloudRender)&&i.afterCloudRender.call(r))},setTimeout(function(){u()},10),r}}(jQuery),function(n){n.fn.extend({zAccordion:function(t){var i={timeout:6e3,width:960,height:340,slideWidth:660,slideHeight:340,tabWidth:100,startingSlide:0,slideClass:"slide",slideOpenClass:"slide-open",slideClosedClass:"slide-closed",easing:null,speed:1200,open:null,close:null,auto:!0,trigger:"click",pause:!0,click:null},r,t;return t.height==undefined&&t.slideHeight==undefined?(t.height=i.height,t.slideHeight=i.slideHeight):t.height!=undefined&&t.slideHeight==undefined?t.slideHeight=t.height:t.height==undefined&&t.slideHeight!=undefined&&(t.height=t.slideHeight),t.width==undefined&&t.slideWidth==undefined&&t.tabWidth==undefined?(t.width=i.width,t.tabWidth=i.tabWidth,t.slideWidth=i.slideWidth):t.width!=undefined&&t.slideWidth==undefined&&t.tabWidth==undefined?(t.tabWidth=100,t.slideWidth=t.width-(this.children().size()-1)*t.tabWidth):t.width==undefined&&t.slideWidth!=undefined&&t.tabWidth==undefined?(t.width=i.width,t.tabWidth=(i.width-t.slideWidth)/(this.children().size()-1)):t.width==undefined&&t.slideWidth==undefined&&t.tabWidth!=undefined?(t.width=i.width,t.slideWidth=t.width-(this.children().size()-1)*t.tabWidth):t.width!=undefined&&t.slideWidth!=undefined&&t.tabWidth==undefined?t.tabWidth=(t.width-t.slideWidth)/(this.children().size()-1):t.width!=undefined&&t.slideWidth==undefined&&t.tabWidth!=undefined?t.slideWidth=t.width-(this.children().size()-1)*t.tabWidth:t.width==undefined&&t.slideWidth!=undefined&&t.tabWidth!=undefined&&(t.width=(this.children().size()-1)*t.tabWidth+t.slideWidth),i.animate=t.slideWidth-t.tabWidth,r=null,i.stop=!1,i.inside=!1,i.current=i.startingSlide,t=n.extend(i,t),this.click=function(t){clearTimeout(r);t++;(t>n(this).children().size()||t<1)&&(t=1);n(this).children(n(this).children().get(0).tagName+":nth-child("+t+")").trigger(i.trigger)},this.stop=function(){clearTimeout(r);i.stop=!0},this.start=function(){clearTimeout(r);i.stop=!1;var t=n(this).children().get(0).tagName+"."+i.slideOpenClass;this.click(n(this).children(t).index()+1)},this.each(function(){var i=t,u=n(this),e,f=[];u.children().each(function(t){var o,r;e=t*i.tabWidth;f[t]=e;o=t*10;n(this).addClass(i.slideClass);n(this).css({left:e+"px",top:0,"z-index":o,margin:0,padding:0,display:"block",position:"absolute",overflow:"hidden",width:i.slideWidth+"px",height:i.slideHeight+"px",float:"left"});t==i.startingSlide?n(this).addClass(i.slideOpenClass).css("cursor","default"):(n(this).addClass(i.slideClosedClass).css("cursor","pointer"),t>i.startingSlide&&(r=t+1,u.children(u.children().get(0).tagName+":nth-child("+r+")").css({left:f[r-1]+i.animate+"px"})))});u.css({display:"block","list-style":"none",height:i.height+"px",overflow:"hidden",width:i.width+"px",padding:0,position:"relative",overflow:"hidden"});(u.get(0).tagName=="UL"||u.get(0).tagName=="OL")&&u.css({"list-style":"none"});u.hover(function(){i.inside=!0;try{clearTimeout(r)}catch(n){}},function(){i.inside=!1;try{clearTimeout(r)}catch(n){}i.auto&&!i.stop&&(r=setTimeout(function(){i.current=u.children(u.children().get(0).tagName+"."+i.slideOpenClass).index()+1;var n=i.current+1;n>f.length&&(n=1);u.children(u.children().get(0).tagName+":nth-child("+n+")").trigger(i.trigger)},i.timeout))});u.children(u.children().get(0).tagName+"."+i.slideClass).bind(i.trigger,function(){var e,t;if(!n(this).hasClass(i.slideOpenClass)){try{clearTimeout(r)}catch(o){}for(i.inside||i.stop||(r=setTimeout(function(){i.current=u.children(u.children().get(0).tagName+"."+i.slideOpenClass).index()+1;var n=i.current+1;n>f.length&&(n=1);u.children(u.children().get(0).tagName+":nth-child("+n+")").trigger(i.trigger)},i.timeout)),u.children(u.children().get(0).tagName+"."+i.slideClass).addClass(i.slideClosedClass).removeClass(i.slideOpenClass).css("cursor","pointer"),n(this).addClass(i.slideOpenClass).removeClass(i.slideClosedClass).css("cursor","default"),e=n(this).index()+1,i.click!=null&&i.click(),u.children(u.children().get(0).tagName+":nth-child("+e+")").animate({left:f[e-1]+"px"},i.speed,i.easing,i.open),t=1;t<=f.length;t++)t<e&&u.children(u.children().get(0).tagName+":nth-child("+t+")").animate({left:f[t-1]+"px"},i.speed,i.easing,i.close),t>e&&u.children(u.children().get(0).tagName+":nth-child("+t+")").animate({left:f[t-1]+i.animate+"px"},i.speed,i.easing,i.close);return!1}});i.auto&&!i.stop&&(r=setTimeout(function(){i.current=u.children(u.children().get(0).tagName+"."+i.slideOpenClass).index()+1;var n=i.current+1;n>f.length&&(n=1);u.children(u.children().get(0).tagName+":nth-child("+n+")").trigger(i.trigger)},i.timeout))})}})}(jQuery),function(n){function ut(n,t,i){return i.transition=="transition"&&t=="swing"&&(t="ease"),{anims:[],duration:n,orgDuration:n,easing:t,startTime:p()}}function k(n,t){for(var i,r=0,u=n.anims.length;r<u;r++)(i=n.anims[r],i)&&i[0][t.transition](i[1],n.duration,n.easing,i[2])}function ft(n,t){var r,e,i;for(f(t)||(t=!0),s(n.pre)&&ft(n.pre,t),r=0,e=n.anims.length;r<e;r++)i=n.anims[r],i[0].stop(!0),t&&(i[0].css(i[1]),u(i[2])&&i[2]());s(n.post)&&ft(n.post,t)}function ui(n,t,i){t&&t.remove();switch(i.fx){case"fade":case"crossfade":case"cover-fade":case"uncover-fade":n.css("opacity",1);n.css("filter","")}}function et(n,t,i,r,u){if(t[i]&&t[i].call(n,r),u[i].length)for(var f=0,e=u[i].length;f<e;f++)u[i][f].call(n,r);return[]}function fi(n,i,r){return i.length&&(n.trigger(t(i[0][0],r),i[0][1]),i.shift()),i}function ei(t){t.each(function(){var t=n(this);t.data("_cfs_isHidden",t.is(":hidden")).hide()})}function oi(t){t&&t.each(function(){var t=n(this);t.data("_cfs_isHidden")||t.show()})}function d(n){return n.auto&&clearTimeout(n.auto),n.progress&&clearInterval(n.progress),n}function si(n,t,i,r,u,f,e){return{width:e.width,height:e.height,items:{old:n,skipped:t,visible:i},scroll:{items:r,direction:u,duration:f}}}function hi(n,t,i,r){var u=n.duration;return n.fx=="none"?0:(u=="auto"?u=t.scroll.duration/t.scroll.items*i:u<10&&(u=r/u),u<1)?0:(n.fx=="fade"&&(u=u/2),Math.round(u))}function vt(n,t,u){var s=i(n.items.minimum)?n.items.minimum:n.items.visible+1,f,e,o;t=="show"||t=="hide"?f=t:s>t?(r(u,"Not enough items ("+t+" total, "+s+" needed): Hiding navigation."),f="hide"):f="show";e=f=="show"?"removeClass":"addClass";o=l("hidden",u);n.auto.button&&n.auto.button[f]()[e](o);n.prev.button&&n.prev.button[f]()[e](o);n.next.button&&n.next.button[f]()[e](o);n.pagination.container&&n.pagination.container[f]()[e](o)}function g(n,t,i){var r,f,u;n.circular||n.infinite||(r=t=="removeClass"||t=="addClass"?t:!1,f=l("disabled",i),n.auto.button&&r&&n.auto.button[r](f),n.prev.button&&(u=r||t==0?"addClass":"removeClass",n.prev.button[u](f)),n.next.button&&(u=r||t==n.items.visible?"addClass":"removeClass",n.next.button[u](f)))}function ot(n,t){return u(t)?t=t.call(n):o(t)&&(t={}),t}function or(n,t){return t=ot(n,t),i(t)?t={visible:t}:t=="variable"?t={visible:t,width:t,height:t}:s(t)||(t={}),t}function sr(n,t){return t=ot(n,t),i(t)?t=t<=50?{items:t}:{duration:t}:e(t)?t={easing:t}:s(t)||(t={}),t}function yt(t,i){if(i=ot(t,i),e(i)){var r=ir(i);i=r==-1?n(i):r}return i}function hr(n,t){return t=yt(n,t),c(t)?t={button:t}:f(t)?t={play:t}:i(t)&&(t={timeoutDuration:t}),t.progress&&(e(t.progress)||c(t.progress))&&(t.progress={bar:t.progress}),t}function cr(t,r){return u(r.button)&&(r.button=r.button.call(t)),e(r.button)&&(r.button=n(r.button)),f(r.play)||(r.play=!0),i(r.delay)||(r.delay=0),o(r.pauseOnEvent)&&(r.pauseOnEvent=!0),f(r.pauseOnResize)||(r.pauseOnResize=!0),i(r.timeoutDuration)||(r.timeoutDuration=r.duration<10?2500:r.duration*5),r.progress&&(u(r.progress.bar)&&(r.progress.bar=r.progress.bar.call(t)),e(r.progress.bar)&&(r.progress.bar=n(r.progress.bar)),r.progress.bar?(u(r.progress.updater)||(r.progress.updater=n.fn.carouFredSel.progressbarUpdater),i(r.progress.interval)||(r.progress.interval=50)):r.progress=!1),r}function ci(n,t){return t=yt(n,t),c(t)?t={button:t}:i(t)&&(t={key:t}),t}function li(t,i){return u(i.button)&&(i.button=i.button.call(t)),e(i.button)&&(i.button=n(i.button)),e(i.key)&&(i.key=ir(i.key)),i}function lr(n,t){return t=yt(n,t),c(t)?t={container:t}:f(t)&&(t={keys:t}),t}function ar(t,r){return u(r.container)&&(r.container=r.container.call(t)),e(r.container)&&(r.container=n(r.container)),i(r.items)||(r.items=!1),f(r.keys)||(r.keys=!1),u(r.anchorBuilder)||ri(r.anchorBuilder)||(r.anchorBuilder=n.fn.carouFredSel.pageAnchorBuilder),i(r.deviation)||(r.deviation=0),r}function vr(n,t){return u(t)&&(t=t.call(n)),o(t)&&(t={onTouch:!1}),rt(t)?t={onTouch:t}:i(t)&&(t={items:t}),t}function yr(n,t){return f(t.onTouch)||(t.onTouch=!0),f(t.onMouse)||(t.onMouse=!1),s(t.options)||(t.options={}),f(t.options.triggerOnTouchEnd)||(t.options.triggerOnTouchEnd=!1),t}function pr(n,t){return u(t)&&(t=t.call(n)),rt(t)?t={}:i(t)?t={items:t}:o(t)&&(t=!1),t}function wr(n,t){return t}function nt(t,r,u,o,h){if(e(t)&&(t=n(t,h)),s(t)&&(t=n(t,h)),c(t)?(t=h.children().index(t),f(u)||(u=!1)):f(u)||(u=!0),i(t)||(t=0),i(r)||(r=0),u&&(t+=o.first),t+=r,o.total>0){while(t>=o.total)t-=o.total;while(t<0)t+=o.total}return t}function pt(n,t,i){for(var f=0,e=0,u,r=i;r>=0;r--){if(u=n.eq(r),f+=u.is(":visible")?u[t.d.outerWidth](!0):0,f>t.maxDimension)return e;r==0&&(r=n.length);e++}}function br(n,t,i){return ai(n,t.items.filter,t.items.visibleConf.org,i)}function kr(n,t,i,r){return ai(n,t.items.filter,r,i)}function ai(n,t,i,r){for(var o=0,f=0,s,u=r,e=n.length;u>=0;u--){if((f++,f==e)||(s=n.eq(u),s.is(t)&&(o++,o==i)))return f;u==0&&(u=e)}}function vi(n,t){return t.items.visibleConf.org||n.children().slice(0,t.items.visible).filter(t.items.filter).length}function w(n,t,i){for(var o=0,f=0,e,r=i,u=n.length-1;r<=u;r++){if((e=n.eq(r),o+=e.is(":visible")?e[t.d.outerWidth](!0):0,o>t.maxDimension)||(f++,f==u+1))return f;r==u&&(r=-1)}}function yi(n,t,i,r){var u=w(n,t,i);return t.circular||i+u>r&&(u=r-i),u}function st(n,t,i){return pi(n,t.items.filter,t.items.visibleConf.org,i,t.circular)}function dr(n,t,i,r){return pi(n,t.items.filter,r+1,i,t.circular)-1}function pi(n,t,i,r){for(var o=0,e=0,s,u=r,f=n.length-1;u<=f;u++){if((e++,e>=f)||(s=n.eq(u),s.is(t)&&(o++,o==i)))return e;u==f&&(u=-1)}}function tt(n,t){return n.slice(0,t.items.visible)}function gr(n,t,i){return n.slice(i,t.items.visibleConf.old+i)}function nu(n,t){return n.slice(0,t.items.visible)}function tu(n,t){return n.slice(0,t.items.visibleConf.old)}function iu(n,t,i){return n.slice(i,t.items.visible+i)}function wt(t,r,u){r.usePadding&&(e(u)||(u="_cfs_origCssMargin"),t.each(function(){var f=n(this),t=parseInt(f.css(r.d.marginRight),10);i(t)||(t=0);f.data(u,t)}))}function h(t,r,u){if(r.usePadding){var e=f(u)?u:!1;i(u)||(u=0);wt(t,r,"_cfs_tempCssMargin");t.each(function(){var t=n(this);t.css(r.d.marginRight,e?t.data("_cfs_tempCssMargin"):u+t.data("_cfs_origCssMargin"))})}}function ht(t){t.each(function(){var t=n(this);t.data("_cfs_origCss",t.attr("style")||"")})}function bt(t){t.each(function(){var t=n(this);t.attr("style",t.data("_cfs_origCss")||"")})}function wi(t,i){var e=t.items.visible,u=t.items[t.d.width],r=t[t.d.height],f=lt(r);i.each(function(){var i=n(this),e=u-ru(i,t,"Width");i[t.d.width](e);f&&i[t.d.height](gt(e,r))})}function kt(n,t){var s=n.parent(),u=n.children(),o=tt(u,t),f=ni(dt(o,t,!0),t,!1),i,r,e;return s.css(f),t.usePadding&&(i=t.padding,r=i[t.d[1]],t.align&&r<0&&(r=0),e=o.last(),e.css(t.d.marginRight,e.data("_cfs_origCssMargin")+r),n.css(t.d.top,i[t.d[0]]),n.css(t.d.left,i[t.d[3]])),n.css(t.d.width,f[t.d.width]+v(u,t,"width")*2),n.css(t.d.height,bi(u,t,"height")),f}function dt(n,t,i){return[v(n,t,"width",i),bi(n,t,"height",i)]}function bi(n,t,r,u){return(f(u)||(u=!1),i(t[t.d[r]])&&u)?t[t.d[r]]:i(t.items[t.d[r]])?t.items[t.d[r]]:(r=r.toLowerCase().indexOf("width")>-1?"outerWidth":"outerHeight",ct(n,t,r))}function ct(n,t,i){for(var u=0,f,e,r=0,o=n.length;r<o;r++)f=n.eq(r),e=f.is(":visible")?f[t.d[i]](!0):0,u<e&&(u=e);return u}function v(n,t,r,u){var h,o,e,c,s;if(f(u)||(u=!1),i(t[t.d[r]])&&u)return t[t.d[r]];if(i(t.items[t.d[r]]))return t.items[t.d[r]]*n.length;for(h=r.toLowerCase().indexOf("width")>-1?"outerWidth":"outerHeight",o=0,e=0,c=n.length;e<c;e++)s=n.eq(e),o+=s.is(":visible")?s[t.d[h]](!0):0;return o}function ki(n,t,i){var r=n.is(":visible"),u;return r&&n.hide(),u=n.parent()[t.d[i]](),r&&n.show(),u}function di(n,t){return i(n[n.d.width])?n[n.d.width]:t}function gi(n,t,i){for(var r=!1,f=!1,e,o,u=0,s=n.length;u<s;u++)e=n.eq(u),o=e.is(":visible")?e[t.d[i]](!0):0,r===!1?r=o:r!=o&&(f=!0),r==0&&(f=!0);return f}function ru(n,t,i){return n[t.d["outer"+i]](!0)-n[t.d[i.toLowerCase()]]()}function gt(n,t){if(lt(t)){if(t=parseInt(t.slice(0,-1),10),!i(t))return n;n*=t/100}return n}function t(n,t,i,r,u){return f(i)||(i=!0),f(r)||(r=!0),f(u)||(u=!1),i&&(n=t.events.prefix+n),r&&(n=n+"."+t.events.namespace),r&&u&&(n+=t.serialNumber),n}function l(n,t){return e(t.classnames[n])?t.classnames[n]:n}function ni(n,t,i){f(i)||(i=!0);var r=t.usePadding&&i?t.padding:[0,0,0,0],u={};return u[t.d.width]=n[0]+r[1]+r[3],u[t.d.height]=n[1]+r[0]+r[2],u}function b(n,t){for(var u=[],i,e,r=0,f=n.length;r<f;r++)for(i=0,e=t.length;i<e;i++)if(t[i].indexOf(typeof n[r])>-1&&o(u[i])){u[i]=n[r];break}return u}function uu(n){if(o(n))return[0,0,0,0];if(i(n))return[n,n,n,n];if(e(n)&&(n=n.split("px").join("").split("em").join("").split(" ")),!y(n))return[0,0,0,0];for(var t=0;t<4;t++)n[t]=parseInt(n[t],10);switch(n.length){case 0:return[0,0,0,0];case 1:return[n[0],n[0],n[0],n[0]];case 2:return[n[0],n[1],n[0],n[1]];case 3:return[n[0],n[1],n[2],n[1]];default:return[n[0],n[1],n[2],n[3]]}}function ti(n,t){var r=i(t[t.d.width])?Math.ceil(t[t.d.width]-v(n,t,"width")):0;switch(t.align){case"left":return[0,r];case"right":return[r,0];case"center":default:return[Math.ceil(r/2),Math.floor(r/2)]}}function fu(n){for(var i=[["width","innerWidth","outerWidth","height","innerHeight","outerHeight","left","top","marginRight",0,1,2,3],["height","innerHeight","outerHeight","width","innerWidth","outerWidth","top","left","marginBottom",3,2,1,0]],u=i[0].length,f=n.direction=="right"||n.direction=="left"?0:1,r={},t=0;t<u;t++)r[i[0][t]]=i[f][t];return r}function ii(n,t,r,f){var o=n,h,c;if(u(r))o=r.call(f,o);else if(e(r)){if(h=r.split("+"),c=r.split("-"),c.length>h.length)var l=!0,a=c[0],s=c[1];else var l=!1,a=h[0],s=h[1];switch(a){case"even":o=n%2==1?n-1:n;break;case"odd":o=n%2==0?n-1:n;break;default:o=n}s=parseInt(s,10);i(s)&&(l&&(s=-s),o+=s)}return(!i(o)||o<1)&&(o=1),o}function a(n,t,i,r){return nr(ii(n,t,i,r),t.items.visibleConf)}function nr(n,t){return i(t.min)&&n<t.min&&(n=t.min),i(t.max)&&n>t.max&&(n=t.max),n<1&&(n=1),n}function tr(t){y(t)||(t=[[t]]);y(t[0])||(t=[t]);for(var r=0,u=t.length;r<u;r++)e(t[r][0])&&(t[r][0]=n(t[r][0])),f(t[r][1])||(t[r][1]=!0),f(t[r][2])||(t[r][2]=!0),i(t[r][3])||(t[r][3]=0);return t}function ir(n){return n=="right"?39:n=="left"?37:n=="up"?38:n=="down"?40:-1}function rr(i,r,u){if(i){var f=r.triggerHandler(t("currentPosition",u));n.fn.carouFredSel.cookie.set(i,f)}}function eu(t){var i=n.fn.carouFredSel.cookie.get(t);return i==""?0:i}function ou(n,t){for(var r={},i=0,u=t.length;i<u;i++)r[t[i]]=n.css(t[i]);return r}function su(n,t,f,o){return s(n.visibleConf)||(n.visibleConf={}),s(n.sizesConf)||(n.sizesConf={}),n.start==0&&i(o)&&(n.start=o),s(n.visible)?(n.visibleConf.min=n.visible.min,n.visibleConf.max=n.visible.max,n.visible=!1):e(n.visible)?(n.visible=="variable"?n.visibleConf.variable=!0:n.visibleConf.adjust=n.visible,n.visible=!1):u(n.visible)&&(n.visibleConf.adjust=n.visible,n.visible=!1),e(n.filter)||(n.filter=f.filter(":hidden").length>0?":visible":"*"),n[t.d.width]||(t.responsive?(r(!0,"Set a "+t.d.width+" for the items!"),n[t.d.width]=ct(f,t,"outerWidth")):n[t.d.width]=gi(f,t,"outerWidth")?"variable":f[t.d.outerWidth](!0)),n[t.d.height]||(n[t.d.height]=gi(f,t,"outerHeight")?"variable":f[t.d.outerHeight](!0)),n.sizesConf.width=n.width,n.sizesConf.height=n.height,n}function hu(n,t){return n.items[n.d.width]=="variable"&&(n.items.visibleConf.variable=!0),n.items.visibleConf.variable||(i(n[n.d.width])?n.items.visible=Math.floor(n[n.d.width]/n.items[n.d.width]):(n.items.visible=Math.floor(t/n.items[n.d.width]),n[n.d.width]=n.items.visible*n.items[n.d.width],n.items.visibleConf.adjust||(n.align=!1)),(n.items.visible=="Infinity"||n.items.visible<1)&&(r(!0,'Not a valid number of visible items: Set to "variable".'),n.items.visibleConf.variable=!0)),n}function cu(n,t,i){return n=="auto"&&(n=ct(i,t,"outerWidth")),n}function lu(n,t,i){return n=="auto"&&(n=ct(i,t,"outerHeight")),n||(n=t.items[t.d.height]),n}function ur(n,t){var i=ti(tt(t,n),n);return n.padding[n.d[1]]=i[1],n.padding[n.d[3]]=i[0],n}function fr(n,t){var i=nr(Math.ceil(n[n.d.width]/n.items[n.d.width]),n.items.visibleConf),r;return i>t.length&&(i=t.length),r=Math.floor(n[n.d.width]/i),n.items.visible=i,n.items[n.d.width]=r,n[n.d.width]=i*r,n}function it(n){var i,t;return e(n)?(t=n.indexOf("immediate")>-1?!0:!1,i=n.indexOf("resume")>-1?!0:!1):t=i=!1,[t,i]}function er(n){return n===null}function o(n){return er(n)||typeof n=="undefined"||n===""||n==="undefined"}function y(n){return n instanceof Array}function c(n){return n instanceof jQuery}function s(n){return(n instanceof Object||typeof n=="object")&&!er(n)&&!c(n)&&!y(n)&&!u(n)}function i(n){return(n instanceof Number||typeof n=="number")&&!isNaN(n)}function e(n){return(n instanceof String||typeof n=="string")&&!o(n)&&!rt(n)&&!ri(n)}function u(n){return n instanceof Function||typeof n=="function"}function f(n){return n instanceof Boolean||typeof n=="boolean"||rt(n)||ri(n)}function rt(n){return n===!0||n==="true"}function ri(n){return n===!1||n==="false"}function lt(n){return e(n)&&n.slice(-1)=="%"}function p(){return(new Date).getTime()}function at(n,t){r(!0,n+" is DEPRECATED, support for it will be removed. Use "+t+" instead.")}function r(n,t){var i;if(!o(window.console)&&!o(window.console.log)){if(s(n)?(i=" ("+n.selector+")",n=n.debug):i="",!n)return!1;t=e(t)?"carouFredSel"+i+": "+t:["carouFredSel"+i+":",t];window.console.log(t)}return!1}n.fn.carouFredSel||(n.fn.caroufredsel=n.fn.carouFredSel=function(ct,yt){var au,pu,ku,nf,wu,du,tf;if(this.length==0)return r(!0,'No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){n(this).carouFredSel(ct,yt)});var ai=this,nr=this[0],gu=!1;ai.data("_cfs_isCarousel")&&(gu=ai.triggerHandler("_cfs_triggerEvent","currentPosition"),ai.trigger("_cfs_triggerEvent",["destroy",!0]));au={};au._init=function(t,r,u){t=ot(nr,t);t.items=or(nr,t.items);t.scroll=sr(nr,t.scroll);t.auto=hr(nr,t.auto);t.prev=ci(nr,t.prev);t.next=ci(nr,t.next);t.pagination=lr(nr,t.pagination);t.swipe=vr(nr,t.swipe);t.mousewheel=pr(nr,t.mousewheel);r&&(bu=n.extend(!0,{},n.fn.carouFredSel.defaults,t));ri=n.extend(!0,{},n.fn.carouFredSel.defaults,t);ri.d=fu(ri);ir.direction=ri.direction=="up"||ri.direction=="left"?"next":"prev";var f=ai.children(),e=ki(er,ri,"width");if(rt(ri.cookie)&&(ri.cookie="caroufredsel_cookie_"+pi.serialNumber),ri.maxDimension=di(ri,e),ri.items=su(ri.items,ri,f,u),ri[ri.d.width]=cu(ri[ri.d.width],ri,f),ri[ri.d.height]=lu(ri[ri.d.height],ri,f),ri.responsive&&(lt(ri[ri.d.width])||(ri[ri.d.width]="100%")),lt(ri[ri.d.width])&&(ir.upDateOnWindowResize=!0,ir.primarySizePercentage=ri[ri.d.width],ri[ri.d.width]=gt(e,ir.primarySizePercentage),ri.items.visible||(ri.items.visibleConf.variable=!0)),ri.responsive?(ri.usePadding=!1,ri.padding=[0,0,0,0],ri.align=!1,ri.items.visibleConf.variable=!1):(ri.items.visible||(ri=hu(ri,e)),ri[ri.d.width]||(!ri.items.visibleConf.variable&&i(ri.items[ri.d.width])&&ri.items.filter=="*"?(ri[ri.d.width]=ri.items.visible*ri.items[ri.d.width],ri.align=!1):ri[ri.d.width]="variable"),o(ri.align)&&(ri.align=i(ri[ri.d.width])?"center":!1),ri.items.visibleConf.variable&&(ri.items.visible=w(f,ri,0))),ri.items.filter=="*"||ri.items.visibleConf.variable||(ri.items.visibleConf.org=ri.items.visible,ri.items.visible=st(f,ri,0)),ri.items.visible=a(ri.items.visible,ri,ri.items.visibleConf.adjust,nr),ri.items.visibleConf.old=ri.items.visible,ri.responsive)ri.items.visibleConf.min||(ri.items.visibleConf.min=ri.items.visible),ri.items.visibleConf.max||(ri.items.visibleConf.max=ri.items.visible),ri=fr(ri,f,e);else{ri.padding=uu(ri.padding);ri.align=="top"?ri.align="left":ri.align=="bottom"&&(ri.align="right");switch(ri.align){case"center":case"left":case"right":ri[ri.d.width]!="variable"&&(ri=ur(ri,f),ri.usePadding=!0);break;default:ri.align=!1;ri.usePadding=ri.padding[0]==0&&ri.padding[1]==0&&ri.padding[2]==0&&ri.padding[3]==0?!1:!0}}i(ri.scroll.duration)||(ri.scroll.duration=500);o(ri.scroll.items)&&(ri.scroll.items=ri.responsive||ri.items.visibleConf.variable||ri.items.filter!="*"?"visible":ri.items.visible);ri.auto=n.extend(!0,{},ri.scroll,ri.auto);ri.prev=n.extend(!0,{},ri.scroll,ri.prev);ri.next=n.extend(!0,{},ri.scroll,ri.next);ri.pagination=n.extend(!0,{},ri.scroll,ri.pagination);ri.auto=cr(nr,ri.auto);ri.prev=li(nr,ri.prev);ri.next=li(nr,ri.next);ri.pagination=ar(nr,ri.pagination);ri.swipe=yr(nr,ri.swipe);ri.mousewheel=wr(nr,ri.mousewheel);ri.synchronise&&(ri.synchronise=tr(ri.synchronise));ri.auto.onPauseStart&&(ri.auto.onTimeoutStart=ri.auto.onPauseStart,at("auto.onPauseStart","auto.onTimeoutStart"));ri.auto.onPausePause&&(ri.auto.onTimeoutPause=ri.auto.onPausePause,at("auto.onPausePause","auto.onTimeoutPause"));ri.auto.onPauseEnd&&(ri.auto.onTimeoutEnd=ri.auto.onPauseEnd,at("auto.onPauseEnd","auto.onTimeoutEnd"));ri.auto.pauseDuration&&(ri.auto.timeoutDuration=ri.auto.pauseDuration,at("auto.pauseDuration","auto.timeoutDuration"))};au._build=function(){ai.data("_cfs_isCarousel",!0);var t=ai.children(),n=ou(ai,["textAlign","float","position","top","right","bottom","left","zIndex","width","height","marginTop","marginRight","marginBottom","marginLeft"]),i="relative";switch(n.position){case"absolute":case"fixed":i=n.position}pi.wrapper=="parent"?ht(er):er.css(n);er.css({overflow:"hidden",position:i});ht(ai);ai.data("_cfs_origCssZindex",n.zIndex);ai.css({textAlign:"left",float:"none",position:"absolute",top:0,right:"auto",bottom:"auto",left:0,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0});wt(t,ri);ht(t);ri.responsive&&wi(ri,t)};au._bind_events=function(){au._unbind_events();ai.bind(t("stop",pi),function(n,i){return n.stopPropagation(),ir.isStopped||ri.auto.button&&ri.auto.button.addClass(l("stopped",pi)),ir.isStopped=!0,ri.auto.play&&(ri.auto.play=!1,ai.trigger(t("pause",pi),i)),!0});ai.bind(t("finish",pi),function(n){return n.stopPropagation(),ir.isScrolling&&ft(gi),!0});ai.bind(t("pause",pi),function(n,t,i){var r,u,f;return n.stopPropagation(),ru=d(ru),t&&ir.isScrolling&&(gi.isStopped=!0,r=p()-gi.startTime,gi.duration-=r,gi.pre&&(gi.pre.duration-=r),gi.post&&(gi.post.duration-=r),ft(gi,!1)),ir.isPaused||ir.isScrolling||i&&(ru.timePassed+=p()-ru.startTime),ir.isPaused||ri.auto.button&&ri.auto.button.addClass(l("paused",pi)),ir.isPaused=!0,ri.auto.onTimeoutPause&&(u=ri.auto.timeoutDuration-ru.timePassed,f=100-Math.ceil(u*100/ri.auto.timeoutDuration),ri.auto.onTimeoutPause.call(nr,f,u)),!0});ai.bind(t("play",pi),function(n,u,e,o){var s;n.stopPropagation();ru=d(ru);var c=[u,e,o],h=b(c,["string","number","boolean"]);return(u=h[0],e=h[1],o=h[2],u!="prev"&&u!="next"&&(u=ir.direction),i(e)||(e=0),f(o)||(o=!1),o&&(ir.isStopped=!1,ri.auto.play=!0),!ri.auto.play)?(n.stopImmediatePropagation(),r(pi,"Carousel stopped: Not scrolling.")):(ir.isPaused&&ri.auto.button&&(ri.auto.button.removeClass(l("stopped",pi)),ri.auto.button.removeClass(l("paused",pi))),ir.isPaused=!1,ru.startTime=p(),s=ri.auto.timeoutDuration+e,dur2=s-ru.timePassed,perc=100-Math.ceil(dur2*100/s),ri.auto.progress&&(ru.progress=setInterval(function(){var n=p()-ru.startTime+ru.timePassed,t=Math.ceil(n*100/s);ri.auto.progress.updater.call(ri.auto.progress.bar[0],t)},ri.auto.progress.interval)),ru.auto=setTimeout(function(){ri.auto.progress&&ri.auto.progress.updater.call(ri.auto.progress.bar[0],100);ri.auto.onTimeoutEnd&&ri.auto.onTimeoutEnd.call(nr,perc,dur2);ir.isScrolling?ai.trigger(t("play",pi),u):ai.trigger(t(u,pi),ri.auto)},dur2),ri.auto.onTimeoutStart&&ri.auto.onTimeoutStart.call(nr,perc,dur2),!0)});ai.bind(t("resume",pi),function(n){return n.stopPropagation(),gi.isStopped?(gi.isStopped=!1,ir.isPaused=!1,ir.isScrolling=!0,gi.startTime=p(),k(gi,pi)):ai.trigger(t("play",pi)),!0});ai.bind(t("prev",pi)+" "+t("next",pi),function(e,o,h,c,l){var nt,v,w,a,p,g,y,k,d;if(e.stopPropagation(),ir.isStopped||ai.is(":hidden"))return e.stopImmediatePropagation(),r(pi,"Carousel stopped or hidden: Not scrolling.");if(nt=i(ri.items.minimum)?ri.items.minimum:ri.items.visible+1,nt>bi.total)return e.stopImmediatePropagation(),r(pi,"Not enough items ("+bi.total+" total, "+nt+" needed): Not scrolling.");var tt=[o,h,c,l],a=b(tt,["object","number/string","function","boolean"]);if(o=a[0],h=a[1],c=a[2],l=a[3],v=e.type.slice(pi.events.prefix.length),s(o)||(o={}),u(c)&&(o.onAfter=c),f(l)&&(o.queue=l),o=n.extend(!0,{},ri[v],o),o.conditions&&!o.conditions.call(nr,v))return e.stopImmediatePropagation(),r(pi,'Callback "conditions" returned false.');if(!i(h)){if(ri.items.filter!="*")h="visible";else for(w=[h,o.items,ri[v].items],a=0,k=w.length;a<k;a++)if(i(w[a])||w[a]=="page"||w[a]=="visible"){h=w[a];break}switch(h){case"page":return e.stopImmediatePropagation(),ai.triggerHandler(t(v+"Page",pi),[o,c]);case"visible":ri.items.visibleConf.variable||ri.items.filter!="*"||(h=ri.items.visible)}}if(gi.isStopped)return ai.trigger(t("resume",pi)),ai.trigger(t("queue",pi),[v,[o,h,c]]),e.stopImmediatePropagation(),r(pi,"Carousel resumed scrolling.");if(o.duration>0&&ir.isScrolling)return o.queue&&(o.queue=="last"&&(yu=[]),(o.queue!="first"||yu.length==0)&&ai.trigger(t("queue",pi),[v,[o,h,c]])),e.stopImmediatePropagation(),r(pi,"Carousel currently scrolling.");if(ru.timePassed=0,ai.trigger(t("slide_"+v,pi),[o,h]),ri.synchronise)for(p=ri.synchronise,g=[o,h],y=0,k=p.length;y<k;y++)d=v,p[y][2]||(d=d=="prev"?"next":"prev"),p[y][1]||(g[0]=p[y][0].triggerHandler("_cfs_triggerEvent",["configuration",d])),g[1]=h+p[y][3],p[y][0].trigger("_cfs_triggerEvent",["slide_"+d,g]);return!0});ai.bind(t("slide_prev",pi),function(u,f,e){var o,ur,tt,ot,lt,gt,or,bt,tr;if(u.stopPropagation(),o=ai.children(),!ri.circular&&bi.first==0)return ri.infinite&&ai.trigger(t("next",pi),bi.total-1),u.stopImmediatePropagation();if(h(o,ri),i(e)||(ri.items.visibleConf.variable?e=pt(o,ri,bi.total-1):ri.items.filter!="*"?(ur=i(f.items)?f.items:vi(ai,ri),e=kr(o,ri,bi.total-1,ur)):e=ri.items.visible,e=ii(e,ri,f.items,nr)),ri.circular||bi.total-e<bi.first&&(e=bi.total-bi.first),ri.items.visibleConf.old=ri.items.visible,ri.items.visibleConf.variable?(tt=a(w(o,ri,bi.total-e),ri,ri.items.visibleConf.adjust,nr),ri.items.visible+e<=tt&&e<bi.total&&(e++,tt=a(w(o,ri,bi.total-e),ri,ri.items.visibleConf.adjust,nr)),ri.items.visible=tt):ri.items.filter!="*"&&(tt=st(o,ri,bi.total-e),ri.items.visible=a(tt,ri,ri.items.visibleConf.adjust,nr)),h(o,ri,!0),e==0)return u.stopImmediatePropagation(),r(pi,"0 items to scroll: Not scrolling.");for(r(pi,"Scrolling "+e+" items backward."),bi.first+=e;bi.first>=bi.total;)bi.first-=bi.total;ri.circular||(bi.first==0&&f.onEnd&&f.onEnd.call(nr,"prev"),ri.infinite||g(ri,bi.first,pi));ai.children().slice(bi.total-e,bi.total).prependTo(ai);bi.total<ri.items.visible+e&&ai.children().slice(0,ri.items.visible+e-bi.total).clone(!0).appendTo(ai);var o=ai.children(),kt=gr(o,ri,e),yt=nu(o,ri),it=o.eq(e-1),ct=kt.last(),ft=yt.last();h(o,ri);ot=0;lt=0;ri.align&&(gt=ti(yt,ri),ot=gt[0],lt=gt[1]);var fr=ot<0?ri.padding[ri.d[3]]:0,wt=!1,ci=n();ri.items.visible<e&&(ci=o.slice(ri.items.visibleConf.old,e),f.fx=="directscroll"&&(or=ri.items[ri.d.width],wt=ci,it=ft,ei(wt),ri.items[ri.d.width]="variable"));var s=!1,sr=v(o.slice(0,e),ri,"width"),at=ni(dt(yt,ri,!0),ri,!ri.usePadding),hr=0,ht={},li={},vt={},yi={},wi={},cr={},lr={},ki=hi(f,ri,e,sr);switch(f.fx){case"cover":case"cover-fade":hr=v(o.slice(0,ri.items.visible),ri,"width")}wt&&(ri.items[ri.d.width]=or);h(o,ri,!0);lt>=0&&h(ct,ri,ri.padding[ri.d[1]]);ot>=0&&h(it,ri,ri.padding[ri.d[3]]);ri.align&&(ri.padding[ri.d[1]]=lt,ri.padding[ri.d[3]]=ot);cr[ri.d.left]=-(sr-fr);lr[ri.d.left]=-(hr-fr);li[ri.d.left]=at[ri.d.width];var di=function(){},rt=function(){},y=function(){},ar=function(){},p=function(){},vr=function(){},b=function(){},yr=function(){},c=function(){},l=function(){},nt=function(){};switch(f.fx){case"crossfade":case"cover":case"cover-fade":case"uncover":case"uncover-fade":s=ai.clone(!0).appendTo(er)}switch(f.fx){case"crossfade":case"uncover":case"uncover-fade":s.children().slice(0,e).remove();s.children().slice(ri.items.visibleConf.old).remove();break;case"cover":case"cover-fade":s.children().slice(ri.items.visible).remove();s.css(lr)}if(ai.css(cr),gi=ut(ki,f.easing,pi),ht[ri.d.left]=ri.usePadding?ri.padding[ri.d[3]]:0,(ri[ri.d.width]=="variable"||ri[ri.d.height]=="variable")&&(di=function(){er.css(at)},rt=function(){gi.anims.push([er,at])}),ri.usePadding){ft.not(it).length&&(vt[ri.d.marginRight]=it.data("_cfs_origCssMargin"),ot<0?it.css(vt):(b=function(){it.css(vt)},yr=function(){gi.anims.push([it,vt])}));switch(f.fx){case"cover":case"cover-fade":s.children().eq(e-1).css(vt)}ft.not(ct).length&&(yi[ri.d.marginRight]=ct.data("_cfs_origCssMargin"),y=function(){ct.css(yi)},ar=function(){gi.anims.push([ct,yi])});lt>=0&&(wi[ri.d.marginRight]=ft.data("_cfs_origCssMargin")+ri.padding[ri.d[1]],p=function(){ft.css(wi)},vr=function(){gi.anims.push([ft,wi])})}nt=function(){ai.css(ht)};bt=ri.items.visible+e-bi.total;l=function(){if(bt>0&&(ai.children().slice(bi.total).remove(),kt=n(ai.children().slice(bi.total-(ri.items.visible-bt)).get().concat(ai.children().slice(0,bt).get()))),oi(wt),ri.usePadding){var t=ai.children().eq(ri.items.visible+e-1);t.css(ri.d.marginRight,t.data("_cfs_origCssMargin"))}};tr=si(kt,ci,yt,e,"prev",ki,at);c=function(){ui(ai,s,f);ir.isScrolling=!1;vu.onAfter=et(nr,f,"onAfter",tr,vu);yu=fi(ai,yu,pi);ir.isPaused||ai.trigger(t("play",pi))};ir.isScrolling=!0;ru=d(ru);vu.onBefore=et(nr,f,"onBefore",tr,vu);switch(f.fx){case"none":ai.css(ht);di();y();p();b();nt();l();c();break;case"fade":gi.anims.push([ai,{opacity:0},function(){di();y();p();b();nt();l();gi=ut(ki,f.easing,pi);gi.anims.push([ai,{opacity:1},c]);k(gi,pi)}]);break;case"crossfade":ai.css({opacity:0});gi.anims.push([s,{opacity:0}]);gi.anims.push([ai,{opacity:1},c]);rt();y();p();b();nt();l();break;case"cover":gi.anims.push([s,ht,function(){y();p();b();nt();l();c()}]);rt();break;case"cover-fade":gi.anims.push([ai,{opacity:0}]);gi.anims.push([s,ht,function(){y();p();b();nt();l();c()}]);rt();break;case"uncover":gi.anims.push([s,li,c]);rt();y();p();b();nt();l();break;case"uncover-fade":ai.css({opacity:0});gi.anims.push([ai,{opacity:1}]);gi.anims.push([s,li,c]);rt();y();p();b();nt();l();break;default:gi.anims.push([ai,ht,function(){l();c()}]);rt();ar();vr();yr()}return k(gi,pi),rr(ri.cookie,ai,pi),ai.trigger(t("updatePageStatus",pi),[!1,at]),!0});ai.bind(t("slide_next",pi),function(u,f,e){var o,ft,nt,s,ht,vt,gt,at,yt,cr,tr,ur,fr,or;if(u.stopPropagation(),o=ai.children(),!ri.circular&&bi.first==ri.items.visible)return ri.infinite&&ai.trigger(t("prev",pi),bi.total-1),u.stopImmediatePropagation();if(h(o,ri),i(e)||(ri.items.filter!="*"?(nt=i(f.items)?f.items:vi(ai,ri),e=dr(o,ri,0,nt)):e=ri.items.visible,e=ii(e,ri,f.items,nr)),ft=bi.first==0?bi.total:bi.first,ri.circular||(ri.items.visibleConf.variable?(s=w(o,ri,e),nt=pt(o,ri,ft-1)):(s=ri.items.visible,nt=ri.items.visible),e+s>ft&&(e=ft-nt)),ri.items.visibleConf.old=ri.items.visible,ri.items.visibleConf.variable){for(s=a(yi(o,ri,e,ft),ri,ri.items.visibleConf.adjust,nr);ri.items.visible-e>=s&&e<bi.total;)e++,s=a(yi(o,ri,e,ft),ri,ri.items.visibleConf.adjust,nr);ri.items.visible=s}else ri.items.filter!="*"&&(s=st(o,ri,e),ri.items.visible=a(s,ri,ri.items.visibleConf.adjust,nr));if(h(o,ri,!0),e==0)return u.stopImmediatePropagation(),r(pi,"0 items to scroll: Not scrolling.");for(r(pi,"Scrolling "+e+" items forward."),bi.first-=e;bi.first<0;)bi.first+=bi.total;ri.circular||(bi.first==ri.items.visible&&f.onEnd&&f.onEnd.call(nr,"next"),ri.infinite||g(ri,bi.first,pi));bi.total<ri.items.visible+e&&ai.children().slice(0,ri.items.visible+e-bi.total).clone(!0).appendTo(ai);var o=ai.children(),sr=tu(o,ri),ct=iu(o,ri,e),lt=o.eq(e-1),ot=sr.last(),hr=ct.last();h(o,ri);ht=0;vt=0;ri.align&&(gt=ti(ct,ri),ht=gt[0],vt=gt[1]);at=!1;yt=n();ri.items.visibleConf.old<e&&(yt=o.slice(ri.items.visibleConf.old,e),f.fx=="directscroll"&&(cr=ri.items[ri.d.width],at=yt,lt=ot,ei(at),ri.items[ri.d.width]="variable"));var y=!1,lr=v(o.slice(0,e),ri,"width"),wt=ni(dt(ct,ri,!0),ri,!ri.usePadding),ar=0,bt={},ci={},li={},wi={},kt={},ki=hi(f,ri,e,lr);switch(f.fx){case"uncover":case"uncover-fade":ar=v(o.slice(0,ri.items.visibleConf.old),ri,"width")}at&&(ri.items[ri.d.width]=cr);ri.align&&ri.padding[ri.d[1]]<0&&(ri.padding[ri.d[1]]=0);h(o,ri,!0);h(ot,ri,ri.padding[ri.d[1]]);ri.align&&(ri.padding[ri.d[1]]=vt,ri.padding[ri.d[3]]=ht);kt[ri.d.left]=ri.usePadding?ri.padding[ri.d[3]]:0;var di=function(){},it=function(){},p=function(){},vr=function(){},b=function(){},yr=function(){},c=function(){},l=function(){},rt=function(){};switch(f.fx){case"crossfade":case"cover":case"cover-fade":case"uncover":case"uncover-fade":y=ai.clone(!0).appendTo(er);y.children().slice(ri.items.visibleConf.old).remove()}switch(f.fx){case"crossfade":case"cover":case"cover-fade":ai.css("zIndex",1);y.css("zIndex",0)}gi=ut(ki,f.easing,pi);bt[ri.d.left]=-lr;ci[ri.d.left]=-ar;ht<0&&(bt[ri.d.left]+=ht);(ri[ri.d.width]=="variable"||ri[ri.d.height]=="variable")&&(di=function(){er.css(wt)},it=function(){gi.anims.push([er,wt])});ri.usePadding&&(tr=hr.data("_cfs_origCssMargin"),vt>=0&&(tr+=ri.padding[ri.d[1]]),hr.css(ri.d.marginRight,tr),lt.not(ot).length&&(wi[ri.d.marginRight]=ot.data("_cfs_origCssMargin")),p=function(){ot.css(wi)},vr=function(){gi.anims.push([ot,wi])},ur=lt.data("_cfs_origCssMargin"),ht>0&&(ur+=ri.padding[ri.d[3]]),li[ri.d.marginRight]=ur,b=function(){lt.css(li)},yr=function(){gi.anims.push([lt,li])});rt=function(){ai.css(kt)};fr=ri.items.visible+e-bi.total;l=function(){var n,t;fr>0&&ai.children().slice(bi.total).remove();n=ai.children().slice(0,e).appendTo(ai).last();fr>0&&(ct=tt(o,ri));oi(at);ri.usePadding&&(bi.total<ri.items.visible+e&&(t=ai.children().eq(ri.items.visible-1),t.css(ri.d.marginRight,t.data("_cfs_origCssMargin")+ri.padding[ri.d[1]])),n.css(ri.d.marginRight,n.data("_cfs_origCssMargin")))};or=si(sr,yt,ct,e,"next",ki,wt);c=function(){ai.css("zIndex",ai.data("_cfs_origCssZindex"));ui(ai,y,f);ir.isScrolling=!1;vu.onAfter=et(nr,f,"onAfter",or,vu);yu=fi(ai,yu,pi);ir.isPaused||ai.trigger(t("play",pi))};ir.isScrolling=!0;ru=d(ru);vu.onBefore=et(nr,f,"onBefore",or,vu);switch(f.fx){case"none":ai.css(bt);di();p();b();rt();l();c();break;case"fade":gi.anims.push([ai,{opacity:0},function(){di();p();b();rt();l();gi=ut(ki,f.easing,pi);gi.anims.push([ai,{opacity:1},c]);k(gi,pi)}]);break;case"crossfade":ai.css({opacity:0});gi.anims.push([y,{opacity:0}]);gi.anims.push([ai,{opacity:1},c]);it();p();b();rt();l();break;case"cover":ai.css(ri.d.left,er[ri.d.width]());gi.anims.push([ai,kt,c]);it();p();b();l();break;case"cover-fade":ai.css(ri.d.left,er[ri.d.width]());gi.anims.push([y,{opacity:0}]);gi.anims.push([ai,kt,c]);it();p();b();l();break;case"uncover":gi.anims.push([y,ci,c]);it();p();b();rt();l();break;case"uncover-fade":ai.css({opacity:0});gi.anims.push([ai,{opacity:1}]);gi.anims.push([y,ci,c]);it();p();b();rt();l();break;default:gi.anims.push([ai,bt,function(){rt();l();c()}]);it();vr();yr()}return k(gi,pi),rr(ri.cookie,ai,pi),ai.trigger(t("updatePageStatus",pi),[!1,wt]),!0});ai.bind(t("slideTo",pi),function(n,i,r,u,f,e,o){n.stopPropagation();var c=[i,r,u,f,e,o],h=b(c,["string/number/object","number","boolean","object","string","function"]);return(f=h[3],e=h[4],o=h[5],i=nt(h[0],h[1],h[2],bi,ai),i==0)?!1:(s(f)||(f=!1),e!="prev"&&e!="next"&&(e=ri.circular?i<=bi.total/2?"next":"prev":bi.first==0||bi.first>i?"next":"prev"),e=="prev"&&(i=bi.total-i),ai.trigger(t(e,pi),[f,i,o]),!0)});ai.bind(t("prevPage",pi),function(n,i,r){n.stopPropagation();var u=ai.triggerHandler(t("currentPage",pi));return ai.triggerHandler(t("slideToPage",pi),[u-1,i,"prev",r])});ai.bind(t("nextPage",pi),function(n,i,r){n.stopPropagation();var u=ai.triggerHandler(t("currentPage",pi));return ai.triggerHandler(t("slideToPage",pi),[u+1,i,"next",r])});ai.bind(t("slideToPage",pi),function(n,r,u,f,e){n.stopPropagation();i(r)||(r=ai.triggerHandler(t("currentPage",pi)));var o=ri.pagination.items||ri.items.visible,s=Math.ceil(bi.total/o)-1;return r<0&&(r=s),r>s&&(r=0),ai.triggerHandler(t("slideTo",pi),[r*o,0,!0,u,f,e])});ai.bind(t("jumpToStart",pi),function(n,t){if(n.stopPropagation(),t=t?nt(t,0,!0,bi,ai):0,t+=bi.first,t!=0){if(bi.total>0)while(t>bi.total)t-=bi.total;ai.prepend(ai.children().slice(t,bi.total))}return!0});ai.bind(t("synchronise",pi),function(n,i){var e,f,u,o;if(n.stopPropagation(),i)i=tr(i);else if(ri.synchronise)i=ri.synchronise;else return r(pi,"No carousel to synchronise.");for(e=ai.triggerHandler(t("currentPosition",pi)),f=!0,u=0,o=i.length;u<o;u++)i[u][0].triggerHandler(t("slideTo",pi),[e,i[u][3],!0])||(f=!1);return f});ai.bind(t("queue",pi),function(n,t,i){return n.stopPropagation(),u(t)?t.call(nr,yu):y(t)?yu=t:o(t)||yu.push([t,i]),yu});ai.bind(t("insertItem",pi),function(i,u,f,h,l){var p,v,y;i.stopPropagation();var w=[u,f,h,l],a=b(w,["string/object","string/number/object","boolean","number"]);return(u=a[0],f=a[1],h=a[2],l=a[3],s(u)&&!c(u)?u=n(u):e(u)&&(u=n(u)),!c(u)||u.length==0)?r(pi,"Not a valid object."):(o(f)&&(f="end"),wt(u,ri),ht(u),p=f,v="before",f=="end"?h?(bi.first==0?(f=bi.total-1,v="after"):(f=bi.first,bi.first+=u.length),f<0&&(f=0)):(f=bi.total-1,v="after"):f=nt(f,l,h,bi,ai),y=ai.children().eq(f),y.length?y[v](u):(r(pi,"Correct insert-position not found! Appending item to the end."),ai.append(u)),p=="end"||h||f<bi.first&&(bi.first+=u.length),bi.total=ai.children().length,bi.first>=bi.total&&(bi.first-=bi.total),ai.trigger(t("updateSizes",pi)),ai.trigger(t("linkAnchors",pi)),!0)});ai.bind(t("removeItem",pi),function(i,r,u,f){var c,e;i.stopPropagation();var h=[r,u,f],s=b(h,["string/number/object","boolean","number"]);return(r=s[0],u=s[1],f=s[2],c=!1,r instanceof n&&r.length>1)?(e=n(),r.each(function(){var i=ai.trigger(t("removeItem",pi),[n(this),u,f]);i&&(e=e.add(i))}),e):(o(r)||r=="end"?e=ai.children().last():(r=nt(r,f,u,bi,ai),e=ai.children().eq(r),e.length&&r<bi.first&&(bi.first-=e.length)),e&&e.length&&(e.detach(),bi.total=ai.children().length,ai.trigger(t("updateSizes",pi))),e)});ai.bind(t("onBefore",pi)+" "+t("onAfter",pi),function(n,t){n.stopPropagation();var i=n.type.slice(pi.events.prefix.length);return y(t)&&(vu[i]=t),u(t)&&vu[i].push(t),vu[i]});ai.bind(t("currentPosition",pi),function(n,t){var i;return n.stopPropagation(),i=bi.first==0?0:bi.total-bi.first,u(t)&&t.call(nr,i),i});ai.bind(t("currentPage",pi),function(n,t){n.stopPropagation();var r=ri.pagination.items||ri.items.visible,f=Math.ceil(bi.total/r-1),i;return i=bi.first==0?0:bi.first<bi.total%r?0:bi.first!=r||ri.circular?Math.round((bi.total-bi.first)/r):f,i<0&&(i=0),i>f&&(i=f),u(t)&&t.call(nr,i),i});ai.bind(t("currentVisible",pi),function(n,t){n.stopPropagation();var i=tt(ai.children(),ri);return u(t)&&t.call(nr,i),i});ai.bind(t("slice",pi),function(t,r,f,e){var s,h;if(t.stopPropagation(),bi.total==0)return!1;var c=[r,f,e],o=b(c,["number","number","function"]);if(r=i(o[0])?o[0]:0,f=i(o[1])?o[1]:bi.total,e=o[2],r+=bi.first,f+=bi.first,items.total>0){while(r>bi.total)r-=bi.total;while(f>bi.total)f-=bi.total;while(r<0)r+=bi.total;while(f<0)f+=bi.total}return s=ai.children(),h=f>r?s.slice(r,f):n(s.slice(r,bi.total).get().concat(s.slice(0,f).get())),u(e)&&e.call(nr,h),h});ai.bind(t("isPaused",pi)+" "+t("isStopped",pi)+" "+t("isScrolling",pi),function(n,t){n.stopPropagation();var r=n.type.slice(pi.events.prefix.length),i=ir[r];return u(t)&&t.call(nr,i),i});ai.bind(t("configuration",pi),function(e,a,b,c){var reInit,val,sz;if(e.stopPropagation(),reInit=!1,u(a))a.call(nr,ri);else if(s(a))bu=n.extend(!0,{},bu,a),b!==!1?reInit=!0:ri=n.extend(!0,{},ri,a);else if(!o(a))if(u(b))val=eval("opts."+a),o(val)&&(val=""),b.call(nr,val);else{if(o(b))return eval("opts."+a);typeof c!="boolean"&&(c=!0);eval("opts_orig."+a+" = b");c!==!1?reInit=!0:eval("opts."+a+" = b")}return reInit&&(h(ai.children(),ri),au._init(bu),au._bind_buttons(),sz=kt(ai,ri),ai.trigger(t("updatePageStatus",pi),[!0,sz])),ri});ai.bind(t("linkAnchors",pi),function(i,u,f){return(i.stopPropagation(),o(u)?u=n("body"):e(u)&&(u=n(u)),!c(u)||u.length==0)?r(pi,"Not a valid object."):(e(f)||(f="a.caroufredsel"),u.find(f).each(function(){var i=this.hash||"";i.length>0&&ai.children().index(n(i))!=-1&&n(this).unbind("click").click(function(n){n.preventDefault();ai.trigger(t("slideTo",pi),i)})}),!0)});ai.bind(t("updatePageStatus",pi),function(i,r){var f,e,u;if(i.stopPropagation(),ri.pagination.container)return f=ri.pagination.items||ri.items.visible,e=Math.ceil(bi.total/f),r&&(ri.pagination.anchorBuilder&&(ri.pagination.container.children().remove(),ri.pagination.container.each(function(){for(var i,t=0;t<e;t++)i=ai.children().eq(nt(t*f,0,!0,bi,ai)),n(this).append(ri.pagination.anchorBuilder.call(i[0],t+1))})),ri.pagination.container.each(function(){n(this).children().unbind(ri.pagination.event).each(function(i){n(this).bind(ri.pagination.event,function(n){n.preventDefault();ai.trigger(t("slideTo",pi),[i*f,-ri.pagination.deviation,!0,ri.pagination])})})})),u=ai.triggerHandler(t("currentPage",pi))+ri.pagination.deviation,u>=e&&(u=0),u<0&&(u=e-1),ri.pagination.container.each(function(){n(this).children().removeClass(l("selected",pi)).eq(u).addClass(l("selected",pi))}),!0});ai.bind(t("updateSizes",pi),function(){var i=ri.items.visible,n=ai.children(),f=ki(er,ri,"width"),u,e;return bi.total=n.length,ir.primarySizePercentage?(ri.maxDimension=f,ri[ri.d.width]=gt(f,ir.primarySizePercentage)):ri.maxDimension=di(ri,f),ri.responsive?(ri.items.width=ri.items.sizesConf.width,ri.items.height=ri.items.sizesConf.height,ri=fr(ri,n,f),i=ri.items.visible,wi(ri,n)):ri.items.visibleConf.variable?i=w(n,ri,0):ri.items.filter!="*"&&(i=st(n,ri,0)),!ri.circular&&bi.first!=0&&i>bi.first&&(u=ri.items.visibleConf.variable?pt(n,ri,bi.first)-bi.first:ri.items.filter!="*"?br(n,ri,bi.first)-bi.first:ri.items.visible-bi.first,r(pi,"Preventing non-circular: sliding "+u+" items backward."),ai.trigger(t("prev",pi),u)),ri.items.visible=a(i,ri,ri.items.visibleConf.adjust,nr),ri.items.visibleConf.old=ri.items.visible,ri=ur(ri,n),e=kt(ai,ri),ai.trigger(t("updatePageStatus",pi),[!0,e]),vt(ri,bi.total,pi),g(ri,bi.first,pi),e});ai.bind(t("destroy",pi),function(n,i){return n.stopPropagation(),ru=d(ru),ai.data("_cfs_isCarousel",!1),ai.trigger(t("finish",pi)),i&&ai.trigger(t("jumpToStart",pi)),bt(ai.children()),bt(ai),au._unbind_events(),au._unbind_buttons(),pi.wrapper=="parent"?bt(er):er.replaceWith(ai),!0});ai.bind(t("debug",pi),function(){return r(pi,"Carousel width: "+ri.width),r(pi,"Carousel height: "+ri.height),r(pi,"Item widths: "+ri.items.width),r(pi,"Item heights: "+ri.items.height),r(pi,"Number of items visible: "+ri.items.visible),ri.auto.play&&r(pi,"Number of items scrolled automatically: "+ri.auto.items),ri.prev.button&&r(pi,"Number of items scrolled backward: "+ri.prev.items),ri.next.button&&r(pi,"Number of items scrolled forward: "+ri.next.items),pi.debug});ai.bind("_cfs_triggerEvent",function(n,i,r){return n.stopPropagation(),ai.triggerHandler(t(i,pi),r)})};au._unbind_events=function(){ai.unbind(t("",pi));ai.unbind(t("",pi,!1));ai.unbind("_cfs_triggerEvent")};au._bind_buttons=function(){var i,u,a,v,o,s;if(au._unbind_buttons(),vt(ri,bi.total,pi),g(ri,bi.first,pi),ri.auto.pauseOnHover&&(i=it(ri.auto.pauseOnHover),er.bind(t("mouseenter",pi,!1),function(){ai.trigger(t("pause",pi),i)}).bind(t("mouseleave",pi,!1),function(){ai.trigger(t("resume",pi))})),ri.auto.button&&ri.auto.button.bind(t(ri.auto.event,pi,!1),function(n){n.preventDefault();var i=!1,r=null;ir.isPaused?i="play":ri.auto.pauseOnEvent&&(i="pause",r=it(ri.auto.pauseOnEvent));i&&ai.trigger(t(i,pi),r)}),ri.prev.button&&(ri.prev.button.bind(t(ri.prev.event,pi,!1),function(n){n.preventDefault();ai.trigger(t("prev",pi))}),ri.prev.pauseOnHover&&(i=it(ri.prev.pauseOnHover),ri.prev.button.bind(t("mouseenter",pi,!1),function(){ai.trigger(t("pause",pi),i)}).bind(t("mouseleave",pi,!1),function(){ai.trigger(t("resume",pi))}))),ri.next.button&&(ri.next.button.bind(t(ri.next.event,pi,!1),function(n){n.preventDefault();ai.trigger(t("next",pi))}),ri.next.pauseOnHover&&(i=it(ri.next.pauseOnHover),ri.next.button.bind(t("mouseenter",pi,!1),function(){ai.trigger(t("pause",pi),i)}).bind(t("mouseleave",pi,!1),function(){ai.trigger(t("resume",pi))}))),ri.pagination.container&&ri.pagination.pauseOnHover&&(i=it(ri.pagination.pauseOnHover),ri.pagination.container.bind(t("mouseenter",pi,!1),function(){ai.trigger(t("pause",pi),i)}).bind(t("mouseleave",pi,!1),function(){ai.trigger(t("resume",pi))})),(ri.prev.key||ri.next.key)&&n(document).bind(t("keyup",pi,!1,!0,!0),function(n){var i=n.keyCode;i==ri.next.key&&(n.preventDefault(),ai.trigger(t("next",pi)));i==ri.prev.key&&(n.preventDefault(),ai.trigger(t("prev",pi)))}),ri.pagination.keys&&n(document).bind(t("keyup",pi,!1,!0,!0),function(n){var i=n.keyCode;i>=49&&i<58&&(i=(i-49)*ri.items.visible,i<=bi.total&&(n.preventDefault(),ai.trigger(t("slideTo",pi),[i,0,!0,ri.pagination])))}),n.fn.swipe&&(u="ontouchstart"in window,u&&ri.swipe.onTouch||!u&&ri.swipe.onMouse)){var y=n.extend(!0,{},ri.prev,ri.swipe),p=n.extend(!0,{},ri.next,ri.swipe),c=function(){ai.trigger(t("prev",pi),[y])},l=function(){ai.trigger(t("next",pi),[p])};switch(ri.direction){case"up":case"down":ri.swipe.options.swipeUp=l;ri.swipe.options.swipeDown=c;break;default:ri.swipe.options.swipeLeft=l;ri.swipe.options.swipeRight=c}ir.swipe&&ai.swipe("destroy");er.swipe(ri.swipe.options);er.css("cursor","move");ir.swipe=!0}if(n.fn.mousewheel&&ri.mousewheel&&(a=n.extend(!0,{},ri.prev,ri.mousewheel),v=n.extend(!0,{},ri.next,ri.mousewheel),ir.mousewheel&&er.unbind(t("mousewheel",pi,!1)),er.bind(t("mousewheel",pi,!1),function(n,i){n.preventDefault();i>0?ai.trigger(t("prev",pi),[a]):ai.trigger(t("next",pi),[v])}),ir.mousewheel=!0),ri.auto.play&&ai.trigger(t("play",pi),ri.auto.delay),ir.upDateOnWindowResize){var f=function(){ai.trigger(t("finish",pi));ri.auto.pauseOnResize&&!ir.isPaused&&ai.trigger(t("play",pi));h(ai.children(),ri);ai.trigger(t("updateSizes",pi))},e=n(window),r=null;n.debounce&&pi.onWindowResize=="debounce"?r=n.debounce(200,f):n.throttle&&pi.onWindowResize=="throttle"?r=n.throttle(300,f):(o=0,s=0,r=function(){var n=e.width(),t=e.height();(n!=o||t!=s)&&(f(),o=n,s=t)});e.bind(t("resize",pi,!1,!0,!0),r)}};au._unbind_buttons=function(){var r=t("",pi),i=t("",pi,!1);ns3=t("",pi,!1,!0,!0);n(document).unbind(ns3);n(window).unbind(ns3);er.unbind(i);ri.auto.button&&ri.auto.button.unbind(i);ri.prev.button&&ri.prev.button.unbind(i);ri.next.button&&ri.next.button.unbind(i);ri.pagination.container&&(ri.pagination.container.unbind(i),ri.pagination.anchorBuilder&&ri.pagination.container.children().remove());ir.swipe&&(ai.swipe("destroy"),er.css("cursor","default"),ir.swipe=!1);ir.mousewheel&&(ir.mousewheel=!1);vt(ri,"hide",pi);g(ri,"removeClass",pi)};f(yt)&&(yt={debug:yt});var ir={direction:"next",isPaused:!0,isScrolling:!1,isStopped:!1,mousewheel:!1,swipe:!1},bi={total:ai.children().length,first:0},ru={auto:null,progress:null,startTime:p(),timePassed:0},gi={isStopped:!1,duration:0,startTime:0,easing:"",anims:[]},vu={onBefore:[],onAfter:[]},yu=[],pi=n.extend(!0,{},n.fn.carouFredSel.configs,yt),ri={},bu=n.extend(!0,{},ct),er=pi.wrapper=="parent"?ai.parent():ai.wrap("<"+pi.wrapper.element+' class="'+pi.wrapper.classname+'" />').parent();if(pi.selector=ai.selector,pi.serialNumber=n.fn.carouFredSel.serialNumber++,pi.transition=pi.transition&&n.fn.transition?"transition":"animate",au._init(bu,!0,gu),au._build(),au._bind_events(),au._bind_buttons(),y(ri.items.start)?pu=ri.items.start:(pu=[],ri.items.start!=0&&pu.push(ri.items.start)),ri.cookie&&pu.unshift(parseInt(eu(ri.cookie),10)),pu.length>0)for(ku=0,nf=pu.length;ku<nf;ku++)if(wu=pu[ku],wu!=0){if(wu===!0){if(wu=window.location.hash,wu.length<1)continue}else wu==="random"&&(wu=Math.floor(Math.random()*bi.total));if(ai.triggerHandler(t("slideTo",pi),[wu,0,!0,{fx:"none"}]))break}return du=kt(ai,ri),tf=tt(ai.children(),ri),ri.onCreate&&ri.onCreate.call(nr,{width:du.width,height:du.height,items:tf}),ai.trigger(t("updatePageStatus",pi),[!0,du]),ai.trigger(t("linkAnchors",pi)),pi.debug&&ai.trigger(t("debug",pi)),ai},n.fn.carouFredSel.serialNumber=1,n.fn.carouFredSel.defaults={synchronise:!1,infinite:!0,circular:!0,responsive:!1,direction:"left",items:{start:0},scroll:{easing:"swing",duration:500,pauseOnHover:!1,event:"click",queue:!1}},n.fn.carouFredSel.configs={debug:!1,transition:!1,onWindowResize:"throttle",events:{prefix:"",namespace:"cfs"},wrapper:{element:"div",classname:"caroufredsel_wrapper"},classnames:{}},n.fn.carouFredSel.pageAnchorBuilder=function(n){return'<a href="#"><span>'+n+"<\/span><\/a>"},n.fn.carouFredSel.progressbarUpdater=function(t){n(this).css("width",t+"%")},n.fn.carouFredSel.cookie={get:function(n){var r,i,u,t;for(n+="=",r=document.cookie.split(";"),i=0,u=r.length;i<u;i++){for(t=r[i];t.charAt(0)==" ";)t=t.slice(1);if(t.indexOf(n)==0)return t.slice(n.length)}return 0},set:function(n,t,i){var u="",r;i&&(r=new Date,r.setTime(r.getTime()+i*864e5),u="; expires="+r.toGMTString());document.cookie=n+"="+t+u+"; path=/"},remove:function(t){n.fn.carouFredSel.cookie.set(t,"",-1)}},n.extend(n.easing,{quadratic:function(n){var t=n*n;return n*(-t*n+4*t-6*n+4)},cubic:function(n){return n*(4*n*n-9*n+6)},elastic:function(n){var t=n*n;return n*(33*t*t-106*t*n+126*t-67*n+15)}}))}(jQuery),function(n){function i(t){var i=t||window.event,e=[].slice.call(arguments,1),r=0,f=0,u=0;return t=n.event.fix(i),t.type="mousewheel",i.wheelDelta&&(r=i.wheelDelta/120),i.detail&&(r=-i.detail/3),u=r,i.axis!==undefined&&i.axis===i.HORIZONTAL_AXIS&&(u=0,f=-1*r),i.wheelDeltaY!==undefined&&(u=i.wheelDeltaY/120),i.wheelDeltaX!==undefined&&(f=i.wheelDeltaX/-120),e.unshift(t,r,f,u),(n.event.dispatch||n.event.handle).apply(this,e)}var t=["DOMMouseScroll","mousewheel"],r;if(n.event.fixHooks)for(r=t.length;r;)n.event.fixHooks[t[--r]]=n.event.mouseHooks;n.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var n=t.length;n;)this.addEventListener(t[--n],i,!1);else this.onmousewheel=i},teardown:function(){if(this.removeEventListener)for(var n=t.length;n;)this.removeEventListener(t[--n],i,!1);else this.onmousewheel=null}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})}(jQuery),function(n){var i={init:function(t){var i={set_width:!1,set_height:!1,horizontalScroll:!1,scrollInertia:950,mouseWheel:!0,mouseWheelPixels:"auto",autoDraggerLength:!0,autoHideScrollbar:!1,alwaysShowScrollbar:!1,snapAmount:null,snapOffset:0,scrollButtons:{enable:!1,scrollType:"continuous",scrollSpeed:"auto",scrollAmount:40},advanced:{updateOnBrowserResize:!0,updateOnContentResize:!1,autoExpandHorizontalScroll:!1,autoScrollOnFocus:!0,normalizeMouseWheelDelta:!1},contentTouchScroll:!0,callbacks:{onScrollStart:function(){},onScroll:function(){},onTotalScroll:function(){},onTotalScrollBack:function(){},onTotalScrollOffset:0,onTotalScrollBackOffset:0,whileScrolling:function(){}},theme:"light"},t=n.extend(!0,i,t);return this.each(function(){var i=n(this),y,r,h,u,f,o,l,a,v,w,s;t.set_width&&i.css("width",t.set_width);t.set_height&&i.css("height",t.set_height);n(document).data("mCustomScrollbar-index")?(y=parseInt(n(document).data("mCustomScrollbar-index")),n(document).data("mCustomScrollbar-index",y+1)):n(document).data("mCustomScrollbar-index","1");i.wrapInner("<div class='mCustomScrollBox mCS-"+t.theme+"' id='mCSB_"+n(document).data("mCustomScrollbar-index")+"' style='position:relative; height:100%; overflow:hidden; max-width:100%;' />").addClass("mCustomScrollbar _mCS_"+n(document).data("mCustomScrollbar-index"));r=i.children(".mCustomScrollBox");t.horizontalScroll?(r.addClass("mCSB_horizontal").wrapInner("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />"),h=r.children(".mCSB_h_wrapper"),h.wrapInner("<div class='mCSB_container' style='position:absolute; left:0;' />").children(".mCSB_container").css({width:h.children().outerWidth(),position:"relative"}).unwrap()):r.wrapInner("<div class='mCSB_container' style='position:relative; top:0;' />");u=r.children(".mCSB_container");n.support.touch&&u.addClass("mCS_touch");u.after("<div class='mCSB_scrollTools' style='position:absolute;'><div class='mCSB_draggerContainer'><div class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' style='position:relative;'><\/div><\/div><div class='mCSB_draggerRail'><\/div><\/div><\/div>");var c=r.children(".mCSB_scrollTools"),p=c.children(".mCSB_draggerContainer"),e=p.children(".mCSB_dragger");t.horizontalScroll?e.data("minDraggerWidth",e.width()):e.data("minDraggerHeight",e.height());t.scrollButtons.enable&&(t.horizontalScroll?c.prepend("<a class='mCSB_buttonLeft' oncontextmenu='return false;'><\/a>").append("<a class='mCSB_buttonRight' oncontextmenu='return false;'><\/a>"):c.prepend("<a class='mCSB_buttonUp' oncontextmenu='return false;'><\/a>").append("<a class='mCSB_buttonDown' oncontextmenu='return false;'><\/a>"));r.bind("scroll",function(){i.is(".mCS_disabled")||r.scrollTop(0).scrollLeft(0)});i.data({mCS_Init:!0,mCustomScrollbarIndex:n(document).data("mCustomScrollbar-index"),horizontalScroll:t.horizontalScroll,scrollInertia:t.scrollInertia,scrollEasing:"mcsEaseOut",mouseWheel:t.mouseWheel,mouseWheelPixels:t.mouseWheelPixels,autoDraggerLength:t.autoDraggerLength,autoHideScrollbar:t.autoHideScrollbar,alwaysShowScrollbar:t.alwaysShowScrollbar,snapAmount:t.snapAmount,snapOffset:t.snapOffset,scrollButtons_enable:t.scrollButtons.enable,scrollButtons_scrollType:t.scrollButtons.scrollType,scrollButtons_scrollSpeed:t.scrollButtons.scrollSpeed,scrollButtons_scrollAmount:t.scrollButtons.scrollAmount,autoExpandHorizontalScroll:t.advanced.autoExpandHorizontalScroll,autoScrollOnFocus:t.advanced.autoScrollOnFocus,normalizeMouseWheelDelta:t.advanced.normalizeMouseWheelDelta,contentTouchScroll:t.contentTouchScroll,onScrollStart_Callback:t.callbacks.onScrollStart,onScroll_Callback:t.callbacks.onScroll,onTotalScroll_Callback:t.callbacks.onTotalScroll,onTotalScrollBack_Callback:t.callbacks.onTotalScrollBack,onTotalScroll_Offset:t.callbacks.onTotalScrollOffset,onTotalScrollBack_Offset:t.callbacks.onTotalScrollBackOffset,whileScrolling_Callback:t.callbacks.whileScrolling,bindEvent_scrollbar_drag:!1,bindEvent_content_touch:!1,bindEvent_scrollbar_click:!1,bindEvent_mousewheel:!1,bindEvent_buttonsContinuous_y:!1,bindEvent_buttonsContinuous_x:!1,bindEvent_buttonsPixels_y:!1,bindEvent_buttonsPixels_x:!1,bindEvent_focusin:!1,bindEvent_autoHideScrollbar:!1,mCSB_buttonScrollRight:!1,mCSB_buttonScrollLeft:!1,mCSB_buttonScrollDown:!1,mCSB_buttonScrollUp:!1});t.horizontalScroll?i.css("max-width")!=="none"&&(t.advanced.updateOnContentResize||(t.advanced.updateOnContentResize=!0)):i.css("max-height")!=="none"&&(f=!1,o=parseInt(i.css("max-height")),i.css("max-height").indexOf("%")>=0&&(f=o,o=i.parent().height()*f/100),i.css("overflow","hidden"),r.css("max-height",o));i.mCustomScrollbar("update");t.advanced.updateOnBrowserResize&&(a=n(window).width(),v=n(window).height(),n(window).bind("resize."+i.data("mCustomScrollbarIndex"),function(){l&&clearTimeout(l);l=setTimeout(function(){if(!i.is(".mCS_disabled")&&!i.is(".mCS_destroyed")){var t=n(window).width(),u=n(window).height();(a!==t||v!==u)&&(i.css("max-height")!=="none"&&f&&r.css("max-height",i.parent().height()*f/100),i.mCustomScrollbar("update"),a=t,v=u)}},150)}));t.advanced.updateOnContentResize&&(s=t.horizontalScroll?u.outerWidth():u.outerHeight(),w=setInterval(function(){var n;t.horizontalScroll?(t.advanced.autoExpandHorizontalScroll&&u.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:u.outerWidth(),position:"relative"}).unwrap(),n=u.outerWidth()):n=u.outerHeight();n!=s&&(i.mCustomScrollbar("update"),s=n)},300))})},update:function(){var i=n(this),u=i.children(".mCustomScrollBox"),r=u.children(".mCSB_container"),l,o,a,b,it,rt,c,v,k,ut,ft,s,h;r.removeClass("mCS_no_scrollbar");i.removeClass("mCS_disabled mCS_destroyed");u.scrollTop(0).scrollLeft(0);var f=u.children(".mCSB_scrollTools"),e=f.children(".mCSB_draggerContainer"),t=e.children(".mCSB_dragger");if(i.data("horizontalScroll")){var d=f.children(".mCSB_buttonLeft"),g=f.children(".mCSB_buttonRight"),y=u.width();i.data("autoExpandHorizontalScroll")&&r.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:r.outerWidth(),position:"relative"}).unwrap();l=r.outerWidth()}else var nt=f.children(".mCSB_buttonUp"),tt=f.children(".mCSB_buttonDown"),p=u.height(),w=r.outerHeight();w>p&&!i.data("horizontalScroll")?(f.css("display","block"),o=e.height(),i.data("autoDraggerLength")&&(a=Math.round(p/w*o),b=t.data("minDraggerHeight"),a<=b?t.css({height:b}):a>=o-10?(it=o-10,t.css({height:it})):t.css({height:a}),t.children(".mCSB_dragger_bar").css({"line-height":t.height()+"px"})),rt=t.height(),s=(w-p)/(o-rt),i.data("scrollAmount",s).mCustomScrollbar("scrolling",u,r,e,t,nt,tt,d,g),h=Math.abs(r.position().top),i.mCustomScrollbar("scrollTo",h,{scrollInertia:0,trigger:"internal"})):l>y&&i.data("horizontalScroll")?(f.css("display","block"),c=e.width(),i.data("autoDraggerLength")&&(v=Math.round(y/l*c),k=t.data("minDraggerWidth"),v<=k?t.css({width:k}):v>=c-10?(ut=c-10,t.css({width:ut})):t.css({width:v})),ft=t.width(),s=(l-y)/(c-ft),i.data("scrollAmount",s).mCustomScrollbar("scrolling",u,r,e,t,nt,tt,d,g),h=Math.abs(r.position().left),i.mCustomScrollbar("scrollTo",h,{scrollInertia:0,trigger:"internal"})):(u.unbind("mousewheel focusin"),i.data("horizontalScroll")?t.add(r).css("left",0):t.add(r).css("top",0),i.data("alwaysShowScrollbar")?i.data("horizontalScroll")?i.data("horizontalScroll")&&t.css({width:e.width()}):t.css({height:e.height()}):(f.css("display","none"),r.addClass("mCS_no_scrollbar")),i.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1}))},scrolling:function(i,r,u,f,e,o,s,h){function ut(n,t,i,r){c.data("horizontalScroll")?c.mCustomScrollbar("scrollTo",f.position().left-t+r,{moveDragger:!0,trigger:"internal"}):c.mCustomScrollbar("scrollTo",f.position().top-n+i,{moveDragger:!0,trigger:"internal"})}var c=n(this),v,y,tt,it,rt,l,p,a,w,b,ft,et,d,g,ot,st;if(c.data("bindEvent_scrollbar_drag")||(n.support.pointer?(tt="pointerdown",it="pointermove",rt="pointerup"):n.support.msPointer&&(tt="MSPointerDown",it="MSPointerMove",rt="MSPointerUp"),n.support.pointer||n.support.msPointer?(f.bind(tt,function(t){t.preventDefault();c.data({on_drag:!0});f.addClass("mCSB_dragger_onDrag");var i=n(this),e=i.offset(),r=t.originalEvent.pageX-e.left,u=t.originalEvent.pageY-e.top;r<i.width()&&r>0&&u<i.height()&&u>0&&(v=u,y=r)}),n(document).bind(it+"."+c.data("mCustomScrollbarIndex"),function(n){if(n.preventDefault(),c.data("on_drag")){var i=f,t=i.offset(),r=n.originalEvent.pageX-t.left,u=n.originalEvent.pageY-t.top;ut(v,y,u,r)}}).bind(rt+"."+c.data("mCustomScrollbarIndex"),function(){c.data({on_drag:!1});f.removeClass("mCSB_dragger_onDrag")})):(f.bind("mousedown touchstart",function(t){var e,i,r,u,o;t.preventDefault();t.stopImmediatePropagation();e=n(this);i=e.offset();t.type==="touchstart"?(o=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],r=o.pageX-i.left,u=o.pageY-i.top):(c.data({on_drag:!0}),f.addClass("mCSB_dragger_onDrag"),r=t.pageX-i.left,u=t.pageY-i.top);r<e.width()&&r>0&&u<e.height()&&u>0&&(v=u,y=r)}).bind("touchmove",function(t){t.preventDefault();t.stopImmediatePropagation();var i=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],u=n(this),r=u.offset(),f=i.pageX-r.left,e=i.pageY-r.top;ut(v,y,e,f)}),n(document).bind("mousemove."+c.data("mCustomScrollbarIndex"),function(n){if(c.data("on_drag")){var i=f,t=i.offset(),r=n.pageX-t.left,u=n.pageY-t.top;ut(v,y,u,r)}}).bind("mouseup."+c.data("mCustomScrollbarIndex"),function(){c.data({on_drag:!1});f.removeClass("mCSB_dragger_onDrag")})),c.data({bindEvent_scrollbar_drag:!0})),n.support.touch&&c.data("contentTouchScroll")&&(c.data("bindEvent_content_touch")||(r.bind("touchstart",function(t){t.stopImmediatePropagation();l=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];p=n(this);a=p.offset();b=l.pageX-a.left;w=l.pageY-a.top;ft=w;et=b}),r.bind("touchmove",function(t){t.preventDefault();t.stopImmediatePropagation();l=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];p=n(this).parent();a=p.offset();b=l.pageX-a.left;w=l.pageY-a.top;c.data("horizontalScroll")?c.mCustomScrollbar("scrollTo",et-b,{trigger:"internal"}):c.mCustomScrollbar("scrollTo",ft-w,{trigger:"internal"})}))),c.data("bindEvent_scrollbar_click")||(u.bind("click",function(t){var i=(t.pageY-u.offset().top)*c.data("scrollAmount"),r=n(t.target);c.data("horizontalScroll")&&(i=(t.pageX-u.offset().left)*c.data("scrollAmount"));(r.hasClass("mCSB_draggerContainer")||r.hasClass("mCSB_draggerRail"))&&c.mCustomScrollbar("scrollTo",i,{trigger:"internal",scrollEasing:"draggerRailEase"})}),c.data({bindEvent_scrollbar_click:!0})),c.data("mouseWheel")&&(c.data("bindEvent_mousewheel")||(i.bind("mousewheel",function(n,t){var o,i=c.data("mouseWheelPixels"),s=Math.abs(r.position().top),e=f.position().top,h=u.height()-f.height();c.data("normalizeMouseWheelDelta")&&(t=t<0?-1:1);i==="auto"&&(i=100+Math.round(c.data("scrollAmount")/2));c.data("horizontalScroll")&&(e=f.position().left,h=u.width()-f.width(),s=Math.abs(r.position().left));(t>0&&e!==0||t<0&&e!==h)&&(n.preventDefault(),n.stopImmediatePropagation());o=s-t*i;c.mCustomScrollbar("scrollTo",o,{trigger:"internal"})}),c.data({bindEvent_mousewheel:!0}))),c.data("scrollButtons_enable"))if(c.data("scrollButtons_scrollType")==="pixels"){c.data("horizontalScroll")?(h.add(s).unbind("mousedown touchstart MSPointerDown pointerdown mouseup MSPointerUp pointerup mouseout MSPointerOut pointerout touchend",d,g),c.data({bindEvent_buttonsContinuous_x:!1}),c.data("bindEvent_buttonsPixels_x")||(h.bind("click",function(n){n.preventDefault();k(Math.abs(r.position().left)+c.data("scrollButtons_scrollAmount"))}),s.bind("click",function(n){n.preventDefault();k(Math.abs(r.position().left)-c.data("scrollButtons_scrollAmount"))}),c.data({bindEvent_buttonsPixels_x:!0}))):(o.add(e).unbind("mousedown touchstart MSPointerDown pointerdown mouseup MSPointerUp pointerup mouseout MSPointerOut pointerout touchend",d,g),c.data({bindEvent_buttonsContinuous_y:!1}),c.data("bindEvent_buttonsPixels_y")||(o.bind("click",function(n){n.preventDefault();k(Math.abs(r.position().top)+c.data("scrollButtons_scrollAmount"))}),e.bind("click",function(n){n.preventDefault();k(Math.abs(r.position().top)-c.data("scrollButtons_scrollAmount"))}),c.data({bindEvent_buttonsPixels_y:!0})));function k(n){f.data("preventAction")||(f.data("preventAction",!0),c.mCustomScrollbar("scrollTo",n,{trigger:"internal"}))}}else{c.data("horizontalScroll")?(h.add(s).unbind("click"),c.data({bindEvent_buttonsPixels_x:!1}),c.data("bindEvent_buttonsContinuous_x")||(h.bind("mousedown touchstart MSPointerDown pointerdown",function(n){n.preventDefault();var t=nt();c.data({mCSB_buttonScrollRight:setInterval(function(){c.mCustomScrollbar("scrollTo",Math.abs(r.position().left)+t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})}),d=function(n){n.preventDefault();clearInterval(c.data("mCSB_buttonScrollRight"))},h.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",d),s.bind("mousedown touchstart MSPointerDown pointerdown",function(n){n.preventDefault();var t=nt();c.data({mCSB_buttonScrollLeft:setInterval(function(){c.mCustomScrollbar("scrollTo",Math.abs(r.position().left)-t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})}),g=function(n){n.preventDefault();clearInterval(c.data("mCSB_buttonScrollLeft"))},s.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",g),c.data({bindEvent_buttonsContinuous_x:!0}))):(o.add(e).unbind("click"),c.data({bindEvent_buttonsPixels_y:!1}),c.data("bindEvent_buttonsContinuous_y")||(o.bind("mousedown touchstart MSPointerDown pointerdown",function(n){n.preventDefault();var t=nt();c.data({mCSB_buttonScrollDown:setInterval(function(){c.mCustomScrollbar("scrollTo",Math.abs(r.position().top)+t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})}),ot=function(n){n.preventDefault();clearInterval(c.data("mCSB_buttonScrollDown"))},o.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",ot),e.bind("mousedown touchstart MSPointerDown pointerdown",function(n){n.preventDefault();var t=nt();c.data({mCSB_buttonScrollUp:setInterval(function(){c.mCustomScrollbar("scrollTo",Math.abs(r.position().top)-t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})}),st=function(n){n.preventDefault();clearInterval(c.data("mCSB_buttonScrollUp"))},e.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",st),c.data({bindEvent_buttonsContinuous_y:!0})));function nt(){var n=c.data("scrollButtons_scrollSpeed");return c.data("scrollButtons_scrollSpeed")==="auto"&&(n=Math.round((c.data("scrollInertia")+100)/40)),n}}c.data("autoScrollOnFocus")&&(c.data("bindEvent_focusin")||(i.bind("focusin",function(){var t;if(i.scrollTop(0).scrollLeft(0),t=n(document.activeElement),t.is("input,textarea,select,button,a[tabindex],area,object")){var f=r.position().top,u=t.position().top,e=i.height()-t.outerHeight();c.data("horizontalScroll")&&(f=r.position().left,u=t.position().left,e=i.width()-t.outerWidth());(f+u<0||f+u>e)&&c.mCustomScrollbar("scrollTo",u,{trigger:"internal"})}}),c.data({bindEvent_focusin:!0})));c.data("autoHideScrollbar")&&!c.data("alwaysShowScrollbar")&&(c.data("bindEvent_autoHideScrollbar")||(i.bind("mouseenter",function(){i.addClass("mCS-mouse-over");t.showScrollbar.call(i.children(".mCSB_scrollTools"))}).bind("mouseleave touchend",function(n){i.removeClass("mCS-mouse-over");n.type==="mouseleave"&&t.hideScrollbar.call(i.children(".mCSB_scrollTools"))}),c.data({bindEvent_autoHideScrollbar:!0})))},scrollTo:function(i,r){function h(n){if(u.data("mCustomScrollbarIndex")){this.mcs={top:f.position().top,left:f.position().left,draggerTop:s.position().top,draggerLeft:s.position().left,topPct:Math.round(100*Math.abs(f.position().top)/Math.abs(f.outerHeight()-o.height())),leftPct:Math.round(100*Math.abs(f.position().left)/Math.abs(f.outerWidth()-o.width()))};switch(n){case"onScrollStart":u.data("mCS_tweenRunning",!0).data("onScrollStart_Callback").call(u,this.mcs);break;case"whileScrolling":u.data("whileScrolling_Callback").call(u,this.mcs);break;case"onScroll":u.data("onScroll_Callback").call(u,this.mcs);break;case"onTotalScrollBack":u.data("onTotalScrollBack_Callback").call(u,this.mcs);break;case"onTotalScroll":u.data("onTotalScroll_Callback").call(u,this.mcs)}}}var u=n(this),d={moveDragger:!1,trigger:"external",callbacks:!0,scrollInertia:u.data("scrollInertia"),scrollEasing:u.data("scrollEasing")},r=n.extend(d,r),e,o=u.children(".mCustomScrollBox"),f=o.children(".mCSB_container"),v=o.children(".mCSB_scrollTools"),y=v.children(".mCSB_draggerContainer"),s=y.children(".mCSB_dragger"),k=draggerSpeed=r.scrollInertia,w,l,b,a,p,c;f.hasClass("mCS_no_scrollbar")||(u.data({mCS_trigger:r.trigger}),u.data("mCS_Init")&&(r.callbacks=!1),(i||i===0)&&(typeof i=="number"?r.moveDragger?(e=i,i=u.data("horizontalScroll")?s.position().left*u.data("scrollAmount"):s.position().top*u.data("scrollAmount"),draggerSpeed=0):e=i/u.data("scrollAmount"):typeof i=="string"&&(p=i==="top"?0:i!=="bottom"||u.data("horizontalScroll")?i==="left"?0:i==="right"&&u.data("horizontalScroll")?f.outerWidth()-o.width():i==="first"?u.find(".mCSB_container").find(":first"):i==="last"?u.find(".mCSB_container").find(":last"):u.find(i):f.outerHeight()-o.height(),p.length===1?(i=u.data("horizontalScroll")?p.position().left:p.position().top,e=i/u.data("scrollAmount")):e=i=p),u.data("horizontalScroll")?(u.data("onTotalScrollBack_Offset")&&(l=-u.data("onTotalScrollBack_Offset")),u.data("onTotalScroll_Offset")&&(a=o.width()-f.outerWidth()+u.data("onTotalScroll_Offset")),e<0?(e=i=0,clearInterval(u.data("mCSB_buttonScrollLeft")),l||(w=!0)):e>=y.width()-s.width()?(e=y.width()-s.width(),i=o.width()-f.outerWidth(),clearInterval(u.data("mCSB_buttonScrollRight")),a||(b=!0)):i=-i,c=u.data("snapAmount"),c&&(i=Math.round(i/c)*c-u.data("snapOffset")),t.mTweenAxis.call(this,s[0],"left",Math.round(e),draggerSpeed,r.scrollEasing),t.mTweenAxis.call(this,f[0],"left",Math.round(i),k,r.scrollEasing,{onStart:function(){r.callbacks&&!u.data("mCS_tweenRunning")&&h("onScrollStart");u.data("autoHideScrollbar")&&!u.data("alwaysShowScrollbar")&&t.showScrollbar.call(v)},onUpdate:function(){r.callbacks&&h("whileScrolling")},onComplete:function(){r.callbacks&&(h("onScroll"),(w||l&&f.position().left>=l)&&h("onTotalScrollBack"),(b||a&&f.position().left<=a)&&h("onTotalScroll"));s.data("preventAction",!1);u.data("mCS_tweenRunning",!1);u.data("autoHideScrollbar")&&!u.data("alwaysShowScrollbar")&&(o.hasClass("mCS-mouse-over")||t.hideScrollbar.call(v))}})):(u.data("onTotalScrollBack_Offset")&&(l=-u.data("onTotalScrollBack_Offset")),u.data("onTotalScroll_Offset")&&(a=o.height()-f.outerHeight()+u.data("onTotalScroll_Offset")),e<0?(e=i=0,clearInterval(u.data("mCSB_buttonScrollUp")),l||(w=!0)):e>=y.height()-s.height()?(e=y.height()-s.height(),i=o.height()-f.outerHeight(),clearInterval(u.data("mCSB_buttonScrollDown")),a||(b=!0)):i=-i,c=u.data("snapAmount"),c&&(i=Math.round(i/c)*c-u.data("snapOffset")),t.mTweenAxis.call(this,s[0],"top",Math.round(e),draggerSpeed,r.scrollEasing),t.mTweenAxis.call(this,f[0],"top",Math.round(i),k,r.scrollEasing,{onStart:function(){r.callbacks&&!u.data("mCS_tweenRunning")&&h("onScrollStart");u.data("autoHideScrollbar")&&!u.data("alwaysShowScrollbar")&&t.showScrollbar.call(v)},onUpdate:function(){r.callbacks&&h("whileScrolling")},onComplete:function(){r.callbacks&&(h("onScroll"),(w||l&&f.position().top>=l)&&h("onTotalScrollBack"),(b||a&&f.position().top<=a)&&h("onTotalScroll"));s.data("preventAction",!1);u.data("mCS_tweenRunning",!1);u.data("autoHideScrollbar")&&!u.data("alwaysShowScrollbar")&&(o.hasClass("mCS-mouse-over")||t.hideScrollbar.call(v))}})),u.data("mCS_Init")&&u.data({mCS_Init:!1})))},stop:function(){var i=n(this),r=i.children().children(".mCSB_container"),u=i.children().children().children().children(".mCSB_dragger");t.mTweenAxisStop.call(this,r[0]);t.mTweenAxisStop.call(this,u[0])},disable:function(t){var r=n(this),u=r.children(".mCustomScrollBox"),i=u.children(".mCSB_container"),f=u.children(".mCSB_scrollTools"),e=f.children().children(".mCSB_dragger");u.unbind("mousewheel focusin mouseenter mouseleave touchend");i.unbind("touchstart touchmove");t&&(r.data("horizontalScroll")?e.add(i).css("left",0):e.add(i).css("top",0));f.css("display","none");i.addClass("mCS_no_scrollbar");r.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1,bindEvent_content_touch:!1,bindEvent_autoHideScrollbar:!1}).addClass("mCS_disabled")},destroy:function(){var t=n(this);t.removeClass("mCustomScrollbar _mCS_"+t.data("mCustomScrollbarIndex")).addClass("mCS_destroyed").children().children(".mCSB_container").unwrap().children().unwrap().siblings(".mCSB_scrollTools").remove();n(document).unbind("mousemove."+t.data("mCustomScrollbarIndex")+" mouseup."+t.data("mCustomScrollbarIndex")+" MSPointerMove."+t.data("mCustomScrollbarIndex")+" MSPointerUp."+t.data("mCustomScrollbarIndex"));n(window).unbind("resize."+t.data("mCustomScrollbarIndex"))}},t={showScrollbar:function(){this.stop().animate({opacity:1},"fast")},hideScrollbar:function(){this.stop().animate({opacity:0},"fast")},mTweenAxis:function(n,t,i,r,u,f){function l(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()}function a(){e||y.call();e=l()-b;v();e>=n._time&&(n._time=e>n._time?e+o-(e-n._time):e+o-1,n._time<e+1&&(n._time=e+1));n._time<r?n._id=_request(a):w.call()}function v(){r>0?(n.currVal=g(n._time,s,c,r,u),h[t]=Math.round(n.currVal)+"px"):h[t]=i+"px";p.call()}function k(){o=1e3/60;n._time=e+o;_request=window.requestAnimationFrame?window.requestAnimationFrame:function(n){return v(),setTimeout(n,.01)};n._id=_request(a)}function d(){n._id!=null&&(window.requestAnimationFrame?window.cancelAnimationFrame(n._id):clearTimeout(n._id),n._id=null)}function g(n,t,i,r,u){switch(u){case"linear":return i*n/r+t;case"easeOutQuad":return n/=r,-i*n*(n-2)+t;case"easeInOutQuad":return(n/=r/2,n<1)?i/2*n*n+t:(n--,-i/2*(n*(n-2)-1)+t);case"easeOutCubic":return n/=r,n--,i*(n*n*n+1)+t;case"easeOutQuart":return n/=r,n--,-i*(n*n*n*n-1)+t;case"easeOutQuint":return n/=r,n--,i*(n*n*n*n*n+1)+t;case"easeOutCirc":return n/=r,n--,i*Math.sqrt(1-n*n)+t;case"easeOutSine":return i*Math.sin(n/r*(Math.PI/2))+t;case"easeOutExpo":return i*(-Math.pow(2,-10*n/r)+1)+t;case"mcsEaseOut":var f=(n/=r)*n,e=f*n;return t+i*(.499999999999997*e*f+-2.5*f*f+5.5*e+-6.5*f+4*n);case"draggerRailEase":return(n/=r/2,n<1)?i/2*n*n*n+t:(n-=2,i/2*(n*n*n+2)+t)}}var f=f||{},y=f.onStart||function(){},p=f.onUpdate||function(){},w=f.onComplete||function(){},b=l(),o,e=0,s=n.offsetTop,h=n.style,c;t==="left"&&(s=n.offsetLeft);c=i-s;d();k()},mTweenAxisStop:function(n){n._id!=null&&(window.requestAnimationFrame?window.cancelAnimationFrame(n._id):clearTimeout(n._id),n._id=null)},rafPolyfill:function(){for(var n=["ms","moz","webkit","o"],t=n.length;--t>-1&&!window.requestAnimationFrame;)window.requestAnimationFrame=window[n[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[t]+"CancelAnimationFrame"]||window[n[t]+"CancelRequestAnimationFrame"]}},r;t.rafPolyfill.call();n.support.touch=!!("ontouchstart"in window);n.support.pointer=window.navigator.pointerEnabled;n.support.msPointer=window.navigator.msPointerEnabled;r="https:"==document.location.protocol?"https:":"http:";n.event.special.mousewheel||document.write('<script src="'+r+'//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.0.6/jquery.mousewheel.min.js"><\/script>');n.fn.mCustomScrollbar=function(t){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist");else return i.init.apply(this,arguments)}}(jQuery),function(n){"use strict";var t={init:function(i){var r=this;if(!r.data("jqv")||r.data("jqv")==null){i=t._saveOptions(r,i);n(document).on("click",".formError",function(){n(this).fadeOut(150,function(){n(this).parent(".formErrorOuter").remove();n(this).remove()})})}return this},attach:function(i){var r=this,u;if(u=i?t._saveOptions(r,i):r.data("jqv"),u.validateAttribute=r.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class",u.binded){r.on(u.validationEventTrigger,"["+u.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",t._onFieldEvent);r.on("click","["+u.validateAttribute+"*=validate][type=checkbox],["+u.validateAttribute+"*=validate][type=radio]",t._onFieldEvent);r.on(u.validationEventTrigger,"["+u.validateAttribute+"*=validate][class*=datepicker]",{delay:300},t._onFieldEvent)}u.autoPositionUpdate&&n(window).bind("resize",{noAnimation:!0,formElem:r},t.updatePromptsPosition);r.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",t._submitButtonClick);r.removeData("jqv_submitButton");r.on("submit",t._onSubmitEvent);return this},detach:function(){var i=this,r=i.data("jqv");return i.off(r.validationEventTrigger,"["+r.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",t._onFieldEvent),i.off("click","["+r.validateAttribute+"*=validate][type=checkbox],["+r.validateAttribute+"*=validate][type=radio]",t._onFieldEvent),i.off(r.validationEventTrigger,"["+r.validateAttribute+"*=validate][class*=datepicker]",t._onFieldEvent),i.off("submit",t._onSubmitEvent),i.removeData("jqv"),i.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",t._submitButtonClick),i.removeData("jqv_submitButton"),r.autoPositionUpdate&&n(window).off("resize",t.updatePromptsPosition),this},validate:function(){var r=n(this),u=null,i;if(r.is("form")||r.hasClass("validationEngineContainer")){if(r.hasClass("validating"))return!1;r.addClass("validating");i=r.data("jqv");u=t._validateFields(this);setTimeout(function(){r.removeClass("validating")},100);u&&i.onSuccess?i.onSuccess():!u&&i.onFailure&&i.onFailure()}else if(r.is("form")||r.hasClass("validationEngineContainer"))r.removeClass("validating");else{var f=r.closest("form, .validationEngineContainer"),i=f.data("jqv")?f.data("jqv"):n.validationEngine.defaults,u=t._validateField(r,i);u&&i.onFieldSuccess?i.onFieldSuccess():i.onFieldFailure&&i.InvalidFields.length>0&&i.onFieldFailure()}return i.onValidationComplete?!!i.onValidationComplete(f,u):u},updatePromptsPosition:function(i){var f,r,u;return i&&this==window?(r=i.data.formElem,f=i.data.noAnimation):r=n(this.closest("form, .validationEngineContainer")),u=r.data("jqv"),r.find("["+u.validateAttribute+"*=validate]").not(":disabled").each(function(){var i=n(this),e,o;u.prettySelect&&i.is(":hidden")&&(i=r.find("#"+u.usePrefix+i.attr("id")+u.useSuffix));e=t._getPrompt(i);o=n(e).find(".formErrorContent").html();e&&t._updatePrompt(i,n(e),o,undefined,!1,u,f)}),this},showPrompt:function(n,i,r,u){var e=this.closest("form, .validationEngineContainer"),f=e.data("jqv");return f||(f=t._saveOptions(this,f)),r&&(f.promptPosition=r),f.showArrow=u==!0,t._showPrompt(this,n,i,!1,f),this},hide:function(){var u=n(this).closest("form, .validationEngineContainer"),i=u.data("jqv"),f=i&&i.fadeDuration?i.fadeDuration:.3,r;return r=n(this).is("form")||n(this).hasClass("validationEngineContainer")?"parentForm"+t._getClassName(n(this).attr("id")):t._getClassName(n(this).attr("id"))+"formError",n("."+r).fadeTo(f,.3,function(){n(this).parent(".formErrorOuter").remove();n(this).remove()}),this},hideAll:function(){var i=this,t=i.data("jqv"),r=t?t.fadeDuration:300;return n(".formError").fadeTo(r,300,function(){n(this).parent(".formErrorOuter").remove();n(this).remove()}),this},_onFieldEvent:function(i){var u=n(this),f=u.closest("form, .validationEngineContainer"),r=f.data("jqv");r.eventTrigger="field";window.setTimeout(function(){t._validateField(u,r);r.InvalidFields.length==0&&r.onFieldSuccess?r.onFieldSuccess():r.InvalidFields.length>0&&r.onFieldFailure&&r.onFieldFailure()},i.data?i.data.delay:0)},_onSubmitEvent:function(){var i=n(this),r=i.data("jqv"),u,f;return i.data("jqv_submitButton")&&(u=n("#"+i.data("jqv_submitButton")),u&&u.length>0&&(u.hasClass("validate-skip")||u.attr("data-validation-engine-skip")=="true"))?!0:(r.eventTrigger="submit",f=t._validateFields(i),f&&r.ajaxFormValidation)?(t._validateFormWithAjax(i,r),!1):r.onValidationComplete?!!r.onValidationComplete(i,f):f},_checkAjaxStatus:function(t){var i=!0;return n.each(t.ajaxValidCache,function(n,t){if(!t)return i=!1,!1}),i},_checkAjaxFieldStatus:function(n,t){return t.ajaxValidCache[n]==!0},_validateFields:function(i){var r=i.data("jqv"),e=!1,u,h,s,c,l,a;if(i.trigger("jqv.form.validating"),u=null,i.find("["+r.validateAttribute+"*=validate]").not(":disabled").each(function(){var f=n(this),o=[];if(n.inArray(f.attr("name"),o)<0&&((e|=t._validateField(f,r),e&&u==null&&(f.is(":hidden")&&r.prettySelect?u=f=i.find("#"+r.usePrefix+t._jqSelector(f.attr("id"))+r.useSuffix):(f.data("jqv-prompt-at")instanceof jQuery?f=f.data("jqv-prompt-at"):f.data("jqv-prompt-at")&&(f=n(f.data("jqv-prompt-at"))),u=f)),r.doNotShowAllErrosOnSubmit)||(o.push(f.attr("name")),r.showOneMessage==!0&&e)))return!1}),i.trigger("jqv.form.result",[e]),e){if(r.scroll){var o=u.offset().top,v=u.offset().left,f=r.promptPosition;if(typeof f=="string"&&f.indexOf(":")!=-1&&(f=f.substring(0,f.indexOf(":"))),f!="bottomRight"&&f!="bottomLeft"&&(h=t._getPrompt(u),h&&(o=h.offset().top)),r.scrollOffset&&(o-=r.scrollOffset),r.isOverflown){if(s=n(r.overflownDIV),!s.length)return!1;c=s.scrollTop();l=-parseInt(s.offset().top);o+=c+l-5;a=n(r.overflownDIV+":not(:animated)");a.animate({scrollTop:o},1100,function(){r.focusFirstField&&u.focus()})}else n("html, body").animate({scrollTop:o},1100,function(){r.focusFirstField&&u.focus()}),n("html, body").animate({scrollLeft:v},1100)}else r.focusFirstField&&u.focus();return!1}return!0},_validateFormWithAjax:function(i,r){var f=i.serialize(),e=r.ajaxFormValidationMethod?r.ajaxFormValidationMethod:"GET",o=r.ajaxFormValidationURL?r.ajaxFormValidationURL:i.attr("action"),u=r.dataType?r.dataType:"json";n.ajax({type:e,url:o,cache:!1,dataType:u,data:f,form:i,methods:t,options:r,beforeSend:function(){return r.onBeforeAjaxFormValidation(i,r)},error:function(n,i){if(r.onFailure)r.onFailure(n,i);else t._ajaxError(n,i)},success:function(f){var c,s,e,o;if(u=="json"&&f!==!0){for(c=!1,s=0;s<f.length;s++){var l=f[s],a=l[0],h=n(n("#"+a)[0]);h.length==1&&(e=l[2],l[1]==!0?e!=""&&e?(r.allrules[e]&&(o=r.allrules[e].alertTextOk,o&&(e=o)),r.showPrompts&&t._showPrompt(h,e,"pass",!1,r,!0)):t._closePrompt(h):(c|=!0,r.allrules[e]&&(o=r.allrules[e].alertText,o&&(e=o)),r.showPrompts&&t._showPrompt(h,e,"",!1,r,!0)))}r.onAjaxFormComplete(!c,i,f,r)}else r.onAjaxFormComplete(!0,i,f,r)}})},_validateField:function(i,r,u){var g,a,s,f,y,p,o,w,h,b,k,rt,d;if((i.attr("id")||(i.attr("id","form-validation-field-"+n.validationEngine.fieldIdCounter),++n.validationEngine.fieldIdCounter),!r.validateNonVisibleFields&&(i.is(":hidden")&&!r.prettySelect||i.parent().is(":hidden")))||(g=i.attr(r.validateAttribute),a=/validate\[(.*)\]/.exec(g),!a))return!1;var ut=a[1],e=ut.split(/\[|,|\]/),nt=!1,l=i.attr("name"),v="",tt="",c=!1,it=!1;for(r.isError=!1,r.showArrow=!0,r.maxErrorsPerField>0&&(it=!0),s=n(i.closest("form, .validationEngineContainer")),f=0;f<e.length;f++)e[f]=e[f].replace(" ",""),e[f]===""&&delete e[f];for(f=0,y=0;f<e.length;f++){if(it&&y>=r.maxErrorsPerField){c||(p=n.inArray("required",e),c=p!=-1&&p>=f);break}o=undefined;switch(e[f]){case"required":c=!0;o=t._getErrorMessage(s,i,e[f],e,f,r,t._required);break;case"custom":o=t._getErrorMessage(s,i,e[f],e,f,r,t._custom);break;case"groupRequired":h="["+r.validateAttribute+"*="+e[f+1]+"]";w=s.find(h).eq(0);w[0]!=i[0]&&(t._validateField(w,r,u),r.showArrow=!0);o=t._getErrorMessage(s,i,e[f],e,f,r,t._groupRequired);o&&(c=!0);r.showArrow=!1;break;case"ajax":o=t._ajax(i,e,f,r);o&&(tt="load");break;case"minSize":o=t._getErrorMessage(s,i,e[f],e,f,r,t._minSize);break;case"maxSize":o=t._getErrorMessage(s,i,e[f],e,f,r,t._maxSize);break;case"min":o=t._getErrorMessage(s,i,e[f],e,f,r,t._min);break;case"max":o=t._getErrorMessage(s,i,e[f],e,f,r,t._max);break;case"past":o=t._getErrorMessage(s,i,e[f],e,f,r,t._past);break;case"future":o=t._getErrorMessage(s,i,e[f],e,f,r,t._future);break;case"dateRange":h="["+r.validateAttribute+"*="+e[f+1]+"]";r.firstOfGroup=s.find(h).eq(0);r.secondOfGroup=s.find(h).eq(1);(r.firstOfGroup[0].value||r.secondOfGroup[0].value)&&(o=t._getErrorMessage(s,i,e[f],e,f,r,t._dateRange));o&&(c=!0);r.showArrow=!1;break;case"dateTimeRange":h="["+r.validateAttribute+"*="+e[f+1]+"]";r.firstOfGroup=s.find(h).eq(0);r.secondOfGroup=s.find(h).eq(1);(r.firstOfGroup[0].value||r.secondOfGroup[0].value)&&(o=t._getErrorMessage(s,i,e[f],e,f,r,t._dateTimeRange));o&&(c=!0);r.showArrow=!1;break;case"maxCheckbox":i=n(s.find("input[name='"+l+"']"));o=t._getErrorMessage(s,i,e[f],e,f,r,t._maxCheckbox);break;case"minCheckbox":i=n(s.find("input[name='"+l+"']"));o=t._getErrorMessage(s,i,e[f],e,f,r,t._minCheckbox);break;case"equals":o=t._getErrorMessage(s,i,e[f],e,f,r,t._equals);break;case"funcCall":o=t._getErrorMessage(s,i,e[f],e,f,r,t._funcCall);break;case"creditCard":o=t._getErrorMessage(s,i,e[f],e,f,r,t._creditCard);break;case"condRequired":o=t._getErrorMessage(s,i,e[f],e,f,r,t._condRequired);o!==undefined&&(c=!0)}if(b=!1,typeof o=="object")switch(o.status){case"_break":b=!0;break;case"_error":o=o.message;break;case"_error_no_prompt":return!0}if(b)break;typeof o=="string"&&(v+=o+"<br/>",r.isError=!0,y++)}if(!c&&!i.val()&&i.val().length<1&&n.inArray("equals",e)<0&&(r.isError=!1),k=i.prop("type"),rt=i.data("promptPosition")||r.promptPosition,(k=="radio"||k=="checkbox")&&s.find("input[name='"+l+"']").size()>1&&(i=rt==="inline"?n(s.find("input[name='"+l+"'][type!=hidden]:last")):n(s.find("input[name='"+l+"'][type!=hidden]:first")),r.showArrow=r.showArrowOnRadioAndCheckbox),i.is(":hidden")&&r.prettySelect&&(i=s.find("#"+r.usePrefix+t._jqSelector(i.attr("id"))+r.useSuffix)),r.isError&&r.showPrompts?t._showPrompt(i,v,tt,!1,r):nt||t._closePrompt(i),nt||i.trigger("jqv.field.result",[i,r.isError,v]),d=n.inArray(i[0],r.InvalidFields),d==-1?r.isError&&r.InvalidFields.push(i[0]):r.isError||r.InvalidFields.splice(d,1),t._handleStatusCssClasses(i,r),r.isError&&r.onFieldFailure)r.onFieldFailure(i);if(!r.isError&&r.onFieldSuccess)r.onFieldSuccess(i);return r.isError},_handleStatusCssClasses:function(n,t){t.addSuccessCssClassToField&&n.removeClass(t.addSuccessCssClassToField);t.addFailureCssClassToField&&n.removeClass(t.addFailureCssClassToField);t.addSuccessCssClassToField&&!t.isError&&n.addClass(t.addSuccessCssClassToField);t.addFailureCssClassToField&&t.isError&&n.addClass(t.addFailureCssClassToField)},_getErrorMessage:function(i,r,u,f,e,o,s){var l=jQuery.inArray(u,f),a,c;(u==="custom"||u==="funcCall")&&(a=f[l+1],u=u+"["+a+"]",delete f[l]);var v=u,y=r.attr("data-validation-engine")?r.attr("data-validation-engine"):r.attr("class"),p=y.split(" "),h;return h=u=="future"||u=="past"||u=="maxCheckbox"||u=="minCheckbox"?s(i,r,f,e,o):s(r,f,e,o),h!=undefined&&(c=t._getCustomErrorMessage(n(r),p,v,o),c&&(h=c)),h},_getCustomErrorMessage:function(n,i,r,u){var f=!1,h=/^custom\[.*\]$/.test(r)?t._validityProp.custom:t._validityProp[r],e,o,s;if(h!=undefined&&(f=n.attr("data-errormessage-"+h),f!=undefined)||(f=n.attr("data-errormessage"),f!=undefined))return f;if(e="#"+n.attr("id"),typeof u.custom_error_messages[e]!="undefined"&&typeof u.custom_error_messages[e][r]!="undefined")f=u.custom_error_messages[e][r].message;else if(i.length>0)for(o=0;o<i.length&&i.length>0;o++)if(s="."+i[o],typeof u.custom_error_messages[s]!="undefined"&&typeof u.custom_error_messages[s][r]!="undefined"){f=u.custom_error_messages[s][r].message;break}return f||typeof u.custom_error_messages[r]=="undefined"||typeof u.custom_error_messages[r].message=="undefined"||(f=u.custom_error_messages[r].message),f},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(t,i,r,u,f){var o,s;switch(t.prop("type")){case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:var e=n.trim(t.val()),h=n.trim(t.attr("data-validation-placeholder")),c=n.trim(t.attr("placeholder"));if(!e||h&&e==h||c&&e==c)return u.allrules[i[r]].alertText;break;case"radio":case"checkbox":if(f){if(!t.attr("checked"))return u.allrules[i[r]].alertTextCheckboxMultiple;break}if(o=t.closest("form, .validationEngineContainer"),s=t.attr("name"),o.find("input[name='"+s+"']:checked").size()==0)return o.find("input[name='"+s+"']:visible").size()==1?u.allrules[i[r]].alertTextCheckboxe:u.allrules[i[r]].alertTextCheckboxMultiple}},_groupRequired:function(i,r,u,f){var o="["+f.validateAttribute+"*="+r[u+1]+"]",e=!1;return i.closest("form, .validationEngineContainer").find(o).each(function(){if(!t._required(n(this),r,u,f))return e=!0,!1}),e?void 0:f.allrules[r[u]].alertText},_custom:function(n,t,i,r){var u=t[i+1],f=r.allrules[u],e,o,s;if(!f){alert("jqv:custom rule not found - "+u);return}if(f.regex){if(o=f.regex,!o){alert("jqv:custom regex not found - "+u);return}if(s=new RegExp(o),!s.test(n.val()))return r.allrules[u].alertText}else if(f.func){if(e=f.func,typeof e!="function"){alert("jqv:custom parameter 'function' is no function - "+u);return}if(!e(n,t,i,r))return r.allrules[u].alertText}else{alert("jqv:custom type not allowed "+u);return}},_funcCall:function(n,t,i,r){var u=t[i+1],f,o,e;if(u.indexOf(".")>-1){for(o=u.split("."),e=window;o.length;)e=e[o.shift()];f=e}else f=window[u]||r.customFunctions[u];if(typeof f=="function")return f(n,t,i,r)},_equals:function(t,i,r,u){var f=i[r+1];if(t.val()!=n("#"+f).val())return u.allrules.equals.alertText},_maxSize:function(n,t,i,r){var f=t[i+1],e=n.val().length,u;if(e>f)return u=r.allrules.maxSize,u.alertText+f+u.alertText2},_minSize:function(n,t,i,r){var f=t[i+1],e=n.val().length,u;if(e<f)return u=r.allrules.minSize,u.alertText+f+u.alertText2},_min:function(n,t,i,r){var f=parseFloat(t[i+1]),e=parseFloat(n.val()),u;if(e<f)return(u=r.allrules.min,u.alertText2)?u.alertText+f+u.alertText2:u.alertText+f},_max:function(n,t,i,r){var f=parseFloat(t[i+1]),e=parseFloat(n.val()),u;if(e>f)return(u=r.allrules.max,u.alertText2)?u.alertText+f+u.alertText2:u.alertText+f},_past:function(i,r,u,f,e){var h=u[f+1],c=n(i.find("*[name='"+h.replace(/^#+/,"")+"']")),o,l,s;if(h.toLowerCase()=="now")o=new Date;else if(undefined!=c.val()){if(c.is(":disabled"))return;o=t._parseDate(c.val())}else o=t._parseDate(h);return l=t._parseDate(r.val()),l>o?(s=e.allrules.past,s.alertText2)?s.alertText+t._dateToString(o)+s.alertText2:s.alertText+t._dateToString(o):void 0},_future:function(i,r,u,f,e){var h=u[f+1],c=n(i.find("*[name='"+h.replace(/^#+/,"")+"']")),o,l,s;if(h.toLowerCase()=="now")o=new Date;else if(undefined!=c.val()){if(c.is(":disabled"))return;o=t._parseDate(c.val())}else o=t._parseDate(h);return l=t._parseDate(r.val()),l<o?(s=e.allrules.future,s.alertText2)?s.alertText+t._dateToString(o)+s.alertText2:s.alertText+t._dateToString(o):void 0},_isDate:function(n){var t=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);return t.test(n)},_isDateTime:function(n){var t=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);return t.test(n)},_dateCompare:function(n,t){return new Date(n.toString())<new Date(t.toString())},_dateRange:function(n,i,r,u){return!u.firstOfGroup[0].value&&u.secondOfGroup[0].value||u.firstOfGroup[0].value&&!u.secondOfGroup[0].value?u.allrules[i[r]].alertText+u.allrules[i[r]].alertText2:!t._isDate(u.firstOfGroup[0].value)||!t._isDate(u.secondOfGroup[0].value)?u.allrules[i[r]].alertText+u.allrules[i[r]].alertText2:t._dateCompare(u.firstOfGroup[0].value,u.secondOfGroup[0].value)?void 0:u.allrules[i[r]].alertText+u.allrules[i[r]].alertText2},_dateTimeRange:function(n,i,r,u){return!u.firstOfGroup[0].value&&u.secondOfGroup[0].value||u.firstOfGroup[0].value&&!u.secondOfGroup[0].value?u.allrules[i[r]].alertText+u.allrules[i[r]].alertText2:!t._isDateTime(u.firstOfGroup[0].value)||!t._isDateTime(u.secondOfGroup[0].value)?u.allrules[i[r]].alertText+u.allrules[i[r]].alertText2:t._dateCompare(u.firstOfGroup[0].value,u.secondOfGroup[0].value)?void 0:u.allrules[i[r]].alertText+u.allrules[i[r]].alertText2},_maxCheckbox:function(n,t,i,r,u){var f=i[r+1],e=t.attr("name"),o=n.find("input[name='"+e+"']:checked").size();if(o>f)return(u.showArrow=!1,u.allrules.maxCheckbox.alertText2)?u.allrules.maxCheckbox.alertText+" "+f+" "+u.allrules.maxCheckbox.alertText2:u.allrules.maxCheckbox.alertText},_minCheckbox:function(n,t,i,r,u){var f=i[r+1],e=t.attr("name"),o=n.find("input[name='"+e+"']:checked").size();if(o<f)return u.showArrow=!1,u.allrules.minCheckbox.alertText+" "+f+" "+u.allrules.minCheckbox.alertText2},_creditCard:function(n,t,i,r){var s=!1,u=n.val().replace(/ +/g,"").replace(/-+/g,""),f=u.length;if(f>=14&&f<=16&&parseInt(u)>0){var h=0,i=f-1,c=1,e,o=new String;do e=parseInt(u.charAt(i)),o+=c++%2==0?e*2:e;while(--i>=0);for(i=0;i<o.length;i++)h+=parseInt(o.charAt(i));s=h%10==0}if(!s)return r.allrules.creditCard.alertText},_ajax:function(i,r,u,f){var p=r[u+1],e=f.allrules[p],h=e.extraData,y=e.extraDataDynamic,c={fieldId:i.attr("id"),fieldValue:i.val()},l,o,w,a,u,s,v,b;if(typeof h=="object")n.extend(c,h);else if(typeof h=="string")for(l=h.split("&"),u=0;u<l.length;u++)o=l[u].split("="),o[0]&&o[0]&&(c[o[0]]=o[1]);if(y)for(w=[],a=String(y).split(","),u=0;u<a.length;u++)s=a[u],n(s).length&&(v=i.closest("form, .validationEngineContainer").find(s).val(),b=s.replace("#","")+"="+escape(v),c[s.replace("#","")]=v);return f.eventTrigger=="field"&&delete f.ajaxValidCache[i.attr("id")],!f.isError&&!t._checkAjaxFieldStatus(i.attr("id"),f)?(n.ajax({type:f.ajaxFormValidationMethod,url:e.url,cache:!1,dataType:"json",data:c,field:i,rule:e,methods:t,options:f,beforeSend:function(){},error:function(n,i){if(f.onFailure)f.onFailure(n,i);else t._ajaxError(n,i)},success:function(r){var h=r[0],s=n("#"+h).eq(0),c,u,o;s.length==1&&(c=r[1],u=r[2],c?(f.ajaxValidCache[h]=!0,u?f.allrules[u]&&(o=f.allrules[u].alertTextOk,o&&(u=o)):u=e.alertTextOk,f.showPrompts&&(u?t._showPrompt(s,u,"pass",!0,f):t._closePrompt(s)),f.eventTrigger=="submit"&&i.closest("form").submit()):(f.ajaxValidCache[h]=!1,f.isError=!0,u?f.allrules[u]&&(o=f.allrules[u].alertText,o&&(u=o)):u=e.alertText,f.showPrompts&&t._showPrompt(s,u,"",!0,f)));s.trigger("jqv.field.result",[s,f.isError,u])}}),e.alertTextLoad):void 0},_ajaxError:function(n,t){n.status==0&&t==null?alert("The page is not served from a server! ajax call failed"):typeof console!="undefined"&&console.log("Ajax error: "+n.status+" "+t)},_dateToString:function(n){return n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()},_parseDate:function(n){var t=n.split("-");return(t==n&&(t=n.split("/")),t==n)?(t=n.split("."),new Date(t[2],t[1]-1,t[0])):new Date(t[0],t[1]-1,t[2])},_showPrompt:function(i,r,u,f,e,o){i.data("jqv-prompt-at")instanceof jQuery?i=i.data("jqv-prompt-at"):i.data("jqv-prompt-at")&&(i=n(i.data("jqv-prompt-at")));var s=t._getPrompt(i);o&&(s=!1);n.trim(r)&&(s?t._updatePrompt(i,s,r,u,f,e):t._buildPrompt(i,r,u,f,e))},_buildPrompt:function(i,r,u,f,e){var o=n("<div>"),v,s,c,l,a,h;o.addClass(t._getClassName(i.attr("id"))+"formError");o.addClass("parentForm"+t._getClassName(i.closest("form, .validationEngineContainer").attr("id")));o.addClass("formError");switch(u){case"pass":o.addClass("greenPopup");break;case"load":o.addClass("blackPopup")}if(f&&o.addClass("ajaxed"),v=n("<div>").addClass("formErrorContent").html(r).appendTo(o),s=i.data("promptPosition")||e.promptPosition,e.showArrow){c=n("<div>").addClass("formErrorArrow");typeof s=="string"&&(h=s.indexOf(":"),h!=-1&&(s=s.substring(0,h)));switch(s){case"bottomLeft":case"bottomRight":o.find(".formErrorContent").before(c);c.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --><\/div><div class="line2"><!-- --><\/div><div class="line3"><!-- --><\/div><div class="line4"><!-- --><\/div><div class="line5"><!-- --><\/div><div class="line6"><!-- --><\/div><div class="line7"><!-- --><\/div><div class="line8"><!-- --><\/div><div class="line9"><!-- --><\/div><div class="line10"><!-- --><\/div>');break;case"topLeft":case"topRight":c.html('<div class="line10"><!-- --><\/div><div class="line9"><!-- --><\/div><div class="line8"><!-- --><\/div><div class="line7"><!-- --><\/div><div class="line6"><!-- --><\/div><div class="line5"><!-- --><\/div><div class="line4"><!-- --><\/div><div class="line3"><!-- --><\/div><div class="line2"><!-- --><\/div><div class="line1"><!-- --><\/div>');o.append(c)}}return e.addPromptClass&&o.addClass(e.addPromptClass),l=i.attr("data-required-class"),l!==undefined?o.addClass(l):e.prettySelect&&n("#"+i.attr("id")).next().is("select")&&(a=n("#"+i.attr("id").substr(e.usePrefix.length).substring(e.useSuffix.length)).attr("data-required-class"),a!==undefined&&o.addClass(a)),o.css({opacity:0}),s==="inline"?(o.addClass("inline"),typeof i.attr("data-prompt-target")!="undefined"&&n("#"+i.attr("data-prompt-target")).length>0?o.appendTo(n("#"+i.attr("data-prompt-target"))):i.after(o)):i.before(o),h=t._calculatePosition(i,o,e),o.css({position:s==="inline"?"relative":"absolute",top:h.callerTopPosition,left:h.callerleftPosition,marginTop:h.marginTopSize,opacity:0}).data("callerField",i),e.autoHidePrompt&&setTimeout(function(){o.animate({opacity:0},function(){o.closest(".formErrorOuter").remove();o.remove()})},e.autoHideDelay),o.animate({opacity:.87})},_updatePrompt:function(n,i,r,u,f,e,o){if(i){typeof u!="undefined"&&(u=="pass"?i.addClass("greenPopup"):i.removeClass("greenPopup"),u=="load"?i.addClass("blackPopup"):i.removeClass("blackPopup"));f?i.addClass("ajaxed"):i.removeClass("ajaxed");i.find(".formErrorContent").html(r);var s=t._calculatePosition(n,i,e),h={top:s.callerTopPosition,left:s.callerleftPosition,marginTop:s.marginTopSize};o?i.css(h):i.animate(h)}},_closePrompt:function(n){var i=t._getPrompt(n);i&&i.fadeTo("fast",0,function(){i.parent(".formErrorOuter").remove();i.remove()})},closePrompt:function(n){return t._closePrompt(n)},_getPrompt:function(i){var u=n(i).closest("form, .validationEngineContainer").attr("id"),f=t._getClassName(i.attr("id"))+"formError",r=n("."+t._escapeExpression(f)+".parentForm"+t._getClassName(u))[0];if(r)return n(r)},_escapeExpression:function(n){return n.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(t){var i=n(document),r=n("body"),u=t&&t.hasClass("rtl")||t&&(t.attr("dir")||"").toLowerCase()==="rtl"||i.hasClass("rtl")||(i.attr("dir")||"").toLowerCase()==="rtl"||r.hasClass("rtl")||(r.attr("dir")||"").toLowerCase()==="rtl";return Boolean(u)},_calculatePosition:function(n,t,i){var r,u,o,l=n.width(),s=n.position().left,h=n.position().top,p=n.height(),y=t.height();r=u=0;o=-y;var e=n.data("promptPosition")||i.promptPosition,f="",a="",v=0,c=0;typeof e=="string"&&e.indexOf(":")!=-1&&(f=e.substring(e.indexOf(":")+1),e=e.substring(0,e.indexOf(":")),f.indexOf(",")!=-1&&(a=f.substring(f.indexOf(",")+1),f=f.substring(0,f.indexOf(",")),c=parseInt(a),isNaN(c)&&(c=0)),v=parseInt(f),isNaN(f)&&(f=0));switch(e){default:case"topRight":u+=s+l-27;r+=h;break;case"topLeft":r+=h;u+=s;break;case"centerRight":r=h+4;o=0;u=s+n.outerWidth(!0)+5;break;case"centerLeft":u=s-(t.width()+2);r=h+4;o=0;break;case"bottomLeft":r=h+n.height()+5;o=0;u=s;break;case"bottomRight":u=s+l-27;r=h+n.height()+5;o=0;break;case"inline":u=0;r=0;o=0}return u+=v,r+=c,{callerTopPosition:r+"px",callerleftPosition:u+"px",marginTopSize:o+"px"}},_saveOptions:function(t,i){var u,r;return n.validationEngineLanguage?u=n.validationEngineLanguage.allRules:n.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page"),n.validationEngine.defaults.allrules=u,r=n.extend(!0,{},n.validationEngine.defaults,i),t.data("jqv",r),r},_getClassName:function(n){if(n)return n.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(n){return n.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(n,i,r,u){for(var e,f=r+1;f<i.length;f++)if(e=jQuery("#"+i[f]).first(),e.length&&t._required(e,["required"],0,u,!0)==undefined)return t._required(n,["required"],0,u)},_submitButtonClick:function(){var t=n(this),i=t.closest("form, .validationEngineContainer");i.data("jqv_submitButton",t.attr("id"))}};n.fn.validationEngine=function(i){var r=n(this);if(!r[0])return r;if(typeof i=="string"&&i.charAt(0)!="_"&&t[i])return i!="showPrompt"&&i!="hide"&&i!="hideAll"&&t.init.apply(r),t[i].apply(r,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)n.error("Method "+i+" does not exist in jQuery.validationEngine");else return t.init.apply(r,arguments),t.attach.apply(r)};n.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,showPrompts:!0,validateNonVisibleFields:!1,promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:n.noop,onBeforeAjaxFormValidation:n.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,showArrow:!0,showArrowOnRadioAndCheckbox:!1,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,onFailure:!1,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:!1,autoHideDelay:1e4,fadeDuration:.3,prettySelect:!1,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!1}};n(function(){n.validationEngine.defaults.promptPosition=t.isRTL()?"topLeft":"topRight"})}(jQuery),function(n){n.fn.validationEngineLanguage=function(){};n.validationEngineLanguage={newLang:function(){n.validationEngineLanguage.allRules={required:{regex:"none",alertText:"* Vui lòng nhập thông tin",alertTextCheckboxMultiple:"* Vui lòng chọn một tùy chọn",alertTextCheckboxe:"* Checkbox này bắt buộc",alertTextDateRange:"* Cả hai trường ngày tháng đều bắt buộc"},requiredInFunction:{func:function(n){return n.val()=="test"?!0:!1},alertText:"* Giá trị của trường phải là test"},dateRange:{regex:"none",alertText:"* Không đúng ",alertText2:"Khoảng ngày tháng"},dateTimeRange:{regex:"none",alertText:"* Không đúng ",alertText2:"Khoảng thời gian"},minSize:{regex:"none",alertText:"* Tối thiểu ",alertText2:" số ký tự được cho phép"},maxSize:{regex:"none",alertText:"* Tối đa ",alertText2:" số ký tự được cho phép"},groupRequired:{regex:"none",alertText:"* Bạn phải điền một trong những trường sau"},min:{regex:"none",alertText:"* Giá trị nhỏ nhất là "},max:{regex:"none",alertText:"* Giá trị lớn nhất là "},past:{regex:"none",alertText:"* Ngày kéo dài tới "},future:{regex:"none",alertText:"* Ngày đã qua "},maxCheckbox:{regex:"none",alertText:"* Tối đa ",alertText2:" số tùy chọn được cho phép"},minCheckbox:{regex:"none",alertText:"* Vui lòng chọn ",alertText2:" các tùy chọn"},equals:{regex:"none",alertText:"* Giá trị các trường không giống nhau"},creditCard:{regex:"none",alertText:"* Số thẻ tín dụng sai"},phone:{regex:/^([\+][0-9]{1,3}([ \.\-])?)?([\(][0-9]{1,6}[\)])?([0-9 \.\-]{1,32})(([A-Za-z \:]{1,11})?[0-9]{1,4}?)$/,alertText:"* Số điện thoại sai"},email:{regex:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,alertText:"* Email không đúng, Xin vui lòng nhập lại"},integer:{regex:/^[\-\+]?\d+$/,alertText:"* Không đúng là số nguyên"},number:{regex:/^[\-\+]?((([0-9]{1,3})([,][0-9]{3})*)|([0-9]+))?([\.]([0-9]+))?$/,alertText:"* Không đúng là số thập phân"},date:{regex:/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/,alertText:"* Ngày sai, phải có định dạng YYYY-MM-DD"},ipv4:{regex:/^((([01]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))[.]){3}(([0-1]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))$/,alertText:"* Địa chỉ IP sai"},url:{regex:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,alertText:"* URL sai"},onlyNumberSp:{regex:/^[0-9\ ]+$/,alertText:"* Chỉ điền số"},onlyLetterSp:{regex:/^[a-zA-Z\ \']+$/,alertText:"* Chỉ điền chữ"},onlyLetterNumber:{regex:/^[0-9a-zA-Z]+$/,alertText:"* Không được chứa ký tự đặc biệt"},ajaxUserCall:{url:"ajaxValidateFieldUser",extraData:"name=eric",alertText:"* Tên này được dùng",alertTextLoad:"* Đang xác nhận, vui lòng chờ"},ajaxUserCallPhp:{url:"phpajax/ajaxValidateFieldUser.php",extraData:"name=eric",alertTextOk:"* Tên người dùng này có thể dùng được",alertText:"* Tên người dùng này đã được sử dụng",alertTextLoad:"* Đang xác nhận, vui lòng chờ"},ajaxNameCall:{url:"ajaxValidateFieldName",alertText:"* Tên này được dùng",alertTextOk:"* Tên này có thể dùng",alertTextLoad:"* Đang xác nhận, vui lòng chờ"},ajaxNameCallPhp:{url:"phpajax/ajaxValidateFieldName.php",alertText:"* Tên này được dùng",alertTextLoad:"* Đang xác nhận, vui lòng chờ"},ajaxFieldLoginCall:{url:"AjaxValidateFieldMobile",extraData:"",extraDataDynamic:["#Email"],alertTextLoad:"* Đang xác nhận, vui lòng chờ"},validate2fields:{alertText:"* Vui lòng nhập vào HELLO"},dateFormat:{regex:/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/,alertText:"* Ngày sai"},dateTimeFormat:{regex:/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/,alertText:"* Ngày sai hoặc định dạng ngày sai",alertText2:"Định dạng đúng là: ",alertText3:"mm/dd/yyyy hh:mm:ss AM|PM hay ",alertText4:"yyyy-mm-dd hh:mm:ss AM|PM"}}}};n.validationEngineLanguage.newLang()}(jQuery),function(n){var i={inEffect:{opacity:"show"},inEffectDuration:600,stayTime:5e3,text:"",sticky:!1,type:"notice",position:"bottom-right",closeText:"",close:null},t={init:function(t){t&&n.extend(i,t)},showToast:function(t){var r={},f,e,u,o,s;return n.extend(r,i,t),f=n(".toast-container").length?n(".toast-container"):n("<div><\/div>").addClass("toast-container").addClass("toast-position-"+r.position).appendTo("body"),e=n("<div><\/div>").addClass("toast-item-wrapper"),u=n("<div><\/div>").hide().addClass("toast-item toast-type-"+r.type).appendTo(f).html(n("<p>").append(r.text)).animate(r.inEffect,r.inEffectDuration).wrap(e),o=n("<div><\/div>").addClass("toast-item-close").prependTo(u).html(r.closeText).click(function(){n().toastmessage("removeToast",u,r)}),s=n("<div><\/div>").addClass("toast-item-image").addClass("toast-item-image-"+r.type).prependTo(u),navigator.userAgent.match(/MSIE 6/i)&&f.css({top:document.documentElement.scrollTop}),r.sticky||setTimeout(function(){n().toastmessage("removeToast",u,r)},r.stayTime),u},showNoticeToast:function(t){var i={text:t,type:"notice"};return n().toastmessage("showToast",i)},showSuccessToast:function(t){var i={text:t,type:"success"};return n().toastmessage("showToast",i)},showErrorToast:function(t){var i={text:t,type:"error"};return n().toastmessage("showToast",i)},showWarningToast:function(t){var i={text:t,type:"warning"};return n().toastmessage("showToast",i)},removeToast:function(n,t){n.animate({opacity:"0"},600,function(){n.parent().animate({height:"0px"},300,function(){n.parent().remove()})});t&&t.close!==null&&t.close()}};n.fn.toastmessage=function(i){if(t[i])return t[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)n.error("Method "+i+" does not exist on jQuery.toastmessage");else return t.init.apply(this,arguments)}}(jQuery);fptshop=fptshop||{};fptshop.basepage=function(){function n(){t()}function t(){$("body").click(function(){$(".fshop-search-cate li, .fshop-search-prod li").remove()});$(document).on("scroll",function(){$(document).scrollTop()>85?($(".page").addClass("hasmini"),$(".fshop-header").addClass("fshop-small")):($(".page").removeClass("hasmini"),$(".fshop-header").removeClass("fshop-small"))});$(".customscrollbar").length>0&&$(".customscrollbar").customScrollbar();$(".gotop").click(function(){$("html, body").animate({scrollTop:0},"slow")});$(window).scroll(function(){var n=$(".gotop"),t=$(".socialbuttons"),i=$(document).height()-$(window).scrollTop()-$(window).height();$(window).scrollTop()>215?(n.fadeIn(),t.css("top","65px")):(n.fadeOut(),t.css("top","105px"));i<=210?n.css("bottom",210-i):n.css({bottom:"10px"})})}return{init:n,isLogged:typeof $.cookie(".ASPUC")!="undefined",customer:typeof $.cookie(".ASPUC")!="undefined"?JSON.parse(Base64.decode($.cookie(".ASPUC"))):null}}();fptshop.accountpage=function(){function n(){t()}function t(){$(".showchangepassword").click(function(){$(this).remove();$(".changepassword").show()})}return{init:n}}();$(function(){$(".Login").validationEngine({autoPositionUpdate:!0,maxErrorsPerField:1,scroll:!1});$(".Register").validationEngine({autoPositionUpdate:!0,maxErrorsPerField:1,scroll:!1})});$(".Register").submit(function(){var t=document.getElementById("txtPassword").value,i=document.getElementById("txtPasswordConfirm").value,n;return $(".Register").validationEngine("validate")==!0?(t==i?(n="/Ajax/LoginAndRegister/Register",$.get(n,$(".Register").serialize(),function(n){n.Erros?$().toastmessage("showWarningToast","Email của bạn đã được sử dụng vui lòng nhập Email mới!"):window.location="/Ajax/LoginAndRegister/CustomerInfo"})):$().toastmessage("showWarningToast","Vui lòng nhập lại mật khẩu!"),!1):!1});$(".Login").submit(function(n){n.preventDefault();$(".Login").validationEngine("validate")&&$.get("/Ajax/LoginAndRegister/Login",$(this).serialize(),function(n){if(n.Erros.toString()=="true")$().toastmessage("showToast",{text:n.Message,sticky:!0,type:"error "});else{$().toastmessage("showSuccessToast",n.Message);var t={name:$("#email1").val(),phone:"",email:$("#email1").val(),gender:"",birthday:"",socialId:"",socialType:0};t.name!=""&&t.name!=undefined&&ants_userInfoListener(t);window.location.reload()}}).error(function(){$().toastmessage("showErrorToast","Đã xảy ra lỗi trong quá trình đăng nhập")})});$(document).ready(function(){$(".acclogout").each(function(){var n=$(this);n.off("click").on("click",function(n){n.preventDefault();$.get("/Ajax/LoginAndRegister/Logout",function(){$().toastmessage("showSuccessToast","Bạn đã đăng xuất thành công");window.location="/Ajax/Home/Index"}).success(function(){})})});$(".resetpass").each(function(){var n=$(this);n.off("click").on("click",function(n){n.preventDefault();$(".overlay").fadeIn(300);$(".popup-order").css({top:($(window).height()-350)/2,left:($(window).width()-500)/2});$(".popup-order").fadeIn(300);$.get("/Ajax/LoginAndRegister/Resetpassword",function(n){$(".popup-order").html(n)}).complete(function(){$(".popup-order").css({top:($(window).height()-350)/2,left:($(window).width()-500)/2});$(".wrap").animate({opacity:1},300);$(".close").click(function(){$(".overlay").trigger("click")});$(".overlay").click(function(){$(this).fadeOut(300);$(".popup-order").fadeOut(300,function(){$(".popup-order").html("")})})})})});$(".LogonAndRegister").each(function(){var n=$(this);n.off("click").on("click",function(n){n.preventDefault();$(".overlay").fadeIn(300);$(".popup-order").css({top:($(window).height()-350)/2,left:($(window).width()-500)/2});$(".popup-order").fadeIn(300);$.get("/Ajax/LoginAndRegister/LogonAndRegister",function(n){$(".popup-order").html(n)}).complete(function(){$(".popup-order").css({top:($(window).height()-350)/2,left:($(window).width()-500)/2});$(".wrap").animate({opacity:1},300);$(".close").click(function(){$(".overlay").trigger("click")});$(".overlay").click(function(){$(this).fadeOut(300);$(".popup-order").fadeOut(300,function(){$(".popup-order").html("")})})})})})});$(".btnHistoryOrder").click(function(){});$(function(){var r=getURLParameter("cate"),u=getURLParameter("price"),t,i,n;if(r!=null&&r.length>=2&&(t=r.split(","),i=t.length,i>=1))for(n=0;n<i;n++)document.getElementById(t[n]).checked=!0;if(u!=null&&u.length>=2&&(t=u.split(","),i=t.length,i>=1))for(n=0;n<i;n++)document.getElementById(t[n]).checked=!0;$("#btnSearchPhuKien").click(function(){for(var i=document.getElementsByClassName("inlineCheckbox1"),r=i.length,n="",t=0;t<r;t++)i[t].checked==!0&&(n+=i[t].value+",");return n!=""&&(n=n.substring(0,n.length-1)),window.location.href=n==""?"/phu-kien":"/tim-kiem?cate="+n+"&price=0",!1});$("#btnSearchMtb").click(function(){for(var r=document.getElementsByClassName("inlineCheckbox2"),f=r.length,t="",n=0;n<f;n++)r[n].checked==!0&&(t+=r[n].value+",");t!=""&&(t=t.substring(0,t.length-1));var u=document.getElementsByClassName("inlineCheckbox2P"),e=u.length,i="";for(n=0;n<e;n++)u[n].checked==!0&&(i+=u[n].value+",");return(i!=""&&(i=i.substring(0,i.length-1)),i==""&&t=="")?(window.location.href="/may-tinh-bang",!1):(window.location.href=i==""?"/tim-kiem?cate="+t+"&price=0":"/tim-kiem?cate="+t+"&price="+i,!1)});$("#btnSearchDt").click(function(){for(var r=document.getElementsByClassName("inlineCheckbox3"),u=document.getElementsByClassName("inlineCheckbox3P"),f=r.length,e=u.length,i="",t,n=0;n<f;n++)r[n].checked==!0&&(i+=r[n].value+",");for(i!=""&&(i=i.substring(0,i.length-1)),t="",n=0;n<e;n++)u[n].checked==!0&&(t+=u[n].value+",");return(t!=""&&(t=t.substring(0,t.length-1)),t==""&&i=="")?(window.location.href="/dien-thoai",!1):(window.location.href=t==""?"/tim-kiem?cate="+i+"&price=0":"/tim-kiem?cate="+i+"&price="+t,!1)});$("#btnSearchApple").click(function(){for(var i=document.getElementsByClassName("inlineCheckbox4"),r=i.length,n="",t=0;t<r;t++)i[t].checked==!0&&(n+=i[t].value+",");return(n!=""&&(n=n.substring(0,n.length-1)),n=="")?(window.location.href="/apple",!1):(window.location.href="/tim-kiem?cate="+n+"&price=0",!1)});$("#btnSearchLaptop").click(function(){for(var r=document.getElementsByClassName("inlineCheckbox5"),f=r.length,t="",n=0;n<f;n++)r[n].checked==!0&&(t+=r[n].value+",");t!=""&&(t=t.substring(0,t.length-1));var u=document.getElementsByClassName("inlineCheckbox5P"),e=u.length,i="";for(n=0;n<e;n++)u[n].checked==!0&&(i+=u[n].value+",");return(i!=""&&(i=i.substring(0,i.length-1)),i==""&&t=="")?(window.location.href="/may-tinh-xach-tay",!1):(window.location.href=i==""?"/tim-kiem?cate="+t+"&price=0":"/tim-kiem?cate="+t+"&price="+i,!1)})});$(document).ready(function(){$('a[href="'+document.location.pathname+'"]').parent().addClass("active-sm")});nameCookieJsScript="cookieReffer";$(function(){$(".ads-left-top").size()>0&&(setTimeout(function(){$(".ads-left-top").remove()},8e3),$(".ads-left-top-close").click(function(n){n.preventDefault();$(".ads-left-top").remove();$.cookie("NTLADS",1,{expires:1/24,path:"/"})}));$("a.PromotionClick").click(function(){var n=$(this).attr("id");$.post("/Ajax/News/UpdatePromotionClick",{promotionID:n},function(){})});$(document).on("click","a.banner_click",function(){var n=$(this).attr("id");$.post("/Ajax/Ads/UpdateClick",{ItemID:n},function(){})});$(".search").mouseleave(function(){$(this).find(".resultAutoComplete").html("")});$(".input-btl-hb-pop").click(function(){$(".popup-order").fadeOut(300,function(){$(".popup-order").html("")});$(".overlay").fadeOut(300)});$(".btnSearch").unbind().click(function(){var n=$(this).parent().find(".keyword").val();if(n==="")return alert("Bạn chưa nhập từ khóa tìm kiếm"),!1;if(n.toLowerCase()==="bảo hành vàng"||n.toLowerCase()==="bao hanh vang")return window.location.href="http://fptshop.com.vn/ho-tro/bao-hanh-vang",!1;$.cookie("KeywordSearch",decodeURI(n),{expires:1,path:"/tim-kiem"});var r=$(this).parent().find(".type").val(),t=n.replace(/!|@|\$|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\'| |\"|\&|\#|\[|\]|~/g,"-"),i="";return i=r=="0"?"/tim-kiem/"+t:"/tim-kiem/"+t,window.location.href=i,!1});$(".keyword").keyup(function(){var n,i,t,r;$keyword=$(this).val();n=$(".fshop-search-cate");i=$(".fshop-search-prod");$.trim($keyword).length>0?(t="<li><\/li>",r="",$.get("/Ajax/SearchLucene/AutoComplete",{searchTerm:decodeURI($keyword),searchField:"NameProduct",searchDefault:""},function(i){i._searchBrandResults==""||i._searchBrandResults==null?(n.html(""),r=""):i._searchBrandResults!=""&&$.each(i._searchBrandResults,function(n,t){var i=" "+t.Name.toLowerCase(),u="http://fptshop.com.vn/"+t.TypeNameAscii+"/"+t.NameAscii+"";r+="<li><a href='"+u+"'>"+i+"<\/a><\/li>"});i._searchResults==""&&(i._searchSkuResults==null||i._searchSkuResults=="")?t="":i._searchSkuResults==""||i._searchSkuResults==null?$.each(i._searchResults,function(n,i){var u='<p class="fshop-search-prodname">'+i.NameProduct.toLowerCase().replace($keyword.toLowerCase(),"<strong>"+$keyword.toLowerCase()+"<\/strong>")+"<\/p>",f='<img src="http://fptshop.com.vn/Uploads/Thumbs/'+i.UrlPicture+'" alt = "'+i.NameProduct+'" >',e="http://fptshop.com.vn/"+i.TypeNameAscii+"/"+i.NameAscii+"",r="";r=parseInt(i.Price)>0?'<p class="fshop-search-prodprice">'+ConvertCurrency(parseInt(i.Price).toString())+"₫<\/p>":'<p class="fshop-search-prodprice"><\/p>';t+="<li><a href='"+e+"'><div class='fshop-search-prodimg'>"+f+"<\/div><div class='fshop-search-prodinfo'>"+u+r+"<\/div><\/a><\/li>"}):i._searchSkuResults!=""&&$.each(i._searchSkuResults,function(n,i){var u='<p class="fshop-search-prodname">'+i.NameProduct.toLowerCase()+" "+i.ColorName+"<\/p>",f='<img src="http://fptshop.com.vn/Uploads/Thumbs/'+i.UrlPicture+'" alt = "'+i.NameProduct+" "+i.ColorName+'" >',e="http://fptshop.com.vn/"+i.TypeNameAscii+"/"+i.NameAscii+"",r="";r=parseInt(i.Price)>0?'<p class="fshop-search-prodprice">'+ConvertCurrency(parseInt(i.Price).toString())+"₫<\/p>":'<p class="fshop-search-prodprice"><\/p>';t+="<li><a href='"+e+"'><div class='fshop-search-prodimg'>"+f+"<\/div><div class='fshop-search-prodinfo'>"+u+r+"<\/div><\/a><\/li>"})}).complete(function(){n.html("");n.html(r);i.html("");i.html(t)})):(i.html(""),n.html(""))});$(document).on("keyup",".keyword-re",function(){var n=$(this).val(),i=$(".trg-suggest"),t;$.trim(n).length>0?($("#keywordrecurring").val(n).css("color","#0000FF"),t="<ul>",i.html(""),$.get("/Ajax/SearchLucene/AutoCompleteRecuring",{searchTerm:decodeURI(n),searchField:"NameProduct",searchDefault:""},function(i){i.searchRecuringResults==""?t+="<div>Không tìm thấy kết quả với <strong>"+n+"<\/strong><\/div>":$.each(i.searchRecuringResults,function(i,r){var u=r.NameProduct.toLowerCase().replace(n.toLowerCase(),"<b>"+n.toLowerCase()+"<\/b>");t+="<li data-id = '"+r.NameAscii+"'>"+u+"<\/li>"})}).complete(function(){t+="<\/ul>";i.html("");i.html(t)})):$(".trg-suggest").html("")});$("#regiterPromotionEmail").length>0&&$("#regiterPromotionEmail").validationEngine("attach",{autoPositionUpdate:!0,maxErrorsPerField:1,scroll:!1,autoHideDelay:2e3,fadeDuration:.3});$("#regiterPromotionEmail").submit(function(n){n.preventDefault();$("#regiterPromotionEmail").validationEngine("validate")==!0&&$.post("/Ajax/Home/AddPromotionEmail",$("#regiterPromotionEmail").serialize(),function(n){n.Error==!0?$().toastmessage("showSuccessToast",n.Messenger):$().toastmessage("showWarningToast",n.Messenger)})});$(document).on("click","#btnOrderPaymentOnline",function(){var n=$(this).data("id"),r=getURLParameter("source"),t,i;ga("send","event","Order_"+n,"ThanhToanOnline_"+n,"ThanhToanOnline_"+n);t=$(this).data("cam");i=$(".lineprice span").attr("data-money");typeof t=="undefined"&&(t=0);typeof r=="null"&&(r="");i==="undefined"&&(i=0);typeof key=="undefined"&&(key=!1);$.post("/Ajax/Order/OrderPaymentPopup",{productId:n,campaignID:t,money:i,source:r,promotionId:"",promotionName:""},function(n){$(".popup-order").bPopup({speed:450,width:725,height:554,transition:"slideDown"});$(".popup-order").html(n)})});$(document).on("click",".order-product",function(n){var t=$(this).data("id"),s;$(".order-product").text().search("Đặt ngay")==0?ga("send","event","DatNgay_"+t,"DatNgay_"+t,"DatNgay_"+t):$(".order-product").text().search("Đặt giữ hàng tại Shop")==0?ga("send","event","DatGiuHangTaiShop_"+t,"DatGiuHangTaiShop_"+t,"DatGiuHangTaiShop_"+t):$(".order-product").text().search("Giao hàng miễn phí")==0&&ga("send","event","GiaoHangMienPhi_"+t,"GiaoHangMienPhi_"+t,"GiaoHangMienPhi_"+t);$(".popup-order").bPopup({speed:450,width:725,height:554,transition:"slideDown"});ga("send","event","Order_"+t,"DatHang_"+t,"DatHang_"+t);n.preventDefault();var i=$(".color-box .color .current a").attr("data-id"),r=getURLParameter("source"),e=$(this).data("tales"),u=$(this).data("cam"),o=$(this).attr("orderDelivery"),f=$(".lineprice span").attr("data-money");typeof u=="undefined"&&(u=0);typeof r=="null"&&(r="");f==="undefined"&&(f=0);typeof key=="undefined"&&(key=!1);s=null;$.post("/Ajax/Order/OrderPopup",{productId:t,campaignID:u,money:f,source:r,promotionId:"",promotionName:""},function(n){$(".popup-order").html(n)}).complete(function(){var r,u;n.preventDefault();typeof i!="undefined"&&$("#productVariantIdOrder").val(i);$(".ppu-ipradioml").length>0&&(r=$(".ppu_tab_pro_price").attr("data-money"),$(".ppu_tab_pro_price").attr("data-money",r),$(".ppu_tab_pro_price").text(ConvertCurrency(parseInt(r).toString())),$(".textTotalMoney").text(ConvertCurrency(parseInt(r).toString())),$("#bhv_check").click(function(){CalculatorTotalMoney()}));$("#order-submit").validate({rules:{name:{required:!0,minlength:2},phone:{required:!0,minlength:9,number:!0}},messages:{name:{required:"Bạn cần nhập đầy đủ họ tên",minlength:"Bạn cần nhập tối đa 2 ký tự"},phone:{required:"Bạn cần nhập đúng số điện thoại",minlength:"Bạn cần nhập đủ 9 số điện thoại",number:"Bạn cần nhập số"}},submitHandler:function(){var i,n,r;ga("send","event","OrderSubmit_"+t,"GuiDatHang_"+t,"GuiDatHang_"+t);$("#couponCode").val().length>0&&(i=$("#couponCode").val());$.cookie("_qld"+t)!=null?(n=$.cookie("_qld"+t).split("&"),n[1].replace("productid=","")==t&&($("#accessories").val(""),$(".ip-ck-pop").each(function(){$(this).is(":checked")&&($("#accessories").val()!=""?$("#accessories").val($("#accessories").val()+","+$(this).data("id")):$("#accessories").val($(this).data("id")))}),$(".button-order").hide(),$.post("/Ajax/Order/AddOrderLucky",$("#order-submit").serialize(),function(n){var t,i,r;$(".popup-order").html(n.Messenger);t=$.cookie("customerName");(t==null||t=="undefined")&&(t="");i=$.cookie("customerEmail");(i==null||i=="undefined")&&(i="");r=$.cookie("customerID");(r==null||r=="undefined")&&(r="")}).complete(function(){$(".popup-order").bPopup({speed:450,transition:"slideDown"});$.removeCookie(nameCookieJsScript,{path:"/"});$.removeCookie("_qld"+t,{path:"/"})}))):($(".ppu_rbnt_submit").hide(),$("#accessories").val(""),$(".ip-ck-pop").each(function(){$(this).is(":checked")&&($("#accessories").val()!=""?$("#accessories").val($("#accessories").val()+","+$(this).data("id")):$("#accessories").val($(this).data("id")))}),$(".ppu-ipradioml").length>0&&$("#bhv_check").is(":checked")&&$("#accessories").val("49668"),r=$("#phoneNumber").val(),window.location.href.indexOf("bang-xep-hang")>-1&&$("#sourceName").val("Bảng xếp hạng"),$.post("/Ajax/Order/AddOrder",$("#order-submit").serialize(),function(n){var t,i,r;$(".popup-order").html(n.Messenger);t=$.cookie("customerName");(t==null||t=="undefined")&&(t="");i=$.cookie("customerEmail");(i==null||i=="undefined")&&(i="");r=$.cookie("customerID");(r==null||r=="undefined")&&(r="")}).complete(function(){$(".popup-order").bPopup({speed:450,transition:"slideDown"});$.removeCookie(nameCookieJsScript,{path:"/"})}))}});$(".ppu_tab_color ul li").each(function(){var n=$(this),t;n.attr("data-id")==i&&(n.addClass("active"),t=parseFloat(n.attr("data-money"))-parseFloat(n.attr("data-discount")),$(".ppu_tab_pro_price").attr("data-money",t),$(".ppu_tab_pro_price").attr("data-currentid",n.attr("data-id")),$(".ppu_tab_pro_price").text(ConvertCurrency(parseInt(t).toString())),CalculatorTotalMoney())});$(".ppu_tab_pro_sales").hover(function(){$(".ppu_tab_color_img").animate({opacity:"show"},"fast")},function(){$(".ppu_tab_color_img").animate({opacity:"hide"},"slow")});$(".ppu_tab div").click(function(){$("#chooseShippingMethod2").hide();$("#chooseShippingMethod1").hide();$(".ppu_tab_left_content").show();$(".ppu_tab_left_map").hide();$(".ppu_add_shop").hide();$(".ppu_tab div").removeClass("current");$(this).addClass("current");var n=$(this).attr("key");n==="1"?($("#chooseShippingMethod1").show(),$(".ppu_add_shop").show(),$("#typePayment").val("boxselectShop")):($("#chooseShippingMethod2").show(),$("#typePayment").val("boxselectHome"))});o==2&&$(".ppu_tabhome").click();u=$.cookie(nameCookieJsScript);$("#refered").val(u);$("#talesSales").val(e);$(".input-btl-hb-pop").click(function(){$(".overlay").trigger("click")});$(".ppu_tab_color ul li").click(function(){$(".ppu-ipradioml").length>0&&($(".img_bhv").hide(),$("#bhv_check").attr("checked",!1));var n=$(this).data("id"),i=$(this).data("money"),r=$(this).data("discount"),t=parseFloat(i)-parseFloat(r);$(".ppu_tab_color ul li").removeClass("active");$(this).addClass("active");$(".ppu_tab_pro_price").text(ConvertCurrency(t.toString()));$(".ppu_tab_pro_price").attr("data-money",t);$(".ppu_tab_pro_price").attr("data-currentid",n);$("#productVariantIdOrder").val(n);CalculatorTotalMoney()})})});$(document).on("click","#btnorderbulk",function(n){var t=$(this).data("id"),s;$(".order-product").text().search("Đặt ngay")==0?ga("send","event","DatNgay_"+t,"DatNgay_"+t,"DatNgay_"+t):$(".order-product").text().search("Đặt giữ hàng tại Shop")==0?ga("send","event","DatGiuHangTaiShop_"+t,"DatGiuHangTaiShop_"+t,"DatGiuHangTaiShop_"+t):$(".order-product").text().search("Giao hàng miễn phí")==0&&ga("send","event","GiaoHangMienPhi_"+t,"GiaoHangMienPhi_"+t,"GiaoHangMienPhi_"+t);$(".popup-order").bPopup({speed:450,width:725,height:554,transition:"slideDown"});ga("send","event","Order_"+t,"DatHang_"+t,"DatHang_"+t);n.preventDefault();var i=$(".color-box .color .current a").attr("data-id"),r=getURLParameter("source"),e=$(this).data("tales"),u=$(this).data("cam"),o=$(this).attr("orderDelivery"),f=$(".lineprice span").attr("data-money");typeof u=="undefined"&&(u=0);typeof r=="null"&&(r="");f==="undefined"&&(f=0);typeof key=="undefined"&&(key=!1);s=null;$.post("/Ajax/Order/OrderBulkPopup",{productId:t,campaignID:u,money:f,source:r,promotionId:"",promotionName:""},function(n){$(".popup-order").html(n)}).complete(function(){var r,u;n.preventDefault();typeof i!="undefined"&&$("#productVariantIdOrder").val(i);$(".ppu-ipradioml").length>0&&(r=$(".ppu_tab_pro_price").attr("data-money"),$(".ppu_tab_pro_price").attr("data-money",r),$(".ppu_tab_pro_price").text(ConvertCurrency(parseInt(r).toString())),$(".textTotalMoney").text(ConvertCurrency(parseInt(r).toString())),$("#bhv_check").click(function(){CalculatorTotalMoney()}));$("#order-submit").validate({rules:{name:{required:!0,minlength:2},phone:{required:!0,minlength:9,number:!0}},messages:{name:{required:"Bạn cần nhập đầy đủ họ tên",minlength:"Bạn cần nhập tối đa 2 ký tự"},phone:{required:"Bạn cần nhập đúng số điện thoại",minlength:"Bạn cần nhập đủ 9 số điện thoại",number:"Bạn cần nhập số"}},submitHandler:function(){var i,n,r;ga("send","event","OrderSubmit_"+t,"GuiDatHang_"+t,"GuiDatHang_"+t);$("#couponCode").val().length>0&&(i=$("#couponCode").val());$.cookie("_qld"+t)!=null?(n=$.cookie("_qld"+t).split("&"),n[1].replace("productid=","")==t&&($("#accessories").val(""),$(".ip-ck-pop").each(function(){$(this).is(":checked")&&($("#accessories").val()!=""?$("#accessories").val($("#accessories").val()+","+$(this).data("id")):$("#accessories").val($(this).data("id")))}),$(".button-order").hide(),$.post("/Ajax/Order/AddOrderLucky",$("#order-submit").serialize(),function(n){var t,i,r;$(".popup-order").html(n.Messenger);t=$.cookie("customerName");(t==null||t=="undefined")&&(t="");i=$.cookie("customerEmail");(i==null||i=="undefined")&&(i="");r=$.cookie("customerID");(r==null||r=="undefined")&&(r="")}).complete(function(){$(".popup-order").bPopup({speed:450,transition:"slideDown"});$.removeCookie(nameCookieJsScript,{path:"/"});$.removeCookie("_qld"+t,{path:"/"})}))):($(".ppu_rbnt_submit").hide(),$("#accessories").val(""),$(".ip-ck-pop").each(function(){$(this).is(":checked")&&($("#accessories").val()!=""?$("#accessories").val($("#accessories").val()+","+$(this).data("id")):$("#accessories").val($(this).data("id")))}),$(".ppu-ipradioml").length>0&&$("#bhv_check").is(":checked")&&$("#accessories").val("49668"),r=$("#phoneNumber").val(),window.location.href.indexOf("bang-xep-hang")>-1&&$("#sourceName").val("Bảng xếp hạng"),$.post("/Ajax/Order/AddOrder",$("#order-submit").serialize(),function(n){var t,i,r;$(".popup-order").html(n.Messenger);t=$.cookie("customerName");(t==null||t=="undefined")&&(t="");i=$.cookie("customerEmail");(i==null||i=="undefined")&&(i="");r=$.cookie("customerID");(r==null||r=="undefined")&&(r="")}).complete(function(){$(".popup-order").bPopup({speed:450,transition:"slideDown"});$.removeCookie(nameCookieJsScript,{path:"/"})}))}});$(".ppu_tab_color ul li").each(function(){var n=$(this),t;n.attr("data-id")==i&&(n.addClass("active"),t=parseFloat(n.attr("data-money"))-parseFloat(n.attr("data-discount")),$(".ppu_tab_pro_price").attr("data-money",t),$(".ppu_tab_pro_price").attr("data-currentid",n.attr("data-id")),$(".ppu_tab_pro_price").text(ConvertCurrency(parseInt(t).toString())),CalculatorTotalMoney())});$(".ppu_tab_pro_sales").hover(function(){$(".ppu_tab_color_img").animate({opacity:"show"},"fast")},function(){$(".ppu_tab_color_img").animate({opacity:"hide"},"slow")});$(".ppu_tab div").click(function(){$("#chooseShippingMethod2").hide();$("#chooseShippingMethod1").hide();$(".ppu_tab_left_content").show();$(".ppu_tab_left_map").hide();$(".ppu_add_shop").hide();$(".ppu_tab div").removeClass("current");$(this).addClass("current");var n=$(this).attr("key");n==="1"?($("#chooseShippingMethod1").show(),$(".ppu_add_shop").show(),$("#typePayment").val("boxselectShop")):($("#chooseShippingMethod2").show(),$("#typePayment").val("boxselectHome"))});o==2&&$(".ppu_tabhome").click();u=$.cookie(nameCookieJsScript);$("#refered").val(u);$("#talesSales").val(e);$(".input-btl-hb-pop").click(function(){$(".overlay").trigger("click")});$(".ppu_tab_color ul li").click(function(){$(".ppu-ipradioml").length>0&&($(".img_bhv").hide(),$("#bhv_check").attr("checked",!1));var n=$(this).data("id"),i=$(this).data("money"),r=$(this).data("discount"),t=parseFloat(i)-parseFloat(r);$(".ppu_tab_color ul li").removeClass("active");$(this).addClass("active");$(".ppu_tab_pro_price").text(ConvertCurrency(t.toString()));$(".ppu_tab_pro_price").attr("data-money",t);$(".ppu_tab_pro_price").attr("data-currentid",n);$("#productVariantIdOrder").val(n);CalculatorTotalMoney()})})});$(document).on("click",".order-recurring-product",function(n){n.preventDefault();var t=$(this).data("id");$(".overlay").fadeIn(300);$(".popup-order").css({top:($(window).height()-$(".popup-order").height())/2,left:($(window).width()-$(".popup-order").width())/2});$(".popup-order").fadeIn(300);$.post("/Ajax/Order/OrderRecurringPopup",{productId:t},function(n){$(".popup-order").html(n)}).complete(function(){var t,n;for($("#order-recurring-submit").validationEngine("attach",{autoPositionUpdate:!0,maxErrorsPerField:1,scroll:!1}),$("#order-recurring-submit").submit(function(n){n.preventDefault();$("#order-recurring-submit").validationEngine("validate")==!0&&$.post("/Ajax/Order/AddOrderRecurring",$("#order-recurring-submit").serialize(),function(n){$(".popup-order").html(n.Messenger);$(".popup-order").css({top:($(window).height()-$(".dv-pop-ss").height())/2,left:($(window).width()-$(".dv-pop-ss").width())/2})}).complete(function(){$(".close-order-success").click(function(){$(".overlay").trigger("click")})})}),$(".popup-order").css({top:($(window).height()-$(".ppu_box").height())/2,left:($(window).width()-$(".ppu_box").width())/2}),$(".ppu_box").animate({opacity:1},300),$(".overlay").click(function(){$(this).fadeOut(300);$(".popup-order").fadeOut(300,function(){$(".popup-order").html("")})}),$(".input-btl-hb-pop").click(function(){$(".overlay").trigger("click")}),$(".timeRecurringSelected").change(function(){CalculatorMoneyRecurring()}),t=parseFloat($(".price-order-recurring").val()),n=30;n<=75;n+=5)$(".prepaid").append('<option value="'+n+'">'+n+"%(~"+ConvertCurrency(parseInt(t/100*n).toString())+" đ)<\/option>");CalculatorMoneyRecurring()})});$(document).on("click","#checkcoupon",function(n){n.preventDefault();var t=$(this).parent().find("#couponCode").val(),i=parseInt($("#productVariantIdOrder").val());$.post("/Ajax/Order/GetDiscountByCouponViber",{coupon:t,pvid:i},function(){console.log(t)}).complete(function(n){var t,r,i;console.log(n);t=n.responseText.trim();console.log(t);t=="-1"?($(".msgcheckcoupon").html("Mã sản phẩm đã được sử dụng, vui lòng kiểm tra lại."),$("#discount-coupon").length>0&&$("#discount-coupon").remove()):t=="-2"?($(".msgcheckcoupon").html("Không áp dụng giảm giá cho sản phẩm này, vui lòng kiểm tra lại."),$("#discount-coupon").length>0&&$("#discount-coupon").remove()):t=="0"?($(".msgcheckcoupon").html("Bạn đã nhập sai mã, vui lòng nhập lại."),$("#discount-coupon").length>0&&$("#discount-coupon").remove()):parseInt(t)>0&&(r=parseInt($(".ppu_tab_pro_price").attr("data-money")),console.log(r),i=r/50,console.log(i),$("#discount-coupon").remove(),$("#labinsertcoupon").append("<input type='hidden' id='discount-coupon' value='"+i+"'/>"),$(".msgcheckcoupon").attr(ConvertCurrency(parseInt(i).toString())),$(".msgcheckcoupon").html("Chúc mừng bạn đã được giảm: <b style='color:#ea0101'>"+ConvertCurrency(parseInt(i).toString())+" đ<\/b>"),$("#checkcoupon").hide());CalculatorTotalMoney()})});$(document).on("click",".payment-order",function(n){n.preventDefault();var t=$(".form-payment").html();$(".overlay").trigger("click");$(this).fptmodal({content:t});$(".f-modal .Sim_net_img").each(function(n){n==0&&$(this).trigger("click")});$(".f-modal #paymentformorder").validationEngine({autoPositionUpdate:!0,maxErrorsPerField:1,scroll:!1})});$(document).on("click",".f-modal .Sim_net_img",function(n){n.preventDefault();$(".f-modal .Sim_net_img").removeClass("active-b");$(this).addClass("active-b");$(".f-modal #checkbank").val($(".active-b").parent().attr("data-id"))})});$(document).on("blur","#phoneNumber",function(){var n=$(this).val();$.get("/Ajax/Order/GetCustomerByPhone",{phone:n},function(n){n!=null&&n!=""&&$("#chooseShippingMethod2").val(n.customer.BillingAddress)}).complete(function(){})});$(document).on("change","#ddlCity",function(){var n=$(this).val();$.get("/Ajax/Shop/getDistrictByCity",{cityId:n},function(n){$("#ddlDistrict").html("");$("#ddlDistrict").append("<option value='0'>Tất cả<\/option>");$.each(n.list,function(n,t){$("#ddlDistrict").append("<option value='"+t.ID+"'>"+t.Name+"<\/option>")})}).complete(function(){FindShop("cityId",n)})});$(document).on("change","#ddlDistrict",function(){var n=$(this).val();FindShop("districtId",n)});$(document).on("click",".ppu_tab_lmap_close",function(){$(".ppu_tab_left_content").slideDown();$(".ppu_tab_left_map").slideUp()});$(document).on("click","#ddlShop li",function(){var n=$(this);$("#ddlShop li").removeClass("active");n.addClass("active");$("#shopname").val(n.attr("title"))});$(document).on("click",".ppu_codesale",function(){$(".ppu_codesale").hide();$("#labinsertcoupon").show()});$(document).on("click","#ddlShop li p",function(){var n=$(this).parent(),t=n.text();$(".ppu_tab_left_content").slideUp();$(".ppu_tab_left_map").slideDown();$("#chooseShopStoreID").html(t);n.parent().find(".active").removeClass("active");n.addClass("active");var i=n.data("x"),r=n.data("y"),f={zoom:6,mapTypeId:google.maps.MapTypeId.ROADMAP,center:new google.maps.LatLng(i,r),maxZoom:18,minZoom:10},u=new google.maps.Map(document.getElementById("map-canvas-order"),f),e=new google.maps.Marker({position:new google.maps.LatLng(i,r),map:u,title:t});u.setZoom(15)});(function(n){var t=function(t,i){var u=n.extend({},n.fn.nivoSlider.defaults,i),r={currentSlide:0,currentImage:"",totalSlides:0,running:!1,paused:!1,stop:!1,controlNavEl:!1},f=n(t),e,s,v,o,h,l;if(f.data("nivo:vars",r).addClass("nivoSlider"),e=f.children(),e.each(function(){var t=n(this),i="",u,f;t.is("img")||(t.is("a")&&(t.addClass("nivo-imageLink"),i=t),t=t.find("img:first"));u=u===0?t.attr("width"):t.width();f=f===0?t.attr("height"):t.height();i!==""&&i.css("display","none");t.css("display","none");r.totalSlides++}),u.randomStart&&(u.startSlide=Math.floor(Math.random()*r.totalSlides)),u.startSlide>0&&(u.startSlide>=r.totalSlides&&(u.startSlide=r.totalSlides-1),r.currentSlide=u.startSlide),r.currentImage=n(e[r.currentSlide]).is("img")?n(e[r.currentSlide]):n(e[r.currentSlide]).find("img:first"),n(e[r.currentSlide]).is("a")&&n(e[r.currentSlide]).css("display","block"),s=n("<img/>").addClass("nivo-main-image"),s.attr("src",r.currentImage.attr("src")).show(),f.append(s),n(window).resize(function(){f.children("img").width(f.width());s.attr("src",r.currentImage.attr("src"));s.stop().height("auto");n(".nivo-slice").remove();n(".nivo-box").remove()}),f.append(n('<div class="nivo-caption"><\/div>')),v=function(t){var u=n(".nivo-caption",f),i;r.currentImage.attr("title")!=""&&r.currentImage.attr("title")!=undefined?(i=r.currentImage.attr("title"),i.substr(0,1)=="#"&&(i=n(i).html()),u.css("display")=="block"?setTimeout(function(){u.html(i)},t.animSpeed):(u.html(i),u.stop().fadeIn(t.animSpeed))):u.stop().fadeOut(t.animSpeed)},v(u),o=0,!u.manualAdvance&&e.length>1&&(o=setInterval(function(){a(f,e,u,!1)},u.pauseTime)),u.directionNav){f.append('<div class="nivo-directionNav"><a class="nivo-prevNav">'+u.prevText+'<\/a><a class="nivo-nextNav">'+u.nextText+"<\/a><\/div>");n(f).on("click","a.nivo-prevNav",function(){if(r.running)return!1;clearInterval(o);o="";r.currentSlide-=2;a(f,e,u,"prev")});n(f).on("click","a.nivo-nextNav",function(){if(r.running)return!1;clearInterval(o);o="";a(f,e,u,"next")})}if(u.controlNav){for(r.controlNavEl=n('<div class="nivo-controlNav"><\/div>'),f.after(r.controlNavEl),h=0;h<e.length;h++)u.controlNavThumbs?(r.controlNavEl.addClass("nivo-thumbs-enabled"),l=e.eq(h),l.is("img")||(l=l.find("img:first")),l.attr("data-thumb")&&r.controlNavEl.append('<a class="nivo-control" rel="'+h+'"><img src="'+l.attr("data-thumb")+'" alt="" /><\/a>')):r.controlNavEl.append('<a class="nivo-control" rel="'+h+'">'+(h+1)+"<\/a>");n("a:eq("+r.currentSlide+")",r.controlNavEl).addClass("active");n("a",r.controlNavEl).bind("click",function(){if(r.running||n(this).hasClass("active"))return!1;clearInterval(o);o="";s.attr("src",r.currentImage.attr("src"));r.currentSlide=n(this).attr("rel")-1;a(f,e,u,"control")})}u.pauseOnHover&&f.hover(function(){r.paused=!0;clearInterval(o);o=""},function(){r.paused=!1;o!==""||u.manualAdvance||(o=setInterval(function(){a(f,e,u,!1)},u.pauseTime))});f.bind("nivo:animFinished",function(){s.attr("src",r.currentImage.attr("src"));r.running=!1;n(e).each(function(){n(this).is("a")&&n(this).css("display","none")});n(e[r.currentSlide]).is("a")&&n(e[r.currentSlide]).css("display","block");o!==""||r.paused||u.manualAdvance||(o=setInterval(function(){a(f,e,u,!1)},u.pauseTime));u.afterChange.call(this)});var c=function(t,i,r){var e,u,f;for(n(r.currentImage).parent().is("a")&&n(r.currentImage).parent().css("display","block"),n('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").width(t.width()).css("visibility","hidden").show(),e=n('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").parent().is("a")?n('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").parent().height():n('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").height(),u=0;u<i.slices;u++)f=Math.round(t.width()/i.slices),u===i.slices-1?t.append(n('<div class="nivo-slice" name="'+u+'"><img src="'+r.currentImage.attr("src")+'" style="position:absolute; width:'+t.width()+"px; height:auto; display:block !important; top:0; left:-"+(f+u*f-f)+'px;" /><\/div>').css({left:f*u+"px",width:t.width()-f*u+"px",height:e+"px",opacity:"0",overflow:"hidden"})):t.append(n('<div class="nivo-slice" name="'+u+'"><img src="'+r.currentImage.attr("src")+'" style="position:absolute; width:'+t.width()+"px; height:auto; display:block !important; top:0; left:-"+(f+u*f-f)+'px;" /><\/div>').css({left:f*u+"px",width:f+"px",height:e+"px",opacity:"0",overflow:"hidden"}));n(".nivo-slice",t).height(e);s.stop().animate({height:n(r.currentImage).height()},i.animSpeed)},y=function(t,i,r){var e,o,f,u;for(n(r.currentImage).parent().is("a")&&n(r.currentImage).parent().css("display","block"),n('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").width(t.width()).css("visibility","hidden").show(),e=Math.round(t.width()/i.boxCols),o=Math.round(n('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").height()/i.boxRows),f=0;f<i.boxRows;f++)for(u=0;u<i.boxCols;u++)u===i.boxCols-1?(t.append(n('<div class="nivo-box" name="'+u+'" rel="'+f+'"><img src="'+r.currentImage.attr("src")+'" style="position:absolute; width:'+t.width()+"px; height:auto; display:block; top:-"+o*f+"px; left:-"+e*u+'px;" /><\/div>').css({opacity:0,left:e*u+"px",top:o*f+"px",width:t.width()-e*u+"px"})),n('.nivo-box[name="'+u+'"]',t).height(n('.nivo-box[name="'+u+'"] img',t).height()+"px")):(t.append(n('<div class="nivo-box" name="'+u+'" rel="'+f+'"><img src="'+r.currentImage.attr("src")+'" style="position:absolute; width:'+t.width()+"px; height:auto; display:block; top:-"+o*f+"px; left:-"+e*u+'px;" /><\/div>').css({opacity:0,left:e*u+"px",top:o*f+"px",width:e+"px"})),n('.nivo-box[name="'+u+'"]',t).height(n('.nivo-box[name="'+u+'"] img',t).height()+"px"));s.stop().animate({height:n(r.currentImage).height()},i.animSpeed)},a=function(t,i,r,u){var f=t.data("nivo:vars"),e,p,ut,it,k,rt;if(f&&f.currentSlide===f.totalSlides-1&&r.lastSlide.call(this),(!f||f.stop)&&!u)return!1;r.beforeChange.call(this);u?(u==="prev"&&s.attr("src",f.currentImage.attr("src")),u==="next"&&s.attr("src",f.currentImage.attr("src"))):s.attr("src",f.currentImage.attr("src"));f.currentSlide++;f.currentSlide===f.totalSlides&&(f.currentSlide=0,r.slideshowEnd.call(this));f.currentSlide<0&&(f.currentSlide=f.totalSlides-1);f.currentImage=n(i[f.currentSlide]).is("img")?n(i[f.currentSlide]):n(i[f.currentSlide]).find("img:first");r.controlNav&&(n("a",f.controlNavEl).removeClass("active"),n("a:eq("+f.currentSlide+")",f.controlNavEl).addClass("active"));v(r);n(".nivo-slice",t).remove();n(".nivo-box",t).remove();e=r.effect;p="";r.effect==="random"&&(p=["sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse"],e=p[Math.floor(Math.random()*(p.length+1))],e===undefined&&(e="fade"));r.effect.indexOf(",")!==-1&&(p=r.effect.split(","),e=p[Math.floor(Math.random()*p.length)],e===undefined&&(e="fade"));f.currentImage.attr("data-transition")&&(e=f.currentImage.attr("data-transition"));f.running=!0;var o=0,h=0,a="",l="",d="",b="";if(e==="sliceDown"||e==="sliceDownRight"||e==="sliceDownLeft")c(t,r,f),o=0,h=0,a=n(".nivo-slice",t),e==="sliceDownLeft"&&(a=n(".nivo-slice",t)._reverse()),a.each(function(){var i=n(this);i.css({top:"0px"});h===r.slices-1?setTimeout(function(){i.animate({opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+o):setTimeout(function(){i.animate({opacity:"1.0"},r.animSpeed)},100+o);o+=50;h++});else if(e==="sliceUp"||e==="sliceUpRight"||e==="sliceUpLeft")c(t,r,f),o=0,h=0,a=n(".nivo-slice",t),e==="sliceUpLeft"&&(a=n(".nivo-slice",t)._reverse()),a.each(function(){var i=n(this);i.css({bottom:"0px"});h===r.slices-1?setTimeout(function(){i.animate({opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+o):setTimeout(function(){i.animate({opacity:"1.0"},r.animSpeed)},100+o);o+=50;h++});else if(e==="sliceUpDown"||e==="sliceUpDownRight"||e==="sliceUpDownLeft")c(t,r,f),o=0,h=0,ut=0,a=n(".nivo-slice",t),e==="sliceUpDownLeft"&&(a=n(".nivo-slice",t)._reverse()),a.each(function(){var i=n(this);h===0?(i.css("top","0px"),h++):(i.css("bottom","0px"),h=0);ut===r.slices-1?setTimeout(function(){i.animate({opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+o):setTimeout(function(){i.animate({opacity:"1.0"},r.animSpeed)},100+o);o+=50;ut++});else if(e==="fold")c(t,r,f),o=0,h=0,n(".nivo-slice",t).each(function(){var i=n(this),u=i.width();i.css({top:"0px",width:"0px"});h===r.slices-1?setTimeout(function(){i.animate({width:u,opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+o):setTimeout(function(){i.animate({width:u,opacity:"1.0"},r.animSpeed)},100+o);o+=50;h++});else if(e==="fade")c(t,r,f),l=n(".nivo-slice:first",t),l.css({width:t.width()+"px"}),l.animate({opacity:"1.0"},r.animSpeed*2,"",function(){t.trigger("nivo:animFinished")});else if(e==="slideInRight")c(t,r,f),l=n(".nivo-slice:first",t),l.css({width:"0px",opacity:"1"}),l.animate({width:t.width()+"px"},r.animSpeed*2,"",function(){t.trigger("nivo:animFinished")});else if(e==="slideInLeft")c(t,r,f),l=n(".nivo-slice:first",t),l.css({width:"0px",opacity:"1",left:"",right:"0px"}),l.animate({width:t.width()+"px"},r.animSpeed*2,"",function(){l.css({left:"0px",right:""});t.trigger("nivo:animFinished")});else if(e==="boxRandom")y(t,r,f),d=r.boxCols*r.boxRows,h=0,o=0,b=w(n(".nivo-box",t)),b.each(function(){var i=n(this);h===d-1?setTimeout(function(){i.animate({opacity:"1"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+o):setTimeout(function(){i.animate({opacity:"1"},r.animSpeed)},100+o);o+=20;h++});else if(e==="boxRain"||e==="boxRainReverse"||e==="boxRainGrow"||e==="boxRainGrowReverse"){y(t,r,f);d=r.boxCols*r.boxRows;h=0;o=0;var g=0,nt=0,tt=[];for(tt[g]=[],b=n(".nivo-box",t),(e==="boxRainReverse"||e==="boxRainGrowReverse")&&(b=n(".nivo-box",t)._reverse()),b.each(function(){tt[g][nt]=n(this);nt++;nt===r.boxCols&&(g++,nt=0,tt[g]=[])}),it=0;it<r.boxCols*2;it++){for(k=it,rt=0;rt<r.boxRows;rt++)k>=0&&k<r.boxCols&&(function(i,u,f,o,s){var h=n(tt[i][u]),c=h.width(),l=h.height();(e==="boxRainGrow"||e==="boxRainGrowReverse")&&h.width(0).height(0);o===s-1?setTimeout(function(){h.animate({opacity:"1",width:c,height:l},r.animSpeed/1.3,"",function(){t.trigger("nivo:animFinished")})},100+f):setTimeout(function(){h.animate({opacity:"1",width:c,height:l},r.animSpeed/1.3)},100+f)}(rt,k,o,h,d),h++),k--;o+=100}}},w=function(n){for(var i,r,t=n.length;t;i=parseInt(Math.random()*t,10),r=n[--t],n[t]=n[i],n[i]=r);return n},p=function(n){this.console&&typeof console.log!="undefined"&&console.log(n)};return this.stop=function(){n(t).data("nivo:vars").stop||(n(t).data("nivo:vars").stop=!0,p("Stop Slider"))},this.start=function(){n(t).data("nivo:vars").stop&&(n(t).data("nivo:vars").stop=!1,p("Start Slider"))},u.afterLoad.call(this),this};n.fn.nivoSlider=function(i){return this.each(function(){var r=n(this),u;if(r.data("nivoslider"))return r.data("nivoslider");u=new t(this,i);r.data("nivoslider",u)})};n.fn.nivoSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3e3,startSlide:0,directionNav:!0,controlNav:!0,controlNavThumbs:!1,pauseOnHover:!0,manualAdvance:!1,prevText:"Prev",nextText:"Next",randomStart:!1,beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};n.fn._reverse=[].reverse})(jQuery),function(n,t,i,r){function e(r,u){(this.options=n.extend({},o,u),this._container=n("#"+this.options.containerID),this._container.length)&&(this.jQwindow=n(t),this.jQdocument=n(i),this._holder=n(r),this._nav={},this._first=n(this.options.first),this._previous=n(this.options.previous),this._next=n(this.options.next),this._last=n(this.options.last),this._items=this._container.children(":visible"),this._itemsShowing=n([]),this._itemsHiding=n([]),this._numPages=Math.ceil(this._items.length/this.options.perPage),this._currentPageNum=this.options.startPage,this._clicked=!1,this._cssAnimSupport=this.getCSSAnimationSupport(),this.init())}var f="jPages",u=null,o={containerID:"",first:!1,previous:"← previous",next:"next →",last:!1,links:"numeric",startPage:1,perPage:10,midRange:5,startRange:1,endRange:1,keyBrowse:!1,scrollBrowse:!1,pause:0,clickStop:!1,delay:50,direction:"forward",animation:"",fallback:400,minHeight:!0,callback:r};e.prototype={constructor:e,getCSSAnimationSupport:function(){var t=!1,e="animation",o="",i="Webkit Moz O ms Khtml".split(" "),u="",f=this._container.get(0),n;if(f.style.animationName&&(t=!0),t===!1)for(n=0;n<i.length;n++)if(f.style[i[n]+"AnimationName"]!==r){u=i[n];e=u+"Animation";o="-"+u.toLowerCase()+"-";t=!0;break}return t},init:function(){this.setStyles();this.setNav();this.paginate(this._currentPageNum);this.setMinHeight()},setStyles:function(){n("<style>.jp-invisible { visibility: hidden !important; } .jp-hidden { display: none !important; }<\/style>").appendTo("head");this._cssAnimSupport&&this.options.animation.length?this._items.addClass("animated jp-hidden"):this._items.hide()},setNav:function(){var t=this.writeNav();this._holder.each(this.bind(function(i,r){var u=n(r);u.html(t);this.cacheNavElements(u,i);this.bindNavHandlers(i);this.disableNavSelection(r)},this));this.options.keyBrowse&&this.bindNavKeyBrowse();this.options.scrollBrowse&&this.bindNavScrollBrowse()},writeNav:function(){for(var n=1,i,t=this.writeBtn("first")+this.writeBtn("previous");n<=this._numPages;n++){n===1&&this.options.startRange===0&&(t+="<span>...<\/span>");t+=n>this.options.startRange&&n<=this._numPages-this.options.endRange?"<a href='#' class='jp-hidden'>":"<a>";switch(this.options.links){case"numeric":t+=n;break;case"title":i=this._items.eq(n-1).attr("data-title");t+=i!==r?i:""}t+="<\/a>";(n===this.options.startRange||n===this._numPages-this.options.endRange)&&(t+="<span>...<\/span>")}return t+(this.writeBtn("next")+this.writeBtn("last")+"<\/div>")},writeBtn:function(t){return this.options[t]!==!1&&!n(this["_"+t]).length?"<a class='jp-"+t+"'>"+this.options[t]+"<\/a>":""},cacheNavElements:function(t,i){this._nav[i]={};this._nav[i].holder=t;this._nav[i].first=this._first.length?this._first:this._nav[i].holder.find("a.jp-first");this._nav[i].previous=this._previous.length?this._previous:this._nav[i].holder.find("a.jp-previous");this._nav[i].next=this._next.length?this._next:this._nav[i].holder.find("a.jp-next");this._nav[i].last=this._last.length?this._last:this._nav[i].holder.find("a.jp-last");this._nav[i].fstBreak=this._nav[i].holder.find("span:first");this._nav[i].lstBreak=this._nav[i].holder.find("span:last");this._nav[i].pages=this._nav[i].holder.find("a").not(".jp-first, .jp-previous, .jp-next, .jp-last");this._nav[i].permPages=this._nav[i].pages.slice(0,this.options.startRange).add(this._nav[i].pages.slice(this._numPages-this.options.endRange,this._numPages));this._nav[i].pagesShowing=n([]);this._nav[i].currentPage=n([])},bindNavHandlers:function(t){var i=this._nav[t];i.holder.bind("click.jPages",this.bind(function(t){var r=this.getNewPage(i,n(t.target));this.validNewPage(r)&&(this._clicked=!0,this.paginate(r));t.preventDefault()},this));this._first.length&&this._first.bind("click.jPages",this.bind(function(){this.validNewPage(1)&&(this._clicked=!0,this.paginate(1))},this));this._previous.length&&this._previous.bind("click.jPages",this.bind(function(){var n=this._currentPageNum-1;this.validNewPage(n)&&(this._clicked=!0,this.paginate(n))},this));this._next.length&&this._next.bind("click.jPages",this.bind(function(){var n=this._currentPageNum+1;this.validNewPage(n)&&(this._clicked=!0,this.paginate(n))},this));this._last.length&&this._last.bind("click.jPages",this.bind(function(){this.validNewPage(this._numPages)&&(this._clicked=!0,this.paginate(this._numPages))},this))},disableNavSelection:function(n){typeof n.onselectstart!="undefined"?n.onselectstart=function(){return!1}:typeof n.style.MozUserSelect!="undefined"?n.style.MozUserSelect="none":n.onmousedown=function(){return!1}},bindNavKeyBrowse:function(){this.jQdocument.bind("keydown.jPages",this.bind(function(n){var i=n.target.nodeName.toLowerCase(),t;this.elemScrolledIntoView()&&i!=="input"&&i!="textarea"&&(t=this._currentPageNum,n.which==37&&(t=this._currentPageNum-1),n.which==39&&(t=this._currentPageNum+1),this.validNewPage(t)&&(this._clicked=!0,this.paginate(t)))},this))},elemScrolledIntoView:function(){var n,i,t,r;return n=this.jQwindow.scrollTop(),i=n+this.jQwindow.height(),t=this._container.offset().top,r=t+this._container.height(),r>=n&&t<=i},bindNavScrollBrowse:function(){this._container.bind("mousewheel.jPages DOMMouseScroll.jPages",this.bind(function(n){var t=(n.originalEvent.wheelDelta||-n.originalEvent.detail)>0?this._currentPageNum-1:this._currentPageNum+1;return this.validNewPage(t)&&(this._clicked=!0,this.paginate(t)),n.preventDefault(),!1},this))},getNewPage:function(n,t){return t.is(n.currentPage)?this._currentPageNum:t.is(n.pages)?n.pages.index(t)+1:t.is(n.first)?1:t.is(n.last)?this._numPages:t.is(n.previous)?n.pages.index(n.currentPage):t.is(n.next)?n.pages.index(n.currentPage)+2:void 0},validNewPage:function(n){return n!==this._currentPageNum&&n>0&&n<=this._numPages},paginate:function(t){var i,r;i=this.updateItems(t);r=this.updatePages(t);this._currentPageNum=t;n.isFunction(this.options.callback)&&this.callback(t,i,r);this.updatePause()},updateItems:function(n){var t=this.getItemRange(n);return this._itemsHiding=this._itemsShowing,this._itemsShowing=this._items.slice(t.start,t.end),this._cssAnimSupport&&this.options.animation.length?this.cssAnimations(n):this.jQAnimations(n),t},getItemRange:function(n){var t={};return t.start=(n-1)*this.options.perPage,t.end=t.start+this.options.perPage,t.end>this._items.length&&(t.end=this._items.length),t},cssAnimations:function(n){clearInterval(this._delay);this._itemsHiding.removeClass(this.options.animation+" jp-invisible").addClass("jp-hidden");this._itemsShowing.removeClass("jp-hidden").addClass("jp-invisible");this._itemsOriented=this.getDirectedItems(n);this._index=0;this._delay=setInterval(this.bind(function(){this._index===this._itemsOriented.length?clearInterval(this._delay):this._itemsOriented.eq(this._index).removeClass("jp-invisible").addClass(this.options.animation);this._index=this._index+1},this),this.options.delay)},jQAnimations:function(n){clearInterval(this._delay);this._itemsHiding.addClass("jp-hidden");this._itemsShowing.fadeTo(0,0).removeClass("jp-hidden");this._itemsOriented=this.getDirectedItems(n);this._index=0;this._delay=setInterval(this.bind(function(){this._index===this._itemsOriented.length?clearInterval(this._delay):this._itemsOriented.eq(this._index).fadeTo(this.options.fallback,1);this._index=this._index+1},this),this.options.delay)},getDirectedItems:function(t){var i;switch(this.options.direction){case"backwards":i=n(this._itemsShowing.get().reverse());break;case"random":i=n(this._itemsShowing.get().sort(function(){return Math.round(Math.random())-.5}));break;case"auto":i=t>=this._currentPageNum?this._itemsShowing:n(this._itemsShowing.get().reverse());break;default:i=this._itemsShowing}return i},updatePages:function(n){var i,r,t;i=this.getInterval(n);for(r in this._nav)this._nav.hasOwnProperty(r)&&(t=this._nav[r],this.updateBtns(t,n),this.updateCurrentPage(t,n),this.updatePagesShowing(t,i),this.updateBreaks(t,i));return i},getInterval:function(n){var t,i,r,u;return t=Math.ceil(this.options.midRange/2),i=this._numPages-this.options.midRange,r=n>t?Math.max(Math.min(n-t,i),0):0,u=n>t?Math.min(n+t-(this.options.midRange%2>0?1:0),this._numPages):Math.min(this.options.midRange,this._numPages),{start:r,end:u}},updateBtns:function(n,t){t===1&&(n.first.addClass("jp-disabled"),n.previous.addClass("jp-disabled"));t===this._numPages&&(n.next.addClass("jp-disabled"),n.last.addClass("jp-disabled"));this._currentPageNum===1&&t>1&&(n.first.removeClass("jp-disabled"),n.previous.removeClass("jp-disabled"));this._currentPageNum===this._numPages&&t<this._numPages&&(n.next.removeClass("jp-disabled"),n.last.removeClass("jp-disabled"))},updateCurrentPage:function(n,t){n.currentPage.removeClass("jp-current");n.currentPage=n.pages.eq(t-1).addClass("jp-current")},updatePagesShowing:function(n,t){var i=n.pages.slice(t.start,t.end).not(n.permPages);n.pagesShowing.not(i).addClass("jp-hidden");i.not(n.pagesShowing).removeClass("jp-hidden");n.pagesShowing=i},updateBreaks:function(n,t){t.start>this.options.startRange||this.options.startRange===0&&t.start>0?n.fstBreak.removeClass("jp-hidden"):n.fstBreak.addClass("jp-hidden");t.end<this._numPages-this.options.endRange?n.lstBreak.removeClass("jp-hidden"):n.lstBreak.addClass("jp-hidden")},callback:function(n,t,i){var r={current:n,interval:i,count:this._numPages},u={showing:this._itemsShowing,oncoming:this._items.slice(t.start+this.options.perPage,t.end+this.options.perPage),range:t,count:this._items.length};r.interval.start=r.interval.start+1;u.range.start=u.range.start+1;this.options.callback(r,u)},updatePause:function(){if(this.options.pause&&this._numPages>1){if(clearTimeout(this._pause),this.options.clickStop&&this._clicked)return;this._pause=setTimeout(this.bind(function(){this.paginate(this._currentPageNum!==this._numPages?this._currentPageNum+1:1)},this),this.options.pause)}},setMinHeight:function(){this.options.minHeight&&!this._container.is("table, tbody")&&setTimeout(this.bind(function(){this._container.css({"min-height":this._container.css("height")})},this),1e3)},bind:function(n,t){return function(){return n.apply(t,arguments)}},destroy:function(){this.jQdocument.unbind("keydown.jPages");this._container.unbind("mousewheel.jPages DOMMouseScroll.jPages");this.options.minHeight&&this._container.css("min-height","");this._cssAnimSupport&&this.options.animation.length?this._items.removeClass("animated jp-hidden jp-invisible "+this.options.animation):this._items.removeClass("jp-hidden").fadeTo(0,1);this._holder.unbind("click.jPages").empty()}};n.fn[f]=function(t){var i=n.type(t);return i==="object"?(this.length&&!n.data(this,f)&&(u=new e(this,t),this.each(function(){n.data(this,f,u)})),this):i==="string"&&t==="destroy"?(u.destroy(),this.each(function(){n.removeData(this,f)}),this):i==="number"&&t%1==0?(u.validNewPage(t)&&u.paginate(t),this):this}}(jQuery,window,document),function(n,t,i,r){var u=n(t);n.fn.lazyload=function(f){function s(){var t=0;o.each(function(){var i=n(this);if((!e.skip_invisible||i.is(":visible"))&&!n.abovethetop(this,e)&&!n.leftofbegin(this,e))if(n.belowthefold(this,e)||n.rightoffold(this,e)){if(++t>e.failure_limit)return!1}else i.trigger("appear"),t=0})}var o=this,h,e={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return f&&(r!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),r!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),n.extend(e,f)),h=e.container===r||e.container===t?u:n(e.container),0===e.event.indexOf("scroll")&&h.bind(e.event,function(){return s()}),this.each(function(){var i=this,t=n(i);i.loaded=!1;(t.attr("src")===r||t.attr("src")===!1)&&t.is("img")&&t.attr("src",e.placeholder);t.one("appear",function(){if(!this.loaded){if(e.appear){var r=o.length;e.appear.call(i,r,e)}n("<img />").bind("load",function(){var r=t.attr("data-"+e.data_attribute),u,f;t.hide();t.is("img")?t.attr("src",r):t.css("background-image","url('"+r+"')");t[e.effect](e.effect_speed);i.loaded=!0;u=n.grep(o,function(n){return!n.loaded});o=n(u);e.load&&(f=o.length,e.load.call(i,f,e))}).attr("src",t.attr("data-"+e.data_attribute))}});0!==e.event.indexOf("scroll")&&t.bind(e.event,function(){i.loaded||t.trigger("appear")})}),u.bind("resize",function(){s()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&u.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&o.each(function(){n(this).trigger("appear")})}),n(i).ready(function(){s()}),this};n.belowthefold=function(i,f){var e;return e=f.container===r||f.container===t?(t.innerHeight?t.innerHeight:u.height())+u.scrollTop():n(f.container).offset().top+n(f.container).height(),e<=n(i).offset().top-f.threshold};n.rightoffold=function(i,f){var e;return e=f.container===r||f.container===t?u.width()+u.scrollLeft():n(f.container).offset().left+n(f.container).width(),e<=n(i).offset().left-f.threshold};n.abovethetop=function(i,f){var e;return e=f.container===r||f.container===t?u.scrollTop():n(f.container).offset().top,e>=n(i).offset().top+f.threshold+n(i).height()};n.leftofbegin=function(i,f){var e;return e=f.container===r||f.container===t?u.scrollLeft():n(f.container).offset().left,e>=n(i).offset().left+f.threshold+n(i).width()};n.inviewport=function(t,i){return!n.rightoffold(t,i)&&!n.leftofbegin(t,i)&&!n.belowthefold(t,i)&&!n.abovethetop(t,i)};n.extend(n.expr[":"],{"below-the-fold":function(t){return n.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!n.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return n.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!n.rightoffold(t,{threshold:0})},"in-viewport":function(t){return n.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!n.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return n.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!n.rightoffold(t,{threshold:0})}})}(jQuery,window,document),function(n){n.fn.pgwSlider=function(t){var o={mainClassName:"pgwSlider",listPosition:"right",selectionMode:"click",transitionEffect:"fading",autoSlide:!0,displayList:!0,displayControls:!1,touchControls:!0,verticalCentering:!1,adaptiveHeight:!1,maxHeight:null,beforeSlide:null,afterSlide:null,adaptiveDuration:200,transitionDuration:500,intervalDuration:3e3},i;if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).pgwSlider(t)}),this;i=this;i.plugin=this;i.data=[];i.config={};i.currentSlide=0;i.slideCount=0;i.resizeEvent=null;i.intervalEvent=null;i.touchFirstPosition=null;i.transitionInProgress=!1;i.window=n(window);var c=function(){return i.config=n.extend({},o,t),h(),i.config.autoSlide&&u(),!0},l=function(n){var t={},s=n.find("a").attr("href"),r,u,f,i,e,o;return typeof s!="undefined"&&s!=""&&(t.link=s,r=n.find("a").attr("target"),typeof r!="undefined"&&r!=""&&(t.linkTarget=r)),u=n.find("img").attr("src"),typeof u!="undefined"&&u!=""&&(t.thumbnail=u),f=n.find("img").attr("data-large-src"),typeof f!="undefined"&&f!=""&&(t.image=f),i=n.find("span").text(),typeof i!="undefined"&&i!=""&&i!=null?t.title=i:(e=n.find("img").attr("alt"),typeof e!="undefined"&&e!=""&&(t.title=e)),o=n.find("img").attr("data-description"),typeof o!="undefined"&&o!=""&&(t.description=o),t},f=function(t,r){return i.config.maxHeight&&(i.plugin.width()>480&&t>i.config.maxHeight?t=i.config.maxHeight:i.plugin.width()<=480&&t+i.plugin.find(".ps-list").height()>i.config.maxHeight&&(t=i.config.maxHeight-i.plugin.find(".ps-list").height())),clearTimeout(i.resizeEvent),i.resizeEvent=setTimeout(function(){var u=(t-(i.slideCount-1)*6)/i.slideCount,f=100/i.slideCount;i.plugin.find(".ps-list > li").css({width:f+"%"});typeof r!="undefined"&&r&&i.config.maxHeight==null?typeof i.plugin.find(".ps-current").animate=="function"?i.plugin.find(".ps-current").animate({height:t},i.config.adaptiveDuration,function(){i.plugin.find(".ps-list > li").animate({height:u},i.config.adaptiveDuration)}):(i.plugin.find(".ps-current").css("height",t),i.plugin.find(".ps-list > li").css("height",u)):(i.plugin.find(".ps-current").css("height",t),i.plugin.find(".ps-list > li").css("height",u));i.config.verticalCentering&&(i.plugin.find(".ps-list > li").each(function(){var t;u>50&&n(this).find("img").height()>u?(t=Math.round((n(this).find("img").height()-u)/2),n(this).find("img").css("margin-top",-t)):n(this).find("img").height()<u?(t=Math.round((u-n(this).find("img").height())/2),n(this).find("img").css("margin-top",t)):n(this).find("img").css("margin-top","")}),i.plugin.find(".ps-current > ul > li").each(function(){var r=n(this).css("display")=="none"?!1:!0,i;r||n(this).show();n(this).show().find("img").height()>t?(i=Math.round((n(this).find("img").height()-t)/2),n(this).find("img").css("margin-top",-i)):n(this).show().find("img").height()<t?(i=Math.round((t-n(this).find("img").height())/2),n(this).find("img").css("margin-top",i)):n(this).find("img").css("margin-top","");r||n(this).hide()}))},100),!0},s=function(){return i.plugin.width()<=480?i.plugin.addClass("narrow").removeClass("wide"):i.plugin.addClass("wide").removeClass("narrow"),!0},h=function(){if(i.plugin.removeClass(i.config.mainClassName).addClass("ps-list"),i.plugin.wrap('<div class="'+i.config.mainClassName+'"><\/div>'),i.plugin=i.plugin.parent(),i.plugin.prepend('<div class="ps-current"><ul><\/ul><span class="ps-caption"><\/span><\/div>'),i.slideCount=i.plugin.find(".ps-list > li").length,i.slideCount==0)throw new Error("PgwSlider - No slider item has been found");i.config.displayControls&&i.slideCount>1&&(i.plugin.find(".ps-current").prepend('<span class="ps-prev"><span class="ps-prevIcon"><\/span><\/span>'),i.plugin.find(".ps-current").append('<span class="ps-next"><span class="ps-nextIcon"><\/span><\/span>'),i.plugin.find(".ps-current .ps-prev").click(function(){i.previousSlide()}),i.plugin.find(".ps-current .ps-next").click(function(){i.nextSlide()}));i.config.displayList||(i.plugin.find(".ps-current").css("width","100%"),i.plugin.find(".ps-list").hide());var t=1;if(i.plugin.find(".ps-list > li").each(function(){var u=l(n(this)),f;u.id=t;i.data.push(u);n(this).addClass("elt_"+u.id);u.title&&(n(this).find("span").length==1?n(this).find("span").text()==""&&n(this).find("span").text(u.title):n(this).find("img").after("<span>"+u.title+"<\/span>"));f=n('<li class="elt_'+t+'"><\/li>');u.image?f.html('<img src="'+u.image+'" alt="'+(u.title?u.title:"")+'">'):u.thumbnail&&f.html('<img src="'+u.thumbnail+'" alt="'+(u.title?u.title:"")+'">');u.link&&f.html('<a href="'+u.link+'"'+(u.linkTarget?' target="'+u.linkTarget+'"':"")+">"+f.html()+"<\/a>");i.plugin.find(".ps-current > ul").append(f);i.config.selectionMode=="mouseOver"&&i.config.transitionEffect=="fading"?(n(this).css("cursor","default").click(function(n){n.preventDefault()}).bind("mouseenter",function(){r(u.id)}),n(this).find("a").css("cursor","default")):n(this).css("cursor","pointer").click(function(n){n.preventDefault();r(u.id)});t++}),i.config.listPosition=="left"&&i.plugin.addClass("listOnTheLeft"),i.config.autoSlide)i.plugin.on("mouseenter",function(){clearInterval(i.intervalEvent);i.intervalEvent=null}).on("mouseleave",function(){u()});r(1);i.plugin.find(".ps-current > ul > li.elt_1 img").on("load",function(){s();var n=i.plugin.find(".ps-current > ul > li.elt_1 img").height();f(n);i.window.resize(function(){s();var n=i.plugin.find(".ps-current > ul > li.elt_"+i.currentSlide+" img").height();f(n,i.config.adaptiveHeight)})});if(i.config.touchControls&&i.slideCount>1){i.plugin.find(".ps-current").on("touchstart",function(n){try{n.originalEvent.touches[0].clientX&&i.touchFirstPosition==null&&(i.touchFirstPosition=n.originalEvent.touches[0].clientX)}catch(n){i.touchFirstPosition=null}});i.plugin.find(".ps-current").on("touchmove",function(n){try{n.originalEvent.touches[0].clientX&&i.touchFirstPosition!=null&&(n.originalEvent.touches[0].clientX>i.touchFirstPosition+50?(i.touchFirstPosition=null,i.previousSlide()):n.originalEvent.touches[0].clientX<i.touchFirstPosition-50&&(i.touchFirstPosition=null,i.nextSlide()))}catch(n){i.touchFirstPosition=null}});i.plugin.find(".ps-current").on("touchend",function(){i.touchFirstPosition=null})}return!0},e=function(n){var t="",r;return n.title&&(t+="<b>"+n.title+"<\/b>"),n.description&&(t!=""&&(t+="<br>"),t+=n.description),t!=""&&(n.link&&(t='<a href="'+n.link+'"'+(n.linkTarget?' target="'+n.linkTarget+'"':"")+">"+t+"<\/a>"),typeof i.plugin.find(".ps-caption").fadeIn=="function"?(i.plugin.find(".ps-caption").html(t),i.plugin.find(".ps-caption").fadeIn(i.config.transitionDuration/2)):(i.plugin.find(".ps-caption").html(t),i.plugin.find(".ps-caption").show())),i.config.displayControls&&(typeof i.plugin.find(".ps-current > .ps-prev").fadeIn=="function"?i.plugin.find(".ps-current > .ps-prev, .ps-current > .ps-next").fadeIn(i.config.transitionDuration/2):i.plugin.find(".ps-current > .ps-prev, .ps-current > .ps-next").show()),typeof i.config.afterSlide=="function"&&i.config.afterSlide(n.id),i.config.adaptiveHeight&&(r=i.plugin.find(".ps-current .elt_"+n.id+" img").height(),f(r,!0)),!0},a=function(t){var f=i.plugin.find(".ps-current > ul"),r,u;return i.plugin.find(".ps-list > li").css("opacity","0.6"),i.plugin.find(".ps-list > li.elt_"+t.id).css("opacity","1"),f.find("li").not(".elt_"+i.currentSlide).not(".elt_"+t.id).each(function(){typeof n(this).stop=="function"&&n(this).stop();n(this).css("position","").css("z-index",1).hide()}),i.currentSlide>0&&(r=f.find(".elt_"+i.currentSlide),typeof r.animate!="function"&&(r.animate=function(n,t,i){r.css(n);i&&i()}),typeof r.stop=="function"&&r.stop(),r.css("position","absolute").animate({opacity:0},i.config.transitionDuration,function(){r.css("position","").css("z-index",1).hide()})),i.currentSlide=t.id,u=f.find(".elt_"+t.id),typeof u.animate!="function"&&(u.animate=function(n,t,i){u.css(n);i&&i()}),typeof u.stop=="function"&&u.stop(),u.css("position","absolute").show().animate({opacity:1},i.config.transitionDuration,function(){u.css("position","").css("z-index",2).show();e(t)}),!0},v=function(n,t){var o=i.plugin.find(".ps-current > ul"),f,s,h,r,u;if(typeof t=="undefined"&&(t="left"),i.currentSlide==0)o.find(".elt_1").css({position:"",left:"",opacity:1,"z-index":2}).show(),i.plugin.find(".ps-list > li.elt_1").css("opacity","1"),e(n);else{if(i.transitionInProgress)return!1;i.transitionInProgress=!0;f=o.width();t=="left"?(s=-f,h=f):(s=f,h=-f);r=o.find(".elt_"+i.currentSlide);typeof r.animate!="function"&&(r.animate=function(n,t,i){r.css(n);i&&i()});r.css("position","absolute").animate({left:s},i.config.transitionDuration,function(){r.css("position","").css("z-index",1).css("left","").css("opacity",0).hide()});u=o.find(".elt_"+n.id);typeof u.animate!="function"&&(u.animate=function(n,t,i){u.css(n);i&&i()});u.css("position","absolute").css("left",h).css("opacity",1).show().animate({left:0},i.config.transitionDuration,function(){u.css("position","").css("left","").css("z-index",2).show();i.transitionInProgress=!1;i.plugin.find(".ps-list > li").css("opacity","0.6");i.plugin.find(".ps-list > li.elt_"+n.id).css("opacity","1");e(n)})}return i.currentSlide=n.id,!0},r=function(n,t,r){if(n==i.currentSlide)return!1;var f=i.data[n-1];if(typeof f=="undefined")throw new Error("PgwSlider - The element "+n+" is undefined");return typeof r=="undefined"&&(r="left"),typeof i.config.beforeSlide=="function"&&i.config.beforeSlide(n),typeof i.plugin.find(".ps-caption").fadeOut=="function"?i.plugin.find(".ps-caption, .ps-prev, .ps-next").fadeOut(i.config.transitionDuration/2):i.plugin.find(".ps-caption, .ps-prev, .ps-next").hide(),i.config.transitionEffect=="sliding"?v(f,r):a(f),typeof t!="undefined"&&i.config.autoSlide&&u(),!0},u=function(){return clearInterval(i.intervalEvent),i.slideCount>1&&i.config.autoSlide&&(i.intervalEvent=setInterval(function(){var n;n=i.currentSlide+1<=i.slideCount?i.currentSlide+1:1;r(n)},i.config.intervalDuration)),!0};return i.startSlide=function(){return i.config.autoSlide=!0,u(),!0},i.stopSlide=function(){return i.config.autoSlide=!1,clearInterval(i.intervalEvent),!0},i.getCurrentSlide=function(){return i.currentSlide},i.getSlideCount=function(){return i.slideCount},i.displaySlide=function(n){return r(n,!0),!0},i.nextSlide=function(){var n;return n=i.currentSlide+1<=i.slideCount?i.currentSlide+1:1,r(n,!0,"left"),!0},i.previousSlide=function(){var n;return n=i.currentSlide-1>=1?i.currentSlide-1:i.slideCount,r(n,!0,"right"),!0},i.destroy=function(t){return clearInterval(i.intervalEvent),typeof t!="undefined"?(i.plugin.find(".ps-list > li").each(function(){n(this).attr("style",null).removeClass().css("cursor","").unbind("click").unbind("mouseenter");n(this).find("a").css("cursor","");n(this).find("img").attr("style",null)}),i.plugin.find(".ps-list").addClass(i.config.mainClassName).removeClass("ps-list"),i.plugin.find(".ps-current").unwrap().remove(),i.hide()):i.parent().remove(),i.plugin=null,i.data=[],i.config={},i.currentSlide=0,i.slideCount=0,i.resizeEvent=null,i.intervalEvent=null,i.touchFirstPosition=null,i.transitionInProgress=!1,i.window=null,!0},i.reload=function(t){return i.destroy(!0),i=this,i.plugin=this,i.window=n(window),i.plugin.show(),i.config=n.extend({},o,t),h(),i.config.autoSlide&&u(),!0},c(),this}}(window.Zepto||window.jQuery);jQuery(document).ready(function(){jQuery("img.lazy").lazyload()});$(document).ready(function(){$("#slideshow > div:gt(0)").hide();setInterval(function(){$("#slideshow > div:first").fadeOut(1e3).next().fadeIn(1e3).end().appendTo("#slideshow")},7e3)});$(".menucate").each(function(){var t=window.location.pathname,n=$(this),i=n.attr("href");i==t&&n.addClass("active")});images=[];$("#slideshow div").each(function(){images.push($(this))});imgcount=images.length;$("#slideshow div").hide();$("#slideshow div").first().show();currentItem=0;$(".ps-next").click(function(){$("#slideshow div").hide();currentItem++;images[currentItem%imgcount].show()});$(".ps-prev").click(function(){$("#slideshow div").hide();currentItem--;currentItem<0&&(currentItem=imgcount-1);images[currentItem%imgcount].show()}),function(n){n.fn.bPopup=function(t,i){function lt(){r.contentContainer=n(r.contentContainer||u);switch(r.content){case"iframe":var t=n('<iframe class="b-iframe" '+r.iframeAttr+"><\/iframe>");t.appendTo(r.contentContainer);nt=u.outerHeight(!0);tt=u.outerWidth(!0);it();t.attr("src",r.loadUrl);a(r.loadCallback);break;case"image":it();n("<img />").load(function(){a(r.loadCallback);ot(n(this))}).attr("src",r.loadUrl).hide().appendTo(r.contentContainer);break;default:it();n('<div class="b-ajax-wrapper"><\/div>').load(r.loadUrl,r.loadData,function(){a(r.loadCallback);ot(n(this))}).hide().appendTo(r.contentContainer)}}function it(){r.modal&&n('<div class="b-modal '+f+'"><\/div>').css({backgroundColor:r.modalColor,position:"fixed",top:0,right:0,bottom:0,left:0,opacity:0,zIndex:r.zIndex+k}).appendTo(r.appendTo).fadeTo(r.speed,r.opacity);ft();u.data("bPopup",r).data("id",f).css({left:"slideIn"==r.transition||"slideBack"==r.transition?"slideBack"==r.transition?s.scrollLeft()+b:-1*(g+tt):c(!(!r.follow[0]&&y||e)),position:r.positionStyle||"absolute",top:"slideDown"==r.transition||"slideUp"==r.transition?"slideUp"==r.transition?s.scrollTop()+w:d+-1*nt:l(!(!r.follow[1]&&v||e)),"z-index":r.zIndex+k+1}).each(function(){r.appending&&n(this).appendTo(r.appendTo)});st(!0)}function h(){return r.modal&&n(".b-modal."+u.data("id")).fadeTo(r.speed,0,function(){n(this).remove()}),r.scrollBar||n("html").css("overflow","auto"),n(".b-modal."+f).unbind("click"),s.unbind("keydown."+f),o.unbind("."+f).data("bPopup",0<o.data("bPopup")-1?o.data("bPopup")-1:null),u.undelegate(".bClose, ."+r.closeClass,"click."+f,h).data("bPopup",null),st(),!1}function ot(n){var i=n.width(),f=n.height(),t={};r.contentContainer.css({height:f,width:i});f>=u.height()&&(t.height=u.height());i>=u.width()&&(t.width=u.width());nt=u.outerHeight(!0);tt=u.outerWidth(!0);ft();r.contentContainer.css({height:"auto",width:"auto"});t.left=c(!(!r.follow[0]&&y||e));t.top=l(!(!r.follow[1]&&v||e));u.animate(t,250,function(){n.show();ut=et()})}function at(){o.data("bPopup",k);u.delegate(".bClose, ."+r.closeClass,"click."+f,h);r.modalClose&&n(".b-modal."+f).css("cursor","pointer").bind("click",h);!vt&&(r.follow[0]||r.follow[1])&&o.bind("scroll."+f,function(){ut&&u.dequeue().animate({left:r.follow[0]?c(!e):"auto",top:r.follow[1]?l(!e):"auto"},r.followSpeed,r.followEasing)}).bind("resize."+f,function(){w=p.innerHeight||o.height();b=p.innerWidth||o.width();(ut=et())&&(clearTimeout(ct),ct=setTimeout(function(){ft();u.dequeue().each(function(){e?n(this).css({left:g,top:d}):n(this).animate({left:r.follow[0]?c(!0):"auto",top:r.follow[1]?l(!0):"auto"},r.followSpeed,r.followEasing)})},50))});r.escClose&&s.bind("keydown."+f,function(n){27==n.which&&h()})}function st(n){function t(t){u.css({display:"block",opacity:1}).animate(t,r.speed,r.easing,function(){ht(n)})}switch(n?r.transition:r.transitionClose||r.transition){case"slideIn":t({left:n?c(!(!r.follow[0]&&y||e)):s.scrollLeft()-(tt||u.outerWidth(!0))-rt});break;case"slideBack":t({left:n?c(!(!r.follow[0]&&y||e)):s.scrollLeft()+b+rt});break;case"slideDown":t({top:n?l(!(!r.follow[1]&&v||e)):s.scrollTop()-(nt||u.outerHeight(!0))-rt});break;case"slideUp":t({top:n?l(!(!r.follow[1]&&v||e)):s.scrollTop()+w+rt});break;default:u.stop().fadeTo(r.speed,n?1:0,function(){ht(n)})}}function ht(n){n?(at(),a(i),r.autoClose&&setTimeout(h,r.autoClose)):(u.hide(),a(r.onClose),r.loadUrl&&(r.contentContainer.empty(),u.css({height:"auto",width:"auto"})))}function c(n){return n?g+s.scrollLeft():g}function l(n){return n?d+s.scrollTop():d}function a(t){n.isFunction(t)&&t.call(u)}function ft(){d=v?r.position[1]:Math.max(0,(w-u.outerHeight(!0))/2-r.amsl);g=y?r.position[0]:(b-u.outerWidth(!0))/2;ut=et()}function et(){return w>u.outerHeight(!0)&&b>u.outerWidth(!0)}var r;n.isFunction(t)&&(i=t,t=null);r=n.extend({},n.fn.bPopup.defaults,t);r.scrollBar||n("html").css("overflow","hidden");var u=this,s=n(document),p=window,o=n(p),w=p.innerHeight||o.height(),b=p.innerWidth||o.width(),vt=/OS 6(_\d)+/i.test(navigator.userAgent),rt=200,k=0,f,ut,v,y,e,d,g,nt,tt,ct;return u.close=function(){r=this.data("bPopup");f="__b-popup"+o.data("bPopup")+"__";h()},u.each(function(){n(this).data("bPopup")||(a(r.onOpen),k=(o.data("bPopup")||0)+1,f="__b-popup"+k+"__",v="auto"!==r.position[1],y="auto"!==r.position[0],e="fixed"===r.positionStyle,nt=u.outerHeight(!0),tt=u.outerWidth(!0),r.loadUrl?lt():it())})};n.fn.bPopup.defaults={amsl:50,appending:!0,appendTo:"body",autoClose:!1,closeClass:"b-close",content:"ajax",contentContainer:!1,easing:"swing",escClose:!0,follow:[!0,!0],followEasing:"swing",followSpeed:500,iframeAttr:'scrolling="no" frameborder="0"',loadCallback:!1,loadData:!1,loadUrl:!1,modal:!0,modalClose:!0,modalColor:"#000",onClose:!1,onOpen:!1,opacity:.7,position:["auto","auto"],positionStyle:"absolute",scrollBar:!0,speed:250,transition:"fadeIn",transitionClose:!1,zIndex:9997}}(jQuery),function(n,t,i,r){var p=i("html"),e=i(n),o=i(t),u=i.fancybox=function(){u.open.apply(this,arguments)},y=navigator.userAgent.match(/msie/i),v=null,s=t.createTouch!==r,a=function(n){return n&&n.hasOwnProperty&&n instanceof i},c=function(n){return n&&"string"===i.type(n)},l=function(n){return c(n)&&0<n.indexOf("%")},f=function(n,t){var i=parseInt(n,10)||0;return t&&l(n)&&(i*=u.getViewport()[t]/100),Math.ceil(i)},h=function(n,t){return f(n,t)+"px"};i.extend(u,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!s,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"><\/div><\/div><\/div><\/div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(y?' allowtransparency="true"':"")+"><\/iframe>",error:'<p class="fancybox-error">Mời bạn chọn sản phẩm muốn mua để trả góp.<\/p>',closeBtn:'<a title="Close" onClick="Tgreset()" class="fancybox-item fancybox-close" href="javascript:;"><\/a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span><\/span><\/a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span><\/span><\/a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeChange:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(n,t){if(n&&(i.isPlainObject(t)||(t={}),!1!==u.close(!0)))return i.isArray(n)||(n=a(n)?i(n).get():[n]),i.each(n,function(f,e){var h={},s,y,l,o,v;"object"===i.type(e)&&(e.nodeType&&(e=i(e)),a(e)?(h={href:e.data("fancybox-href")||e.attr("href"),title:e.data("fancybox-title")||e.attr("title"),isDom:!0,element:e},i.metadata&&i.extend(!0,h,e.metadata())):h=e);s=t.href||h.href||(c(e)?e:null);y=t.title!==r?t.title:h.title||"";o=(l=t.content||h.content)?"html":t.type||h.type;!o&&h.isDom&&(o=e.data("fancybox-type"),o||(o=(o=e.prop("class").match(/fancybox\.(\w+)/))?o[1]:null));c(s)&&(o||(u.isImage(s)?o="image":u.isSWF(s)?o="swf":"#"===s.charAt(0)?o="inline":c(e)&&(o="html",l=e)),"ajax"===o&&(v=s.split(/\s+/,2),s=v.shift(),v=v.shift()));l||("inline"===o?s?l=i(c(s)?s.replace(/.*(?=#[^\s]+$)/,""):s):h.isDom&&(l=e):"html"===o?l=s:!o&&!s&&h.isDom&&(o="inline",l=e));i.extend(h,{href:s,type:o,content:l,title:y,selector:v});n[f]=h}),u.opts=i.extend(!0,{},u.defaults,t),t.keys!==r&&(u.opts.keys=t.keys?i.extend({},u.defaults.keys,t.keys):!1),u.group=n,u._start(u.opts.index)},cancel:function(){var n=u.coming;n&&!1!==u.trigger("onCancel")&&(u.hideLoading(),u.ajaxLoad&&u.ajaxLoad.abort(),u.ajaxLoad=null,u.imgPreload&&(u.imgPreload.onload=u.imgPreload.onerror=null),n.wrap&&n.wrap.stop(!0,!0).trigger("onReset").remove(),u.coming=null,u.current||u._afterZoomOut(n))},close:function(n){u.cancel();!1!==u.trigger("beforeClose")&&(u.unbindEvents(),u.isActive&&(!u.isOpen||!0===n?(i(".fancybox-wrap").stop(!0).trigger("onReset").remove(),u._afterZoomOut()):(u.isOpen=u.isOpened=!1,u.isClosing=!0,i(".fancybox-item, .fancybox-nav").remove(),u.wrap.stop(!0,!0).removeClass("fancybox-opened"),u.transitions[u.current.closeMethod]())))},play:function(n){var t=function(){clearTimeout(u.player.timer)},i=function(){t();u.current&&u.player.isActive&&(u.player.timer=setTimeout(u.next,u.current.playSpeed))},r=function(){t();o.unbind(".player");u.player.isActive=!1;u.trigger("onPlayEnd")};!0!==n&&(u.player.isActive||!1===n)?r():u.current&&(u.current.loop||u.current.index<u.group.length-1)&&(u.player.isActive=!0,o.bind({"onCancel.player beforeClose.player":r,"onUpdate.player":i,"beforeLoad.player":t}),i(),u.trigger("onPlayStart"))},next:function(n){var t=u.current;t&&(c(n)||(n=t.direction.next),u.jumpto(t.index+1,n,"next"))},prev:function(n){var t=u.current;t&&(c(n)||(n=t.direction.prev),u.jumpto(t.index-1,n,"prev"))},jumpto:function(n,t,i){var e=u.current;e&&(n=f(n),u.direction=t||e.direction[n>=e.index?"next":"prev"],u.router=i||"jumpto",e.loop&&(0>n&&(n=e.group.length+n%e.group.length),n%=e.group.length),e.group[n]!==r&&(u.cancel(),u._start(n)))},reposition:function(n,t){var f=u.current,e=f?f.wrap:null,r;e&&(r=u._getPosition(t),n&&"scroll"===n.type?(delete r.position,e.stop(!0,!0).animate(r,200)):(e.css(r),f.pos=i.extend({},f.dim,r)))},update:function(n){var t=n&&n.type,i=!t||"orientationchange"===t;i&&(clearTimeout(v),v=null);u.isOpen&&!v&&(v=setTimeout(function(){var r=u.current;r&&!u.isClosing&&(u.wrap.removeClass("fancybox-tmp"),(i||"load"===t||"resize"===t&&r.autoResize)&&u._setDimension(),"scroll"===t&&r.canShrink||u.reposition(n),u.trigger("onUpdate"),v=null)},i&&!s?0:300))},toggle:function(n){u.isOpen&&(u.current.fitToView="boolean"===i.type(n)?n:!u.current.fitToView,s&&(u.wrap.removeAttr("style").addClass("fancybox-tmp"),u.trigger("onUpdate")),u.update())},hideLoading:function(){o.unbind(".loading");i("#fancybox-loading").remove()},showLoading:function(){var t,n;u.hideLoading();t=i('<div id="fancybox-loading"><div><\/div><\/div>').click(u.cancel).appendTo("body");o.bind("keydown.loading",function(n){27===(n.which||n.keyCode)&&(n.preventDefault(),u.cancel())});u.defaults.fixed||(n=u.getViewport(),t.css({position:"absolute",top:.5*n.h+n.y,left:.5*n.w+n.x}))},getViewport:function(){var i=u.current&&u.current.locked||!1,t={x:e.scrollLeft(),y:e.scrollTop()};return i?(t.w=i[0].clientWidth,t.h=i[0].clientHeight):(t.w=s&&n.innerWidth?n.innerWidth:e.width(),t.h=s&&n.innerHeight?n.innerHeight:e.height()),t},unbindEvents:function(){u.wrap&&a(u.wrap)&&u.wrap.unbind(".fb");o.unbind(".fb");e.unbind(".fb")},bindEvents:function(){var n=u.current,t;n&&(e.bind("orientationchange.fb"+(s?"":" resize.fb")+(n.autoCenter&&!n.locked?" scroll.fb":""),u.update),(t=n.keys)&&o.bind("keydown.fb",function(f){var e=f.which||f.keyCode,o=f.target||f.srcElement;if(27===e&&u.coming)return!1;f.ctrlKey||f.altKey||f.shiftKey||f.metaKey||o&&(o.type||i(o).is("[contenteditable]"))||i.each(t,function(t,o){return 1<n.group.length&&o[e]!==r?(u[t](o[e]),f.preventDefault(),!1):-1<i.inArray(e,o)?(u[t](),f.preventDefault(),!1):void 0})}),i.fn.mousewheel&&n.mouseWheel&&u.wrap.bind("mousewheel.fb",function(t,r,f,e){for(var o=i(t.target||null),s=!1;o.length&&!s&&!o.is(".fancybox-skin")&&!o.is(".fancybox-wrap");)s=o[0]&&!(o[0].style.overflow&&"hidden"===o[0].style.overflow)&&(o[0].clientWidth&&o[0].scrollWidth>o[0].clientWidth||o[0].clientHeight&&o[0].scrollHeight>o[0].clientHeight),o=i(o).parent();0!==r&&!s&&1<u.group.length&&!n.canShrink&&(0<e||0<f?u.prev(0<e?"down":"left"):(0>e||0>f)&&u.next(0>e?"up":"right"),t.preventDefault())}))},trigger:function(n,t){var f,r=t||u.coming||u.current;if(r){if(i.isFunction(r[n])&&(f=r[n].apply(r,Array.prototype.slice.call(arguments,1))),!1===f)return!1;r.helpers&&i.each(r.helpers,function(t,f){f&&u.helpers[t]&&i.isFunction(u.helpers[t][n])&&u.helpers[t][n](i.extend(!0,{},u.helpers[t].defaults,f),r)});o.trigger(n)}},isImage:function(n){return c(n)&&n.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(n){return c(n)&&n.match(/\.(swf)((\?|#).*)?$/i)},_start:function(n){var t={},e,r;if(n=f(n),e=u.group[n]||null,!e)return!1;if(t=i.extend(!0,{},u.opts,e),e=t.margin,r=t.padding,"number"===i.type(e)&&(t.margin=[e,e,e,e]),"number"===i.type(r)&&(t.padding=[r,r,r,r]),t.modal&&i.extend(!0,t,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),t.autoSize&&(t.autoWidth=t.autoHeight=!0),"auto"===t.width&&(t.autoWidth=!0),"auto"===t.height&&(t.autoHeight=!0),t.group=u.group,t.index=n,u.coming=t,!1===u.trigger("beforeLoad"))u.coming=null;else{if(r=t.type,e=t.href,!r)return u.coming=null,u.current&&u.router&&"jumpto"!==u.router?(u.current.index=n,u[u.router](u.direction)):!1;if(u.isActive=!0,("image"===r||"swf"===r)&&(t.autoHeight=t.autoWidth=!1,t.scrolling="visible"),"image"===r&&(t.aspectRatio=!0),"iframe"===r&&s&&(t.scrolling="scroll"),t.wrap=i(t.tpl.wrap).addClass("fancybox-"+(s?"mobile":"desktop")+" fancybox-type-"+r+" fancybox-tmp "+t.wrapCSS).appendTo(t.parent||"body"),i.extend(t,{skin:i(".fancybox-skin",t.wrap),outer:i(".fancybox-outer",t.wrap),inner:i(".fancybox-inner",t.wrap)}),i.each(["Top","Right","Bottom","Left"],function(n,i){t.skin.css("padding"+i,h(t.padding[n]))}),u.trigger("onReady"),"inline"===r||"html"===r){if(!t.content||!t.content.length)return u._error("content")}else if(!e)return u._error("href");"image"===r?u._loadImage():"ajax"===r?u._loadAjax():"iframe"===r?u._loadIframe():u._afterLoad()}},_error:function(n){i.extend(u.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:n,content:u.coming.tpl.error});u._afterLoad()},_loadImage:function(){var n=u.imgPreload=new Image;n.onload=function(){this.onload=this.onerror=null;u.coming.width=this.width/u.opts.pixelRatio;u.coming.height=this.height/u.opts.pixelRatio;u._afterLoad()};n.onerror=function(){this.onload=this.onerror=null;u._error("image")};n.src=u.coming.href;!0!==n.complete&&u.showLoading()},_loadAjax:function(){var n=u.coming;u.showLoading();u.ajaxLoad=i.ajax(i.extend({},n.ajax,{url:n.href,error:function(n,t){u.coming&&"abort"!==t?u._error("ajax",n):u.hideLoading()},success:function(t,i){"success"===i&&(n.content=t,u._afterLoad())}}))},_loadIframe:function(){var n=u.coming,t=i(n.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",s?"auto":n.iframe.scrolling).attr("src",n.href);i(n.wrap).bind("onReset",function(){try{i(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(n){}});n.iframe.preload&&(u.showLoading(),t.one("load",function(){i(this).data("ready",1);s||i(this).bind("load.fb",u.update);i(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();u._afterLoad()}));n.content=t.appendTo(n.inner);n.iframe.preload||u._afterLoad()},_preloadImages:function(){for(var r=u.group,i=u.current,f=r.length,e=i.preload?Math.min(i.preload,f-1):0,n,t=1;t<=e;t+=1)n=r[(i.index+t)%f],"image"===n.type&&n.href&&((new Image).src=n.href)},_afterLoad:function(){var n=u.coming,r=u.current,t,s,f,e,o;if(u.hideLoading(),n&&!1!==u.isActive)if(!1===u.trigger("afterLoad",n,r))n.wrap.stop(!0).trigger("onReset").remove(),u.coming=null;else{r&&(u.trigger("beforeChange",r),r.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove());u.unbindEvents();t=n.content;s=n.type;f=n.scrolling;i.extend(u,{wrap:n.wrap,skin:n.skin,outer:n.outer,inner:n.inner,current:n,previous:r});e=n.href;switch(s){case"inline":case"ajax":case"html":n.selector?t=i("<div>").html(t).find(n.selector):a(t)&&(t.data("fancybox-placeholder")||t.data("fancybox-placeholder",i('<div class="fancybox-placeholder"><\/div>').insertAfter(t).hide()),t=t.show().detach(),n.wrap.bind("onReset",function(){i(this).find(t).length&&t.hide().replaceAll(t.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case"image":t=n.tpl.image.replace("{href}",e);break;case"swf":t='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+e+'"><\/param>';o="";i.each(n.swf,function(n,i){t+='<param name="'+n+'" value="'+i+'"><\/param>';o+=" "+n+'="'+i+'"'});t+='<embed src="'+e+'" type="application/x-shockwave-flash" width="100%" height="100%"'+o+"><\/embed><\/object>"}a(t)&&t.parent().is(n.inner)||n.inner.append(t);u.trigger("beforeShow");n.inner.css("overflow","yes"===f?"scroll":"no"===f?"hidden":f);u._setDimension();u.reposition();u.isOpen=!1;u.coming=null;u.bindEvents();u.isOpened?r.prevMethod&&u.transitions[r.prevMethod]():i(".fancybox-wrap").not(n.wrap).stop(!0).trigger("onReset").remove();u.transitions[u.isOpened?n.nextMethod:n.openMethod]();u._preloadImages()}},_setDimension:function(){var o=u.getViewport(),st=0,s=!1,n=!1,s=u.wrap,nt=u.skin,e=u.inner,r=u.current,n=r.width,t=r.height,c=r.minWidth,a=r.minHeight,v=r.maxWidth,y=r.maxHeight,ht=r.scrolling,ft=r.scrollOutside?r.scrollbarWidth:0,p=r.margin,w=f(p[1]+p[3]),tt=f(p[0]+p[2]),et,b,rt,d,k,it,ot,g,ut;if(s.add(nt).add(e).width("auto").height("auto").removeClass("fancybox-tmp"),p=f(nt.outerWidth(!0)-nt.width()),et=f(nt.outerHeight(!0)-nt.height()),b=w+p,rt=tt+et,d=l(n)?(o.w-b)*f(n)/100:n,k=l(t)?(o.h-rt)*f(t)/100:t,"iframe"===r.type){if(ut=r.content,r.autoHeight&&1===ut.data("ready"))try{ut[0].contentWindow.document.location&&(e.width(d).height(9999),it=ut.contents().find("body"),ft&&it.css("overflow-x","hidden"),k=it.outerHeight(!0))}catch(ct){}}else(r.autoWidth||r.autoHeight)&&(e.addClass("fancybox-tmp"),r.autoWidth||e.width(d),r.autoHeight||e.height(k),r.autoWidth&&(d=e.width()),r.autoHeight&&(k=e.height()),e.removeClass("fancybox-tmp"));if(n=f(d),t=f(k),g=d/k,c=f(l(c)?f(c,"w")-b:c),v=f(l(v)?f(v,"w")-b:v),a=f(l(a)?f(a,"h")-rt:a),y=f(l(y)?f(y,"h")-rt:y),it=v,ot=y,r.fitToView&&(v=Math.min(o.w-b,v),y=Math.min(o.h-rt,y)),b=o.w-w,tt=o.h-tt,r.aspectRatio?(n>v&&(n=v,t=f(n/g)),t>y&&(t=y,n=f(t*g)),n<c&&(n=c,t=f(n/g)),t<a&&(t=a,n=f(t*g))):(n=Math.max(c,Math.min(n,v)),r.autoHeight&&"iframe"!==r.type&&(e.width(n),t=e.height()),t=Math.max(a,Math.min(t,y))),r.fitToView)if(e.width(n).height(t),s.width(n+p),o=s.width(),w=s.height(),r.aspectRatio)for(;(o>b||w>tt)&&n>c&&t>a&&!(19<st++);)t=Math.max(a,Math.min(y,t-10)),n=f(t*g),n<c&&(n=c,t=f(n/g)),n>v&&(n=v,t=f(n/g)),e.width(n).height(t),s.width(n+p),o=s.width(),w=s.height();else n=Math.max(c,Math.min(n,n-(o-b))),t=Math.max(a,Math.min(t,t-(w-tt)));ft&&"auto"===ht&&t<k&&n+p+ft<b&&(n+=ft);e.width(n).height(t);s.width(n+p);o=s.width();w=s.height();s=(o>b||w>tt)&&n>c&&t>a;n=r.aspectRatio?n<it&&t<ot&&n<d&&t<k:(n<it||t<ot)&&(n<d||t<k);i.extend(r,{dim:{width:h(o),height:h(w)},origWidth:d,origHeight:k,canShrink:s,canExpand:n,wPadding:p,hPadding:et,wrapSpace:w-nt.outerHeight(!0),skinSpace:nt.height()-t});!ut&&r.autoHeight&&t>a&&t<y&&!n&&e.height("auto")},_getPosition:function(n){var i=u.current,r=u.getViewport(),t=i.margin,f=u.wrap.width()+t[1]+t[3],e=u.wrap.height()+t[0]+t[2],t={position:"absolute",top:t[0],left:t[3]};return i.autoCenter&&i.fixed&&!n&&e<=r.h&&f<=r.w?t.position="fixed":i.locked||(t.top+=r.y,t.left+=r.x),t.top=h(Math.max(t.top,t.top+(r.h-e)*i.topRatio)),t.left=h(Math.max(t.left,t.left+(r.w-f)*i.leftRatio)),t},_afterZoomIn:function(){var n=u.current;n&&(u.isOpen=u.isOpened=!0,u.wrap.css("overflow","visible").addClass("fancybox-opened"),u.update(),(n.closeClick||n.nextClick&&1<u.group.length)&&u.inner.css("cursor","pointer").bind("click.fb",function(t){i(t.target).is("a")||i(t.target).parent().is("a")||(t.preventDefault(),u[n.closeClick?"close":"next"]())}),n.closeBtn&&i(n.tpl.closeBtn).appendTo(u.skin).bind("click.fb",function(n){n.preventDefault();u.close()}),n.arrows&&1<u.group.length&&((n.loop||0<n.index)&&i(n.tpl.prev).appendTo(u.outer).bind("click.fb",u.prev),(n.loop||n.index<u.group.length-1)&&i(n.tpl.next).appendTo(u.outer).bind("click.fb",u.next)),u.trigger("afterShow"),!n.loop&&n.index===n.group.length-1?u.play(!1):u.opts.autoPlay&&!u.player.isActive&&(u.opts.autoPlay=!1,u.play()))},_afterZoomOut:function(n){n=n||u.current;i(".fancybox-wrap").trigger("onReset").remove();i.extend(u,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null});u.trigger("afterClose",n)}});u.transitions={getOrigPosition:function(){var n=u.current,f=n.element,t=n.orig,i={},e=50,o=50,s=n.hPadding,c=n.wPadding,r=u.getViewport();return!t&&n.isDom&&f.is(":visible")&&(t=f.find("img:first"),t.length||(t=f)),a(t)?(i=t.offset(),t.is("img")&&(e=t.outerWidth(),o=t.outerHeight())):(i.top=r.y+(r.h-o)*n.topRatio,i.left=r.x+(r.w-e)*n.leftRatio),("fixed"===u.wrap.css("position")||n.locked)&&(i.top-=r.y,i.left-=r.x),{top:h(i.top-s*n.topRatio),left:h(i.left-c*n.leftRatio),width:h(e+c),height:h(o+s)}},step:function(n,t){var e,i,r=t.prop,o,s;i=u.current;o=i.wrapSpace;s=i.skinSpace;("width"===r||"height"===r)&&(e=t.end===t.start?1:(n-t.start)/(t.end-t.start),u.isClosing&&(e=1-e),i="width"===r?i.wPadding:i.hPadding,i=n-i,u.skin[r](f("width"===r?i:i-o*e)),u.inner[r](f("width"===r?i:i-o*e-s*e)))},zoomIn:function(){var n=u.current,t=n.pos,r=n.openEffect,f="elastic"===r,e=i.extend({opacity:1},t);delete e.position;f?(t=this.getOrigPosition(),n.openOpacity&&(t.opacity=.1)):"fade"===r&&(t.opacity=.1);u.wrap.css(t).animate(e,{duration:"none"===r?0:n.openSpeed,easing:n.openEasing,step:f?this.step:null,complete:u._afterZoomIn})},zoomOut:function(){var n=u.current,i=n.closeEffect,r="elastic"===i,t={opacity:.1};r&&(t=this.getOrigPosition(),n.closeOpacity&&(t.opacity=.1));u.wrap.animate(t,{duration:"none"===i?0:n.closeSpeed,easing:n.closeEasing,step:r?this.step:null,complete:u._afterZoomOut})},changeIn:function(){var i=u.current,o=i.nextEffect,t=i.pos,e={opacity:1},r=u.direction,n;t.opacity=.1;"elastic"===o&&(n="down"===r||"up"===r?"top":"left","down"===r||"right"===r?(t[n]=h(f(t[n])-200),e[n]="+=200px"):(t[n]=h(f(t[n])+200),e[n]="-=200px"));"none"===o?u._afterZoomIn():u.wrap.css(t).animate(e,{duration:i.nextSpeed,easing:i.nextEasing,complete:u._afterZoomIn})},changeOut:function(){var n=u.previous,r=n.prevEffect,f={opacity:.1},t=u.direction;"elastic"===r&&(f["down"===t||"up"===t?"top":"left"]=("up"===t||"left"===t?"-":"+")+"=200px");n.wrap.animate(f,{duration:"none"===r?0:n.prevSpeed,easing:n.prevEasing,complete:function(){i(this).trigger("onReset").remove()}})}};u.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!s,fixed:!0},overlay:null,fixed:!1,el:i("html"),create:function(n){n=i.extend({},this.defaults,n);this.overlay&&this.close();this.overlay=i('<div class="fancybox-overlay"><\/div>').appendTo(u.coming?u.coming.parent:n.parent);this.fixed=!1;n.fixed&&u.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(n){var t=this;n=i.extend({},this.defaults,n);this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(n);this.fixed||(e.bind("resize.overlay",i.proxy(this.update,this)),this.update());n.closeClick&&this.overlay.bind("click.overlay",function(n){if(i(n.target).hasClass("fancybox-overlay"))return u.isActive?u.close():t.close(),!1});this.overlay.css(n.css).show()},close:function(){var n,t;e.unbind("resize.overlay");this.el.hasClass("fancybox-lock")&&(i(".fancybox-margin").removeClass("fancybox-margin"),n=e.scrollTop(),t=e.scrollLeft(),this.el.removeClass("fancybox-lock"),e.scrollTop(n).scrollLeft(t));i(".fancybox-overlay").remove().hide();i.extend(this,{overlay:null,fixed:!1})},update:function(){var n="100%",i;this.overlay.width(n).height("100%");y?(i=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),o.width()>i&&(n=o.width())):o.width()>e.width()&&(n=o.width());this.overlay.width(n).height(o.height())},onReady:function(n,t){var r=this.overlay;i(".fancybox-overlay").stop(!0,!0);r||this.create(n);n.locked&&this.fixed&&t.fixed&&(r||(this.margin=o.height()>e.height()?i("html").css("margin-right").replace("px",""):!1),t.locked=this.overlay.append(t.wrap),t.fixed=!1);!0===n.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(n,t){var r,u;t.locked&&(!1!==this.margin&&(i("*").filter(function(){return"fixed"===i(this).css("position")&&!i(this).hasClass("fancybox-overlay")&&!i(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),r=e.scrollTop(),u=e.scrollLeft(),this.el.addClass("fancybox-lock"),e.scrollTop(r).scrollLeft(u));this.open(n)},onUpdate:function(){this.fixed||this.update()},afterClose:function(n){this.overlay&&!u.coming&&this.overlay.fadeOut(n.speedOut,i.proxy(this.close,this))}};u.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(n){var t=u.current,e=t.title,r=n.type;if(i.isFunction(e)&&(e=e.call(t.element,t)),c(e)&&""!==i.trim(e)){t=i('<div class="fancybox-title fancybox-title-'+r+'-wrap">'+e+"<\/div>");switch(r){case"inside":r=u.skin;break;case"outside":r=u.wrap;break;case"over":r=u.inner;break;default:r=u.skin;t.appendTo("body");y&&t.width(t.width());t.wrapInner('<span class="child"><\/span>');u.current.margin[2]+=Math.abs(f(t.css("margin-bottom")))}t["top"===n.position?"prependTo":"appendTo"](r)}}};i.fn.fancybox=function(n){var r,f=i(this),t=this.selector||"",e=function(e){var o=i(this).blur(),c=r,h,s;e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||o.is(".fancybox-wrap")||(h=n.groupAttr||"data-fancybox-group",s=o.attr(h),s||(h="rel",s=o.get(0)[h]),s&&""!==s&&"nofollow"!==s&&(o=t.length?i(t):f,o=o.filter("["+h+'="'+s+'"]'),c=o.index(this)),n.index=c,!1!==u.open(o,n)&&e.preventDefault())};return n=n||{},r=n.index||0,!t||!1===n.live?f.unbind("click.fb-start").bind("click.fb-start",e):o.undelegate(t,"click.fb-start").delegate(t+":not('.fancybox-item, .fancybox-nav')","click.fb-start",e),this.filter("[data-fancybox-start=1]").trigger("click"),this};o.ready(function(){var f,t,e;i.scrollbarWidth===r&&(i.scrollbarWidth=function(){var t=i('<div style="width:50px;height:50px;overflow:auto"><div/><\/div>').appendTo("body"),n=t.children(),n=n.innerWidth()-n.height(99).innerWidth();return t.remove(),n});i.support.fixedPosition===r&&(f=i.support,t=i('<div style="position:fixed;top:20px;"><\/div>').appendTo("body"),e=20===t[0].offsetTop||15===t[0].offsetTop,t.remove(),f.fixedPosition=e);i.extend(u.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")});f=i(n).width();p.addClass("fancybox-lock-test");t=i(n).width();p.removeClass("fancybox-lock-test");i("<style type='text/css'>.fancybox-margin{margin-right:"+(t-f)+"px;}<\/style>").appendTo("head")})}(window,document,jQuery);jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(n,t,i,r,u){return jQuery.easing[jQuery.easing.def](n,t,i,r,u)},easeInQuad:function(n,t,i,r,u){return r*(t/=u)*t+i},easeOutQuad:function(n,t,i,r,u){return-r*(t/=u)*(t-2)+i},easeInOutQuad:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t+i:-r/2*(--t*(t-2)-1)+i},easeInCubic:function(n,t,i,r,u){return r*(t/=u)*t*t+i},easeOutCubic:function(n,t,i,r,u){return r*((t=t/u-1)*t*t+1)+i},easeInOutCubic:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t+i:r/2*((t-=2)*t*t+2)+i},easeInQuart:function(n,t,i,r,u){return r*(t/=u)*t*t*t+i},easeOutQuart:function(n,t,i,r,u){return-r*((t=t/u-1)*t*t*t-1)+i},easeInOutQuart:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t*t+i:-r/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(n,t,i,r,u){return r*(t/=u)*t*t*t*t+i},easeOutQuint:function(n,t,i,r,u){return r*((t=t/u-1)*t*t*t*t+1)+i},easeInOutQuint:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t*t*t+i:r/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(n,t,i,r,u){return-r*Math.cos(t/u*(Math.PI/2))+r+i},easeOutSine:function(n,t,i,r,u){return r*Math.sin(t/u*(Math.PI/2))+i},easeInOutSine:function(n,t,i,r,u){return-r/2*(Math.cos(Math.PI*t/u)-1)+i},easeInExpo:function(n,t,i,r,u){return t==0?i:r*Math.pow(2,10*(t/u-1))+i},easeOutExpo:function(n,t,i,r,u){return t==u?i+r:r*(-Math.pow(2,-10*t/u)+1)+i},easeInOutExpo:function(n,t,i,r,u){return t==0?i:t==u?i+r:(t/=u/2)<1?r/2*Math.pow(2,10*(t-1))+i:r/2*(-Math.pow(2,-10*--t)+2)+i},easeInCirc:function(n,t,i,r,u){return-r*(Math.sqrt(1-(t/=u)*t)-1)+i},easeOutCirc:function(n,t,i,r,u){return r*Math.sqrt(1-(t=t/u-1)*t)+i},easeInOutCirc:function(n,t,i,r,u){return(t/=u/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+i:r/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(n,t,i,r,u){var f=1.70158,e=0,o=r;return t==0?i:(t/=u)==1?i+r:(e||(e=u*.3),o<Math.abs(r)?(o=r,f=e/4):f=e/(2*Math.PI)*Math.asin(r/o),-(o*Math.pow(2,10*(t-=1))*Math.sin((t*u-f)*2*Math.PI/e))+i)},easeOutElastic:function(n,t,i,r,u){var f=1.70158,e=0,o=r;return t==0?i:(t/=u)==1?i+r:(e||(e=u*.3),o<Math.abs(r)?(o=r,f=e/4):f=e/(2*Math.PI)*Math.asin(r/o),o*Math.pow(2,-10*t)*Math.sin((t*u-f)*2*Math.PI/e)+r+i)},easeInOutElastic:function(n,t,i,r,u){var f=1.70158,e=0,o=r;return t==0?i:(t/=u/2)==2?i+r:(e||(e=u*.3*1.5),o<Math.abs(r)?(o=r,f=e/4):f=e/(2*Math.PI)*Math.asin(r/o),t<1)?-.5*o*Math.pow(2,10*(t-=1))*Math.sin((t*u-f)*2*Math.PI/e)+i:o*Math.pow(2,-10*(t-=1))*Math.sin((t*u-f)*2*Math.PI/e)*.5+r+i},easeInBack:function(n,t,i,r,u,f){return f==undefined&&(f=1.70158),r*(t/=u)*t*((f+1)*t-f)+i},easeOutBack:function(n,t,i,r,u,f){return f==undefined&&(f=1.70158),r*((t=t/u-1)*t*((f+1)*t+f)+1)+i},easeInOutBack:function(n,t,i,r,u,f){return(f==undefined&&(f=1.70158),(t/=u/2)<1)?r/2*t*t*(((f*=1.525)+1)*t-f)+i:r/2*((t-=2)*t*(((f*=1.525)+1)*t+f)+2)+i},easeInBounce:function(n,t,i,r,u){return r-jQuery.easing.easeOutBounce(n,u-t,0,r,u)+i},easeOutBounce:function(n,t,i,r,u){return(t/=u)<1/2.75?r*7.5625*t*t+i:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+i:r*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(n,t,i,r,u){return t<u/2?jQuery.easing.easeInBounce(n,t*2,0,r,u)*.5+i:jQuery.easing.easeOutBounce(n,t*2-u,0,r,u)*.5+r*.5+i}});THREE=THREE||{};self.Int32Array||(self.Int32Array=Array,self.Float32Array=Array);THREE.Color=function(n){return n!==void 0&&this.setHex(n),this};THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,copy:function(n){return this.r=n.r,this.g=n.g,this.b=n.b,this},copyGammaToLinear:function(n){return this.r=n.r*n.r,this.g=n.g*n.g,this.b=n.b*n.b,this},copyLinearToGamma:function(n){return this.r=Math.sqrt(n.r),this.g=Math.sqrt(n.g),this.b=Math.sqrt(n.b),this},setRGB:function(n,t,i){return this.r=n,this.g=t,this.b=i,this},setHSV:function(n,t,i){var u,f,r;if(i===0)this.r=this.g=this.b=0;else switch(u=Math.floor(n*6),f=n*6-u,n=i*(1-t),r=i*(1-t*f),t=i*(1-t*(1-f)),u){case 1:this.r=r;this.g=i;this.b=n;break;case 2:this.r=n;this.g=i;this.b=t;break;case 3:this.r=n;this.g=r;this.b=i;break;case 4:this.r=t;this.g=n;this.b=i;break;case 5:this.r=i;this.g=n;this.b=r;break;case 6:case 0:this.r=i;this.g=t;this.b=n}return this},setHex:function(n){return n=Math.floor(n),this.r=(n>>16&255)/255,this.g=(n>>8&255)/255,this.b=(n&255)/255,this},getHex:function(){return~~(this.r*255)<<16^~~(this.g*255)<<8^~~(this.b*255)},getContextStyle:function(){return"rgb("+Math.floor(this.r*255)+","+Math.floor(this.g*255)+","+Math.floor(this.b*255)+")"},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}};THREE.Vector2=function(n,t){this.x=n||0;this.y=t||0};THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(n,t){return this.x=n,this.y=t,this},copy:function(n){return this.x=n.x,this.y=n.y,this},clone:function(){return new THREE.Vector2(this.x,this.y)},add:function(n,t){return this.x=n.x+t.x,this.y=n.y+t.y,this},addSelf:function(n){return this.x+=n.x,this.y+=n.y,this},sub:function(n,t){return this.x=n.x-t.x,this.y=n.y-t.y,this},subSelf:function(n){return this.x-=n.x,this.y-=n.y,this},multiplyScalar:function(n){return this.x*=n,this.y*=n,this},divideScalar:function(n){return n?(this.x/=n,this.y/=n):this.set(0,0),this},negate:function(){return this.multiplyScalar(-1)},dot:function(n){return this.x*n.x+this.y*n.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(n){return Math.sqrt(this.distanceToSquared(n))},distanceToSquared:function(n){var t=this.x-n.x,n=this.y-n.y;return t*t+n*n},setLength:function(n){return this.normalize().multiplyScalar(n)},equals:function(n){return n.x===this.x&&n.y===this.y}};THREE.Vector3=function(n,t,i){this.x=n||0;this.y=t||0;this.z=i||0};THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(n,t,i){return this.x=n,this.y=t,this.z=i,this},setX:function(n){return this.x=n,this},setY:function(n){return this.y=n,this},setZ:function(n){return this.z=n,this},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z,this},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)},add:function(n,t){return this.x=n.x+t.x,this.y=n.y+t.y,this.z=n.z+t.z,this},addSelf:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this},addScalar:function(n){return this.x+=n,this.y+=n,this.z+=n,this},sub:function(n,t){return this.x=n.x-t.x,this.y=n.y-t.y,this.z=n.z-t.z,this},subSelf:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this},multiply:function(n,t){return this.x=n.x*t.x,this.y=n.y*t.y,this.z=n.z*t.z,this},multiplySelf:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this},multiplyScalar:function(n){return this.x*=n,this.y*=n,this.z*=n,this},divideSelf:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z,this},divideScalar:function(n){return n?(this.x/=n,this.y/=n,this.z/=n):this.z=this.y=this.x=0,this},negate:function(){return this.multiplyScalar(-1)},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.lengthSq())},lengthManhattan:function(){return this.x+this.y+this.z},normalize:function(){return this.divideScalar(this.length())},setLength:function(n){return this.normalize().multiplyScalar(n)},cross:function(n,t){return this.x=n.y*t.z-n.z*t.y,this.y=n.z*t.x-n.x*t.z,this.z=n.x*t.y-n.y*t.x,this},crossSelf:function(n){var t=this.x,i=this.y,r=this.z;return this.x=i*n.z-r*n.y,this.y=r*n.x-t*n.z,this.z=t*n.y-i*n.x,this},distanceTo:function(n){return Math.sqrt(this.distanceToSquared(n))},distanceToSquared:function(n){return(new THREE.Vector3).sub(this,n).lengthSq()},setPositionFromMatrix:function(n){this.x=n.n14;this.y=n.n24;this.z=n.n34},setRotationFromMatrix:function(n){var t=Math.cos(this.y);this.y=Math.asin(n.n13);Math.abs(t)>1e-5?(this.x=Math.atan2(-n.n23/t,n.n33/t),this.z=Math.atan2(-n.n12/t,n.n11/t)):(this.x=0,this.z=Math.atan2(n.n21,n.n22))},isZero:function(){return this.lengthSq()<.0001}};THREE.Vector4=function(n,t,i,r){this.x=n||0;this.y=t||0;this.z=i||0;this.w=r!==void 0?r:1};THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(n,t,i,r){return this.x=n,this.y=t,this.z=i,this.w=r,this},copy:function(n){this.x=n.x;this.y=n.y;this.z=n.z;this.w=n.w!==void 0?n.w:1},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)},add:function(n,t){return this.x=n.x+t.x,this.y=n.y+t.y,this.z=n.z+t.z,this.w=n.w+t.w,this},addSelf:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this.w+=n.w,this},sub:function(n,t){return this.x=n.x-t.x,this.y=n.y-t.y,this.z=n.z-t.z,this.w=n.w-t.w,this},subSelf:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this.w-=n.w,this},multiplyScalar:function(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this},divideScalar:function(n){return n?(this.x/=n,this.y/=n,this.z/=n,this.w/=n):(this.z=this.y=this.x=0,this.w=1),this},negate:function(){return this.multiplyScalar(-1)},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w},lengthSq:function(){return this.dot(this)},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScalar(this.length())},setLength:function(n){return this.normalize().multiplyScalar(n)},lerpSelf:function(n,t){return this.x+=(n.x-this.x)*t,this.y+=(n.y-this.y)*t,this.z+=(n.z-this.z)*t,this.w+=(n.w-this.w)*t,this}};THREE.Ray=function(n,t){function tt(n,t,i){return(r.sub(i,n),y=r.dot(t),y<=0)?null:(it=u.add(n,a.copy(t).multiplyScalar(y)),rt=i.distanceTo(it))}function v(n,t,i,f){return r.sub(f,t),u.sub(i,t),a.sub(n,t),p=r.dot(r),o=r.dot(u),w=r.dot(a),b=u.dot(u),k=u.dot(a),d=1/(p*b-o*o),g=(b*w-o*k)*d,nt=(p*k-o*w)*d,g>=0&&nt>=0&&g+nt<1}this.origin=n||new THREE.Vector3;this.direction=t||new THREE.Vector3;this.intersectScene=function(n){return this.intersectObjects(n.children)};this.intersectObjects=function(n){for(var i=[],t=0,r=n.length;t<r;t++)Array.prototype.push.apply(i,this.intersectObject(n[t]));return i.sort(function(n,t){return n.distance-t.distance}),i};var f=new THREE.Vector3,e=new THREE.Vector3,s=new THREE.Vector3,h=new THREE.Vector3,n=new THREE.Vector3,t=new THREE.Vector3,c=new THREE.Vector3,l=new THREE.Vector3,i=new THREE.Vector3;this.intersectObject=function(r){for(var a,b,w,p,u,y=[],o=0,k=r.children.length;o<k;o++)Array.prototype.push.apply(y,this.intersectObject(r.children[o]));if(r instanceof THREE.Particle){if(o=tt(this.origin,this.direction,r.matrixWorld.getPosition()),o===null||o>r.scale.x)return[];u={distance:o,point:r.position,face:null,object:r};y.push(u)}else if(r instanceof THREE.Mesh){if(o=tt(this.origin,this.direction,r.matrixWorld.getPosition()),o===null||o>r.geometry.boundingSphere.radius*Math.max(r.scale.x,Math.max(r.scale.y,r.scale.z)))return y;for(b=r.geometry,w=b.vertices,r.matrixRotationWorld.extractRotation(r.matrixWorld),o=0,k=b.faces.length;o<k;o++)(u=b.faces[o],n.copy(this.origin),t.copy(this.direction),p=r.matrixWorld,c=p.multiplyVector3(c.copy(u.centroid)).subSelf(n),a=c.dot(t),a<=0||!(f=p.multiplyVector3(f.copy(w[u.a].position)),e=p.multiplyVector3(e.copy(w[u.b].position)),s=p.multiplyVector3(s.copy(w[u.c].position)),u instanceof THREE.Face4&&(h=p.multiplyVector3(h.copy(w[u.d].position))),l=r.matrixRotationWorld.multiplyVector3(l.copy(u.normal)),a=t.dot(l),r.doubleSided||(r.flipSided?a>0:a<0)))||((a=l.dot(c.sub(f,n))/a,i.add(n,t.multiplyScalar(a)),u instanceof THREE.Face3)?v(i,f,e,s)&&(u={distance:n.distanceTo(i),point:i.clone(),face:u,object:r},y.push(u)):u instanceof THREE.Face4&&(v(i,f,e,h)||v(i,e,s,h))&&(u={distance:n.distanceTo(i),point:i.clone(),face:u,object:r},y.push(u)))}return y};var r=new THREE.Vector3,u=new THREE.Vector3,a=new THREE.Vector3,y,it,rt,p,o,w,b,k,d,g,nt};THREE.Rectangle=function(){function f(){e=i-n;o=r-t}var n,t,i,r,e,o,u=!0;this.getX=function(){return n};this.getY=function(){return t};this.getWidth=function(){return e};this.getHeight=function(){return o};this.getLeft=function(){return n};this.getTop=function(){return t};this.getRight=function(){return i};this.getBottom=function(){return r};this.set=function(e,o,s,h){u=!1;n=e;t=o;i=s;r=h;f()};this.addPoint=function(e,o){u?(u=!1,n=e,t=o,i=e,r=o):(n=n<e?n:e,t=t<o?t:o,i=i>e?i:e,r=r>o?r:o);f()};this.add3Points=function(e,o,s,h,c,l){u?(u=!1,n=e<s?e<c?e:c:s<c?s:c,t=o<h?o<l?o:l:h<l?h:l,i=e>s?e>c?e:c:s>c?s:c,r=o>h?o>l?o:l:h>l?h:l):(n=e<s?e<c?e<n?e:n:c<n?c:n:s<c?s<n?s:n:c<n?c:n,t=o<h?o<l?o<t?o:t:l<t?l:t:h<l?h<t?h:t:l<t?l:t,i=e>s?e>c?e>i?e:i:c>i?c:i:s>c?s>i?s:i:c>i?c:i,r=o>h?o>l?o>r?o:r:l>r?l:r:h>l?h>r?h:r:l>r?l:r);f()};this.addRectangle=function(e){u?(u=!1,n=e.getLeft(),t=e.getTop(),i=e.getRight(),r=e.getBottom()):(n=n<e.getLeft()?n:e.getLeft(),t=t<e.getTop()?t:e.getTop(),i=i>e.getRight()?i:e.getRight(),r=r>e.getBottom()?r:e.getBottom());f()};this.inflate=function(u){n-=u;t-=u;i+=u;r+=u;f()};this.minSelf=function(u){n=n>u.getLeft()?n:u.getLeft();t=t>u.getTop()?t:u.getTop();i=i<u.getRight()?i:u.getRight();r=r<u.getBottom()?r:u.getBottom();f()};this.intersects=function(u){return Math.min(i,u.getRight())-Math.max(n,u.getLeft())>=0&&Math.min(r,u.getBottom())-Math.max(t,u.getTop())>=0};this.empty=function(){u=!0;r=i=t=n=0;f()};this.isEmpty=function(){return u}};THREE.Math={clamp:function(n,t,i){return n<t?t:n>i?i:n},clampBottom:function(n,t){return n<t?t:n},mapLinear:function(n,t,i,r,u){return r+(n-t)*(u-r)/(i-t)},random16:function(){return(65280*Math.random()+255*Math.random())/65535}};THREE.Matrix3=function(){this.m=[]};THREE.Matrix3.prototype={constructor:THREE.Matrix3,transpose:function(){var t,n=this.m;return t=n[1],n[1]=n[3],n[3]=t,t=n[2],n[2]=n[6],n[6]=t,t=n[5],n[5]=n[7],n[7]=t,this},transposeIntoArray:function(n){var t=this.m;return n[0]=t[0],n[1]=t[3],n[2]=t[6],n[3]=t[1],n[4]=t[4],n[5]=t[7],n[6]=t[2],n[7]=t[5],n[8]=t[8],this}};THREE.Matrix4=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){this.set(n!==void 0?n:1,t||0,i||0,r||0,u||0,f!==void 0?f:1,e||0,o||0,s||0,h||0,c!==void 0?c:1,l||0,a||0,v||0,y||0,p!==void 0?p:1);this.flat=Array(16);this.m33=new THREE.Matrix3};THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){return this.n11=n,this.n12=t,this.n13=i,this.n14=r,this.n21=u,this.n22=f,this.n23=e,this.n24=o,this.n31=s,this.n32=h,this.n33=c,this.n34=l,this.n41=a,this.n42=v,this.n43=y,this.n44=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(n){return this.set(n.n11,n.n12,n.n13,n.n14,n.n21,n.n22,n.n23,n.n24,n.n31,n.n32,n.n33,n.n34,n.n41,n.n42,n.n43,n.n44),this},lookAt:function(n,t,i){var u=THREE.Matrix4.__v1,f=THREE.Matrix4.__v2,r=THREE.Matrix4.__v3;return r.sub(n,t).normalize(),r.length()===0&&(r.z=1),u.cross(i,r).normalize(),u.length()===0&&(r.x+=.0001,u.cross(i,r).normalize()),f.cross(r,u).normalize(),this.n11=u.x,this.n12=f.x,this.n13=r.x,this.n21=u.y,this.n22=f.y,this.n23=r.y,this.n31=u.z,this.n32=f.z,this.n33=r.z,this},multiply:function(n,t){var i=n.n11,r=n.n12,u=n.n13,f=n.n14,e=n.n21,o=n.n22,s=n.n23,h=n.n24,c=n.n31,l=n.n32,a=n.n33,v=n.n34,y=n.n41,p=n.n42,w=n.n43,b=n.n44,k=t.n11,d=t.n12,g=t.n13,nt=t.n14,tt=t.n21,it=t.n22,rt=t.n23,ut=t.n24,ft=t.n31,et=t.n32,ot=t.n33,st=t.n34,ht=t.n41,ct=t.n42,lt=t.n43,at=t.n44;return this.n11=i*k+r*tt+u*ft+f*ht,this.n12=i*d+r*it+u*et+f*ct,this.n13=i*g+r*rt+u*ot+f*lt,this.n14=i*nt+r*ut+u*st+f*at,this.n21=e*k+o*tt+s*ft+h*ht,this.n22=e*d+o*it+s*et+h*ct,this.n23=e*g+o*rt+s*ot+h*lt,this.n24=e*nt+o*ut+s*st+h*at,this.n31=c*k+l*tt+a*ft+v*ht,this.n32=c*d+l*it+a*et+v*ct,this.n33=c*g+l*rt+a*ot+v*lt,this.n34=c*nt+l*ut+a*st+v*at,this.n41=y*k+p*tt+w*ft+b*ht,this.n42=y*d+p*it+w*et+b*ct,this.n43=y*g+p*rt+w*ot+b*lt,this.n44=y*nt+p*ut+w*st+b*at,this},multiplySelf:function(n){return this.multiply(this,n)},multiplyToArray:function(n,t,i){return this.multiply(n,t),i[0]=this.n11,i[1]=this.n21,i[2]=this.n31,i[3]=this.n41,i[4]=this.n12,i[5]=this.n22,i[6]=this.n32,i[7]=this.n42,i[8]=this.n13,i[9]=this.n23,i[10]=this.n33,i[11]=this.n43,i[12]=this.n14,i[13]=this.n24,i[14]=this.n34,i[15]=this.n44,this},multiplyScalar:function(n){return this.n11*=n,this.n12*=n,this.n13*=n,this.n14*=n,this.n21*=n,this.n22*=n,this.n23*=n,this.n24*=n,this.n31*=n,this.n32*=n,this.n33*=n,this.n34*=n,this.n41*=n,this.n42*=n,this.n43*=n,this.n44*=n,this},multiplyVector3:function(n){var t=n.x,i=n.y,r=n.z,u=1/(this.n41*t+this.n42*i+this.n43*r+this.n44);return n.x=(this.n11*t+this.n12*i+this.n13*r+this.n14)*u,n.y=(this.n21*t+this.n22*i+this.n23*r+this.n24)*u,n.z=(this.n31*t+this.n32*i+this.n33*r+this.n34)*u,n},multiplyVector4:function(n){var t=n.x,i=n.y,r=n.z,u=n.w;return n.x=this.n11*t+this.n12*i+this.n13*r+this.n14*u,n.y=this.n21*t+this.n22*i+this.n23*r+this.n24*u,n.z=this.n31*t+this.n32*i+this.n33*r+this.n34*u,n.w=this.n41*t+this.n42*i+this.n43*r+this.n44*u,n},rotateAxis:function(n){var t=n.x,i=n.y,r=n.z;return n.x=t*this.n11+i*this.n12+r*this.n13,n.y=t*this.n21+i*this.n22+r*this.n23,n.z=t*this.n31+i*this.n32+r*this.n33,n.normalize(),n},crossVector:function(n){var t=new THREE.Vector4;return t.x=this.n11*n.x+this.n12*n.y+this.n13*n.z+this.n14*n.w,t.y=this.n21*n.x+this.n22*n.y+this.n23*n.z+this.n24*n.w,t.z=this.n31*n.x+this.n32*n.y+this.n33*n.z+this.n34*n.w,t.w=n.w?this.n41*n.x+this.n42*n.y+this.n43*n.z+this.n44*n.w:1,t},determinant:function(){var n=this.n11,t=this.n12,i=this.n13,r=this.n14,u=this.n21,f=this.n22,e=this.n23,o=this.n24,s=this.n31,h=this.n32,c=this.n33,l=this.n34,a=this.n41,v=this.n42,y=this.n43,p=this.n44;return r*e*h*a-i*o*h*a-r*f*c*a+t*o*c*a+i*f*l*a-t*e*l*a-r*e*s*v+i*o*s*v+r*u*c*v-n*o*c*v-i*u*l*v+n*e*l*v+r*f*s*y-t*o*s*y-r*u*h*y+n*o*h*y+t*u*l*y-n*f*l*y-i*f*s*p+t*e*s*p+i*u*h*p-n*e*h*p-t*u*c*p+n*f*c*p},transpose:function(){var n;return n=this.n21,this.n21=this.n12,this.n12=n,n=this.n31,this.n31=this.n13,this.n13=n,n=this.n32,this.n32=this.n23,this.n23=n,n=this.n41,this.n41=this.n14,this.n14=n,n=this.n42,this.n42=this.n24,this.n24=n,n=this.n43,this.n43=this.n34,this.n43=n,this},clone:function(){var n=new THREE.Matrix4;return n.n11=this.n11,n.n12=this.n12,n.n13=this.n13,n.n14=this.n14,n.n21=this.n21,n.n22=this.n22,n.n23=this.n23,n.n24=this.n24,n.n31=this.n31,n.n32=this.n32,n.n33=this.n33,n.n34=this.n34,n.n41=this.n41,n.n42=this.n42,n.n43=this.n43,n.n44=this.n44,n},flatten:function(){return this.flat[0]=this.n11,this.flat[1]=this.n21,this.flat[2]=this.n31,this.flat[3]=this.n41,this.flat[4]=this.n12,this.flat[5]=this.n22,this.flat[6]=this.n32,this.flat[7]=this.n42,this.flat[8]=this.n13,this.flat[9]=this.n23,this.flat[10]=this.n33,this.flat[11]=this.n43,this.flat[12]=this.n14,this.flat[13]=this.n24,this.flat[14]=this.n34,this.flat[15]=this.n44,this.flat},flattenToArray:function(n){return n[0]=this.n11,n[1]=this.n21,n[2]=this.n31,n[3]=this.n41,n[4]=this.n12,n[5]=this.n22,n[6]=this.n32,n[7]=this.n42,n[8]=this.n13,n[9]=this.n23,n[10]=this.n33,n[11]=this.n43,n[12]=this.n14,n[13]=this.n24,n[14]=this.n34,n[15]=this.n44,n},flattenToArrayOffset:function(n,t){return n[t]=this.n11,n[t+1]=this.n21,n[t+2]=this.n31,n[t+3]=this.n41,n[t+4]=this.n12,n[t+5]=this.n22,n[t+6]=this.n32,n[t+7]=this.n42,n[t+8]=this.n13,n[t+9]=this.n23,n[t+10]=this.n33,n[t+11]=this.n43,n[t+12]=this.n14,n[t+13]=this.n24,n[t+14]=this.n34,n[t+15]=this.n44,n},setTranslation:function(n,t,i){return this.set(1,0,0,n,0,1,0,t,0,0,1,i,0,0,0,1),this},setScale:function(n,t,i){return this.set(n,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this},setRotationX:function(n){var t=Math.cos(n),n=Math.sin(n);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},setRotationY:function(n){var t=Math.cos(n),n=Math.sin(n);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},setRotationZ:function(n){var t=Math.cos(n),n=Math.sin(n);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},setRotationAxis:function(n,t){var e=Math.cos(t),r=Math.sin(t),s=1-e,o=n.x,u=n.y,i=n.z,f=s*o,h=s*u;return this.set(f*o+e,f*u-r*i,f*i+r*u,0,f*u+r*i,h*u+e,h*i-r*o,0,f*i-r*u,h*i+r*o,s*i*i+e,0,0,0,0,1),this},setPosition:function(n){return this.n14=n.x,this.n24=n.y,this.n34=n.z,this},getPosition:function(){return THREE.Matrix4.__v1.set(this.n14,this.n24,this.n34)},getColumnX:function(){return THREE.Matrix4.__v1.set(this.n11,this.n21,this.n31)},getColumnY:function(){return THREE.Matrix4.__v1.set(this.n12,this.n22,this.n32)},getColumnZ:function(){return THREE.Matrix4.__v1.set(this.n13,this.n23,this.n33)},getInverse:function(n){var i=n.n11,w=n.n12,t=n.n13,r=n.n14,u=n.n21,f=n.n22,e=n.n23,o=n.n24,s=n.n31,h=n.n32,c=n.n33,l=n.n34,a=n.n41,v=n.n42,y=n.n43,p=n.n44;return this.n11=e*l*v-o*c*v+o*h*y-f*l*y-e*h*p+f*c*p,this.n12=r*c*v-t*l*v-r*h*y+w*l*y+t*h*p-w*c*p,this.n13=t*o*v-r*e*v+r*f*y-w*o*y-t*f*p+w*e*p,this.n14=r*e*h-t*o*h-r*f*c+w*o*c+t*f*l-w*e*l,this.n21=o*c*a-e*l*a-o*s*y+u*l*y+e*s*p-u*c*p,this.n22=t*l*a-r*c*a+r*s*y-i*l*y-t*s*p+i*c*p,this.n23=r*e*a-t*o*a-r*u*y+i*o*y+t*u*p-i*e*p,this.n24=t*o*s-r*e*s+r*u*c-i*o*c-t*u*l+i*e*l,this.n31=f*l*a-o*h*a+o*s*v-u*l*v-f*s*p+u*h*p,this.n32=r*h*a-w*l*a-r*s*v+i*l*v+w*s*p-i*h*p,this.n33=t*o*a-r*f*a+r*u*v-i*o*v-w*u*p+i*f*p,this.n34=r*f*s-w*o*s-r*u*h+i*o*h+w*u*l-i*f*l,this.n41=e*h*a-f*c*a-e*s*v+u*c*v+f*s*y-u*h*y,this.n42=w*c*a-t*h*a+t*s*v-i*c*v-w*s*y+i*h*y,this.n43=t*f*a-w*e*a-t*u*v+i*e*v+w*u*y-i*f*y,this.n44=w*e*s-t*f*s+t*u*h-i*e*h-w*u*c+i*f*c,this.multiplyScalar(1/n.determinant()),this},setRotationFromEuler:function(n,t){var i=n.x,r=n.y,u=n.z,f=Math.cos(i),i=Math.sin(i),e=Math.cos(r),r=Math.sin(r),o=Math.cos(u),u=Math.sin(u);switch(t){case"YXZ":var s=e*o,h=e*u,c=r*o,l=r*u;this.n11=s+l*i;this.n12=c*i-h;this.n13=f*r;this.n21=f*u;this.n22=f*o;this.n23=-i;this.n31=h*i-c;this.n32=l+s*i;this.n33=f*e;break;case"ZXY":s=e*o;h=e*u;c=r*o;l=r*u;this.n11=s-l*i;this.n12=-f*u;this.n13=c+h*i;this.n21=h+c*i;this.n22=f*o;this.n23=l-s*i;this.n31=-f*r;this.n32=i;this.n33=f*e;break;case"ZYX":s=f*o;h=f*u;c=i*o;l=i*u;this.n11=e*o;this.n12=c*r-h;this.n13=s*r+l;this.n21=e*u;this.n22=l*r+s;this.n23=h*r-c;this.n31=-r;this.n32=i*e;this.n33=f*e;break;case"YZX":s=f*e;h=f*r;c=i*e;l=i*r;this.n11=e*o;this.n12=l-s*u;this.n13=c*u+h;this.n21=u;this.n22=f*o;this.n23=-i*o;this.n31=-r*o;this.n32=h*u+c;this.n33=s-l*u;break;case"XZY":s=f*e;h=f*r;c=i*e;l=i*r;this.n11=e*o;this.n12=-u;this.n13=r*o;this.n21=s*u+l;this.n22=f*o;this.n23=h*u-c;this.n31=c*u-h;this.n32=i*o;this.n33=l*u+s;break;default:s=f*o;h=f*u;c=i*o;l=i*u;this.n11=e*o;this.n12=-e*u;this.n13=r;this.n21=h+c*r;this.n22=s-l*r;this.n23=-i*e;this.n31=l-s*r;this.n32=c+h*r;this.n33=f*e}return this},setRotationFromQuaternion:function(n){var t=n.x,i=n.y,r=n.z,u=n.w,e=t+t,f=i+i,o=r+r,n=t*e,h=t*f,s;return t*=o,s=i*f,i*=o,r*=o,e*=u,f*=u,u*=o,this.n11=1-(s+r),this.n12=h-u,this.n13=t+f,this.n21=h+u,this.n22=1-(n+r),this.n23=i-e,this.n31=t-f,this.n32=i+e,this.n33=1-(n+s),this},scale:function(n){var t=n.x,i=n.y,n=n.z;return this.n11*=t,this.n12*=i,this.n13*=n,this.n21*=t,this.n22*=i,this.n23*=n,this.n31*=t,this.n32*=i,this.n33*=n,this.n41*=t,this.n42*=i,this.n43*=n,this},compose:function(n,t,i){var r=THREE.Matrix4.__m1,u=THREE.Matrix4.__m2;return r.identity(),r.setRotationFromQuaternion(t),u.setScale(i.x,i.y,i.z),this.multiply(r,u),this.n14=n.x,this.n24=n.y,this.n34=n.z,this},decompose:function(n,t,i){var r=THREE.Matrix4.__v1,u=THREE.Matrix4.__v2,f=THREE.Matrix4.__v3;return r.set(this.n11,this.n21,this.n31),u.set(this.n12,this.n22,this.n32),f.set(this.n13,this.n23,this.n33),n=n instanceof THREE.Vector3?n:new THREE.Vector3,t=t instanceof THREE.Quaternion?t:new THREE.Quaternion,i=i instanceof THREE.Vector3?i:new THREE.Vector3,i.x=r.length(),i.y=u.length(),i.z=f.length(),n.x=this.n14,n.y=this.n24,n.z=this.n34,r=THREE.Matrix4.__m1,r.copy(this),r.n11/=i.x,r.n21/=i.x,r.n31/=i.x,r.n12/=i.y,r.n22/=i.y,r.n32/=i.y,r.n13/=i.z,r.n23/=i.z,r.n33/=i.z,t.setFromRotationMatrix(r),[n,t,i]},extractPosition:function(n){return this.n14=n.n14,this.n24=n.n24,this.n34=n.n34,this},extractRotation:function(n){var t=THREE.Matrix4.__v1,i=1/t.set(n.n11,n.n21,n.n31).length(),r=1/t.set(n.n12,n.n22,n.n32).length(),t=1/t.set(n.n13,n.n23,n.n33).length();return this.n11=n.n11*i,this.n21=n.n21*i,this.n31=n.n31*i,this.n12=n.n12*r,this.n22=n.n22*r,this.n32=n.n32*r,this.n13=n.n13*t,this.n23=n.n23*t,this.n33=n.n33*t,this}};THREE.Matrix4.makeInvert3x3=function(n){var i=n.m33,t=i.m,r=n.n33*n.n22-n.n32*n.n23,e=-n.n33*n.n21+n.n31*n.n23,o=n.n32*n.n21-n.n31*n.n22,u=-n.n33*n.n12+n.n32*n.n13,s=n.n33*n.n11-n.n31*n.n13,h=-n.n32*n.n11+n.n31*n.n12,f=n.n23*n.n12-n.n22*n.n13,c=-n.n23*n.n11+n.n21*n.n13,l=n.n22*n.n11-n.n21*n.n12,n=n.n11*r+n.n21*u+n.n31*f;return n===0&&console.error("THREE.Matrix4.makeInvert3x3: Matrix not invertible."),n=1/n,t[0]=n*r,t[1]=n*e,t[2]=n*o,t[3]=n*u,t[4]=n*s,t[5]=n*h,t[6]=n*f,t[7]=n*c,t[8]=n*l,i};THREE.Matrix4.makeFrustum=function(n,t,i,r,u,f){var e;return e=new THREE.Matrix4,e.n11=2*u/(t-n),e.n12=0,e.n13=(t+n)/(t-n),e.n14=0,e.n21=0,e.n22=2*u/(r-i),e.n23=(r+i)/(r-i),e.n24=0,e.n31=0,e.n32=0,e.n33=-(f+u)/(f-u),e.n34=-2*f*u/(f-u),e.n41=0,e.n42=0,e.n43=-1,e.n44=0,e};THREE.Matrix4.makePerspective=function(n,t,i,r){var u,n=i*Math.tan(n*Math.PI/360);return u=-n,THREE.Matrix4.makeFrustum(u*t,n*t,u,n,i,r)};THREE.Matrix4.makeOrtho=function(n,t,i,r,u,f){var e,o,s,h;return e=new THREE.Matrix4,o=t-n,s=i-r,h=f-u,e.n11=2/o,e.n12=0,e.n13=0,e.n14=-((t+n)/o),e.n21=0,e.n22=2/s,e.n23=0,e.n24=-((i+r)/s),e.n31=0,e.n32=0,e.n33=-2/h,e.n34=-((f+u)/h),e.n41=0,e.n42=0,e.n43=0,e.n44=1,e};THREE.Matrix4.__v1=new THREE.Vector3;THREE.Matrix4.__v2=new THREE.Vector3;THREE.Matrix4.__v3=new THREE.Vector3;THREE.Matrix4.__m1=new THREE.Matrix4;THREE.Matrix4.__m2=new THREE.Matrix4;THREE.Object3D=function(){this.name="";this.id=THREE.Object3DCount++;this.parent=void 0;this.children=[];this.up=new THREE.Vector3(0,1,0);this.position=new THREE.Vector3;this.rotation=new THREE.Vector3;this.eulerOrder="XYZ";this.scale=new THREE.Vector3(1,1,1);this.flipSided=this.doubleSided=this.dynamic=!1;this.renderDepth=null;this.rotationAutoUpdate=!0;this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;this.matrixRotationWorld=new THREE.Matrix4;this.matrixWorldNeedsUpdate=this.matrixAutoUpdate=!0;this.quaternion=new THREE.Quaternion;this.useQuaternion=!1;this.boundRadius=0;this.boundRadiusScale=1;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this._vector=new THREE.Vector3};THREE.Object3D.prototype={constructor:THREE.Object3D,translate:function(n,t){this.matrix.rotateAxis(t);this.position.addSelf(t.multiplyScalar(n))},translateX:function(n){this.translate(n,this._vector.set(1,0,0))},translateY:function(n){this.translate(n,this._vector.set(0,1,0))},translateZ:function(n){this.translate(n,this._vector.set(0,0,1))},lookAt:function(n){this.matrix.lookAt(n,this.position,this.up);this.rotationAutoUpdate&&this.rotation.setRotationFromMatrix(this.matrix)},add:function(n){if(this.children.indexOf(n)===-1){n.parent!==void 0&&n.parent.remove(n);n.parent=this;this.children.push(n);for(var t=this;t.parent!==void 0;)t=t.parent;t!==void 0&&t instanceof THREE.Scene&&t.addObject(n)}},remove:function(n){var t=this.children.indexOf(n);if(t!==-1){for(n.parent=void 0,this.children.splice(t,1),t=this;t.parent!==void 0;)t=t.parent;t!==void 0&&t instanceof THREE.Scene&&t.removeObject(n)}},getChildByName:function(n,t){for(var i,r=0,u=this.children.length;r<u;r++)if((i=this.children[r],i.name===n)||t&&(i=i.getChildByName(n,t),i!==void 0))return i},updateMatrix:function(){this.matrix.setPosition(this.position);this.useQuaternion?this.matrix.setRotationFromQuaternion(this.quaternion):this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder);(this.scale.x!==1||this.scale.y!==1||this.scale.z!==1)&&(this.matrix.scale(this.scale),this.boundRadiusScale=Math.max(this.scale.x,Math.max(this.scale.y,this.scale.z)));this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(n){this.matrixAutoUpdate&&this.updateMatrix();(this.matrixWorldNeedsUpdate||n)&&(this.parent?this.matrixWorld.multiply(this.parent.matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,n=!0);for(var t=0,i=this.children.length;t<i;t++)this.children[t].updateMatrixWorld(n)}};THREE.Object3DCount=0;THREE.Projector=function(){function nt(){var n=it[v]=it[v]||new THREE.RenderableObject;return v++,n}function d(){var n=o[a]=o[a]||new THREE.RenderableVertex;return a++,n}function tt(n,t){return t.z-n.z}function ot(n,t){var u=0,f=1,i=n.z+n.w,e=t.z+t.w,r=-n.z+n.w,o=-t.z+t.w;return i>=0&&e>=0&&r>=0&&o>=0?!0:i<0&&e<0||r<0&&o<0?!1:(i<0?u=Math.max(u,i/(i-e)):e<0&&(f=Math.min(f,i/(i-e))),r<0?u=Math.max(u,r/(r-o)):o<0&&(f=Math.min(f,r/(r-o))),f<u?!1:(n.lerpSelf(t,u),t.lerpSelf(n,1-f),!0))}var s,v,it=[],r,a,o=[],n,y,rt=[],p,ut=[],h,w,ft=[],f,b,et=[],t={objects:[],sprites:[],lights:[],elements:[]},k=new THREE.Vector3,i=new THREE.Vector4,u=new THREE.Matrix4,g=new THREE.Matrix4,e=[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4],c=new THREE.Vector4,l=new THREE.Vector4;this.computeFrustum=function(n){for(e[0].set(n.n41-n.n11,n.n42-n.n12,n.n43-n.n13,n.n44-n.n14),e[1].set(n.n41+n.n11,n.n42+n.n12,n.n43+n.n13,n.n44+n.n14),e[2].set(n.n41+n.n21,n.n42+n.n22,n.n43+n.n23,n.n44+n.n24),e[3].set(n.n41-n.n21,n.n42-n.n22,n.n43-n.n23,n.n44-n.n24),e[4].set(n.n41-n.n31,n.n42-n.n32,n.n43-n.n33,n.n44-n.n34),e[5].set(n.n41+n.n31,n.n42+n.n32,n.n43+n.n33,n.n44+n.n34),n=0;n<6;n++){var t=e[n];t.divideScalar(Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z))}};this.projectVector=function(n,t){return t.matrixWorldInverse.getInverse(t.matrixWorld),u.multiply(t.projectionMatrix,t.matrixWorldInverse),u.multiplyVector3(n),n};this.unprojectVector=function(n,t){return t.projectionMatrixInverse.getInverse(t.projectionMatrix),u.multiply(t.matrixWorld,t.projectionMatrixInverse),u.multiplyVector3(n),n};this.pickingRay=function(n,t){var i;return n.z=-1,i=new THREE.Vector3(n.x,n.y,1),this.unprojectVector(n,t),this.unprojectVector(i,t),i.subSelf(n).normalize(),new THREE.Ray(n,i)};this.projectGraph=function(n,i){v=0;t.objects.length=0;t.sprites.length=0;t.lights.length=0;var r=function(n){var i;if(n.visible!==!1){if((i=n instanceof THREE.Mesh||n instanceof THREE.Line)&&!(i=n.frustumCulled===!1))n:{for(var o=n.matrixWorld,h=-n.geometry.boundingSphere.radius*Math.max(n.scale.x,Math.max(n.scale.y,n.scale.z)),f=0;f<6;f++)if(i=e[f].x*o.n14+e[f].y*o.n24+e[f].z*o.n34+e[f].w,i<=h){i=!1;break n}i=!0}for(i?(u.multiplyVector3(k.copy(n.position)),s=nt(),s.object=n,s.z=k.z,t.objects.push(s)):n instanceof THREE.Sprite||n instanceof THREE.Particle?(u.multiplyVector3(k.copy(n.position)),s=nt(),s.object=n,s.z=k.z,t.sprites.push(s)):n instanceof THREE.Light&&t.lights.push(n),i=0,o=n.children.length;i<o;i++)r(n.children[i])}};return r(n),i&&t.objects.sort(tt),t};this.projectScene=function(e,s,v){var bt=s.near,ti=s.far,wt,at,st,lt,k,ht,it,ct,nt,vt,yt,kt,ni,dt,gt,pt;for(b=w=p=y=0,t.elements.length=0,s.parent===void 0&&(console.warn("DEPRECATED: Camera hasn't been added to a Scene. Adding it..."),e.add(s)),e.updateMatrixWorld(),s.matrixWorldInverse.getInverse(s.matrixWorld),u.multiply(s.projectionMatrix,s.matrixWorldInverse),this.computeFrustum(u),t=this.projectGraph(e,!1),e=0,wt=t.objects.length;e<wt;e++)if(nt=t.objects[e].object,vt=nt.matrixWorld,kt=nt.material,a=0,nt instanceof THREE.Mesh){for(yt=nt.geometry,ni=nt.geometry.materials,lt=yt.vertices,dt=yt.faces,gt=yt.faceVertexUvs,yt=nt.matrixRotationWorld.extractRotation(vt),at=0,st=lt.length;at<st;at++)r=d(),r.positionWorld.copy(lt[at].position),vt.multiplyVector3(r.positionWorld),r.positionScreen.copy(r.positionWorld),u.multiplyVector4(r.positionScreen),r.positionScreen.x/=r.positionScreen.w,r.positionScreen.y/=r.positionScreen.w,r.visible=r.positionScreen.z>bt&&r.positionScreen.z<ti;for(lt=0,at=dt.length;lt<at;lt++){if(st=dt[lt],st instanceof THREE.Face3)if(k=o[st.a],ht=o[st.b],it=o[st.c],k.visible&&ht.visible&&it.visible&&(nt.doubleSided||nt.flipSided!=(it.positionScreen.x-k.positionScreen.x)*(ht.positionScreen.y-k.positionScreen.y)-(it.positionScreen.y-k.positionScreen.y)*(ht.positionScreen.x-k.positionScreen.x)<0))ct=rt[y]=rt[y]||new THREE.RenderableFace3,y++,n=ct,n.v1.copy(k),n.v2.copy(ht),n.v3.copy(it);else continue;else if(st instanceof THREE.Face4)if(k=o[st.a],ht=o[st.b],it=o[st.c],ct=o[st.d],k.visible&&ht.visible&&it.visible&&ct.visible&&(nt.doubleSided||nt.flipSided!=((ct.positionScreen.x-k.positionScreen.x)*(ht.positionScreen.y-k.positionScreen.y)-(ct.positionScreen.y-k.positionScreen.y)*(ht.positionScreen.x-k.positionScreen.x)<0||(ht.positionScreen.x-it.positionScreen.x)*(ct.positionScreen.y-it.positionScreen.y)-(ht.positionScreen.y-it.positionScreen.y)*(ct.positionScreen.x-it.positionScreen.x)<0)))pt=ut[p]=ut[p]||new THREE.RenderableFace4,p++,n=pt,n.v1.copy(k),n.v2.copy(ht),n.v3.copy(it),n.v4.copy(ct);else continue;for(n.normalWorld.copy(st.normal),yt.multiplyVector3(n.normalWorld),n.centroidWorld.copy(st.centroid),vt.multiplyVector3(n.centroidWorld),n.centroidScreen.copy(n.centroidWorld),u.multiplyVector3(n.centroidScreen),it=st.vertexNormals,k=0,ht=it.length;k<ht;k++)ct=n.vertexNormalsWorld[k],ct.copy(it[k]),yt.multiplyVector3(ct);for(k=0,ht=gt.length;k<ht;k++)if(pt=gt[k][lt])for(it=0,ct=pt.length;it<ct;it++)n.uvs[k][it]=pt[it];n.material=kt;n.faceMaterial=st.materialIndex!==null?ni[st.materialIndex]:null;n.z=n.centroidScreen.z;t.elements.push(n)}}else if(nt instanceof THREE.Line)for(g.multiply(u,vt),lt=nt.geometry.vertices,k=d(),k.positionScreen.copy(lt[0].position),g.multiplyVector4(k.positionScreen),at=1,st=lt.length;at<st;at++)(k=d(),k.positionScreen.copy(lt[at].position),g.multiplyVector4(k.positionScreen),ht=o[a-2],c.copy(k.positionScreen),l.copy(ht.positionScreen),ot(c,l))&&(c.multiplyScalar(1/c.w),l.multiplyScalar(1/l.w),nt=ft[w]=ft[w]||new THREE.RenderableLine,w++,h=nt,h.v1.positionScreen.copy(c),h.v2.positionScreen.copy(l),h.z=Math.max(c.z,l.z),h.material=kt,t.elements.push(h));for(e=0,wt=t.sprites.length;e<wt;e++)(nt=t.sprites[e].object,vt=nt.matrixWorld,nt instanceof THREE.Particle&&(i.set(vt.n14,vt.n24,vt.n34,1),u.multiplyVector4(i),i.z/=i.w,i.z>0&&i.z<1))&&(bt=et[b]=et[b]||new THREE.RenderableParticle,b++,f=bt,f.x=i.x/i.w,f.y=i.y/i.w,f.z=i.z,f.rotation=nt.rotation.z,f.scale.x=nt.scale.x*Math.abs(f.x-(i.x+s.projectionMatrix.n11)/(i.w+s.projectionMatrix.n14)),f.scale.y=nt.scale.y*Math.abs(f.y-(i.y+s.projectionMatrix.n22)/(i.w+s.projectionMatrix.n24)),f.material=nt.material,t.elements.push(f));return v&&t.elements.sort(tt),t}};THREE.Quaternion=function(n,t,i,r){this.set(n||0,t||0,i||0,r!==void 0?r:1)};THREE.Quaternion.prototype={constructor:THREE.Quaternion,set:function(n,t,i,r){return this.x=n,this.y=t,this.z=i,this.w=r,this},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z,this.w=n.w,this},setFromEuler:function(n){var t=Math.PI/360,i=n.x*t,r=n.y*t,u=n.z*t,n=Math.cos(r),r=Math.sin(r),t=Math.cos(-u),u=Math.sin(-u),f=Math.cos(i),i=Math.sin(i),e=n*t,o=r*u;return this.w=e*f-o*i,this.x=e*i+o*f,this.y=r*t*f+n*u*i,this.z=n*u*f-r*t*i,this},setFromAxisAngle:function(n,t){var r=t/2,i=Math.sin(r);return this.x=n.x*i,this.y=n.y*i,this.z=n.z*i,this.w=Math.cos(r),this},setFromRotationMatrix:function(n){var t=Math.pow(n.determinant(),1/3);return this.w=Math.sqrt(Math.max(0,t+n.n11+n.n22+n.n33))/2,this.x=Math.sqrt(Math.max(0,t+n.n11-n.n22-n.n33))/2,this.y=Math.sqrt(Math.max(0,t-n.n11+n.n22-n.n33))/2,this.z=Math.sqrt(Math.max(0,t-n.n11-n.n22+n.n33))/2,this.x=n.n32-n.n23<0?-Math.abs(this.x):Math.abs(this.x),this.y=n.n13-n.n31<0?-Math.abs(this.y):Math.abs(this.y),this.z=n.n21-n.n12<0?-Math.abs(this.z):Math.abs(this.z),this.normalize(),this},calculateW:function(){return this.w=-Math.sqrt(Math.abs(1-this.x*this.x-this.y*this.y-this.z*this.z)),this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var n=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return n===0?this.w=this.z=this.y=this.x=0:(n=1/n,this.x*=n,this.y*=n,this.z*=n,this.w*=n),this},multiplySelf:function(n){var t=this.x,i=this.y,r=this.z,u=this.w,f=n.x,e=n.y,o=n.z,n=n.w;return this.x=t*n+u*f+i*o-r*e,this.y=i*n+u*e+r*f-t*o,this.z=r*n+u*o+t*e-i*f,this.w=u*n-t*f-i*e-r*o,this},multiply:function(n,t){return this.x=n.x*t.w+n.y*t.z-n.z*t.y+n.w*t.x,this.y=-n.x*t.z+n.y*t.w+n.z*t.x+n.w*t.y,this.z=n.x*t.y-n.y*t.x+n.z*t.w+n.w*t.z,this.w=-n.x*t.x-n.y*t.y-n.z*t.z+n.w*t.w,this},multiplyVector3:function(n,t){t||(t=n);var i=n.x,o=n.y,s=n.z,r=this.x,u=this.y,f=this.z,e=this.w,h=e*i+u*s-f*o,c=e*o+f*i-r*s,l=e*s+r*o-u*i,i=-r*i-u*o-f*s;return t.x=h*e+i*-r+c*-f-l*-u,t.y=c*e+i*-u+l*-r-h*-f,t.z=l*e+i*-f+h*-u-c*-r,t}};THREE.Quaternion.slerp=function(n,t,i,r){var u=n.w*t.w+n.x*t.x+n.y*t.y+n.z*t.z,f;return(u<0?(i.w=-t.w,i.x=-t.x,i.y=-t.y,i.z=-t.z,u=-u):i.copy(t),Math.abs(u)>=1)?(i.w=n.w,i.x=n.x,i.y=n.y,i.z=n.z,i):(f=Math.acos(u),u=Math.sqrt(1-u*u),Math.abs(u)<.001)?(i.w=.5*(n.w+t.w),i.x=.5*(n.x+t.x),i.y=.5*(n.y+t.y),i.z=.5*(n.z+t.z),i):(t=Math.sin((1-r)*f)/u,r=Math.sin(r*f)/u,i.w=n.w*t+i.w*r,i.x=n.x*t+i.x*r,i.y=n.y*t+i.y*r,i.z=n.z*t+i.z*r,i)};THREE.Vertex=function(n){this.position=n||new THREE.Vector3};THREE.Face3=function(n,t,i,r,u,f){this.a=n;this.b=t;this.c=i;this.normal=r instanceof THREE.Vector3?r:new THREE.Vector3;this.vertexNormals=r instanceof Array?r:[];this.color=u instanceof THREE.Color?u:new THREE.Color;this.vertexColors=u instanceof Array?u:[];this.vertexTangents=[];this.materialIndex=f;this.centroid=new THREE.Vector3};THREE.Face4=function(n,t,i,r,u,f,e){this.a=n;this.b=t;this.c=i;this.d=r;this.normal=u instanceof THREE.Vector3?u:new THREE.Vector3;this.vertexNormals=u instanceof Array?u:[];this.color=f instanceof THREE.Color?f:new THREE.Color;this.vertexColors=f instanceof Array?f:[];this.vertexTangents=[];this.materialIndex=e;this.centroid=new THREE.Vector3};THREE.UV=function(n,t){this.u=n||0;this.v=t||0};THREE.UV.prototype={constructor:THREE.UV,set:function(n,t){return this.u=n,this.v=t,this},copy:function(n){return this.u=n.u,this.v=n.v,this},clone:function(){return new THREE.UV(this.u,this.v)}};THREE.Geometry=function(){this.id=THREE.GeometryCount++;this.vertices=[];this.colors=[];this.materials=[];this.faces=[];this.faceUvs=[[]];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.dynamic=this.hasTangents=!1};THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(n){var f=new THREE.Matrix4,t,r,i,u,e;for(f.extractRotation(n,new THREE.Vector3(1,1,1)),t=0,r=this.vertices.length;t<r;t++)n.multiplyVector3(this.vertices[t].position);for(t=0,r=this.faces.length;t<r;t++){for(i=this.faces[t],f.multiplyVector3(i.normal),u=0,e=i.vertexNormals.length;u<e;u++)f.multiplyVector3(i.vertexNormals[u]);n.multiplyVector3(i.centroid)}},computeCentroids:function(){for(var n,t=0,i=this.faces.length;t<i;t++)n=this.faces[t],n.centroid.set(0,0,0),n instanceof THREE.Face3?(n.centroid.addSelf(this.vertices[n.a].position),n.centroid.addSelf(this.vertices[n.b].position),n.centroid.addSelf(this.vertices[n.c].position),n.centroid.divideScalar(3)):n instanceof THREE.Face4&&(n.centroid.addSelf(this.vertices[n.a].position),n.centroid.addSelf(this.vertices[n.b].position),n.centroid.addSelf(this.vertices[n.c].position),n.centroid.addSelf(this.vertices[n.d].position),n.centroid.divideScalar(4))},computeFaceNormals:function(){for(var n,f,r,e,t=new THREE.Vector3,o=new THREE.Vector3,i=0,u=this.faces.length;i<u;i++)n=this.faces[i],f=this.vertices[n.a],r=this.vertices[n.b],e=this.vertices[n.c],t.sub(e.position,r.position),o.sub(f.position,r.position),t.crossSelf(o),t.isZero()||t.normalize(),n.normal.copy(t)},computeVertexNormals:function(){var t,r,n,i;if(this.__tmpVertices===void 0){for(i=this.__tmpVertices=Array(this.vertices.length),t=0,r=this.vertices.length;t<r;t++)i[t]=new THREE.Vector3;for(t=0,r=this.faces.length;t<r;t++)(n=this.faces[t],n instanceof THREE.Face3)?n.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3]:n instanceof THREE.Face4&&(n.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3])}else for(i=this.__tmpVertices,t=0,r=this.vertices.length;t<r;t++)i[t].set(0,0,0);for(t=0,r=this.faces.length;t<r;t++)n=this.faces[t],n instanceof THREE.Face3?(i[n.a].addSelf(n.normal),i[n.b].addSelf(n.normal),i[n.c].addSelf(n.normal)):n instanceof THREE.Face4&&(i[n.a].addSelf(n.normal),i[n.b].addSelf(n.normal),i[n.c].addSelf(n.normal),i[n.d].addSelf(n.normal));for(t=0,r=this.vertices.length;t<r;t++)i[t].normalize();for(t=0,r=this.faces.length;t<r;t++)n=this.faces[t],n instanceof THREE.Face3?(n.vertexNormals[0].copy(i[n.a]),n.vertexNormals[1].copy(i[n.b]),n.vertexNormals[2].copy(i[n.c])):n instanceof THREE.Face4&&(n.vertexNormals[0].copy(i[n.a]),n.vertexNormals[1].copy(i[n.b]),n.vertexNormals[2].copy(i[n.c]),n.vertexNormals[3].copy(i[n.d]))},computeTangents:function(){function nt(n,t,i,r,e,y,k){u=n.vertices[t].position;w=n.vertices[i].position;b=n.vertices[r].position;o=p[e];tt=p[y];it=p[k];rt=w.x-u.x;ut=b.x-u.x;ft=w.y-u.y;et=b.y-u.y;ot=w.z-u.z;st=b.z-u.z;s=tt.u-o.u;h=it.u-o.u;c=tt.v-o.v;l=it.v-o.v;f=1/(s*l-h*c);d.set((l*rt-c*ut)*f,(l*ft-c*et)*f,(l*ot-c*st)*f);g.set((s*ut-h*rt)*f,(s*et-h*ft)*f,(s*st-h*ot)*f);a[t].addSelf(d);a[i].addSelf(d);a[r].addSelf(d);v[t].addSelf(g);v[i].addSelf(g);v[r].addSelf(g)}for(var i,r,n,p,u,w,b,o,tt,it,rt,ut,ft,et,ot,st,s,h,c,l,f,k,a=[],v=[],d=new THREE.Vector3,g=new THREE.Vector3,y=new THREE.Vector3,ct=new THREE.Vector3,ht=new THREE.Vector3,lt,t=0,e=this.vertices.length;t<e;t++)a[t]=new THREE.Vector3,v[t]=new THREE.Vector3;for(t=0,e=this.faces.length;t<e;t++)n=this.faces[t],p=this.faceVertexUvs[0][t],n instanceof THREE.Face3?nt(this,n.a,n.b,n.c,0,1,2):n instanceof THREE.Face4&&(nt(this,n.a,n.b,n.c,0,1,2),nt(this,n.a,n.b,n.d,0,1,3));for(lt=["a","b","c","d"],t=0,e=this.faces.length;t<e;t++)for(n=this.faces[t],i=0;i<n.vertexNormals.length;i++)ht.copy(n.vertexNormals[i]),r=n[lt[i]],k=a[r],y.copy(k),y.subSelf(ht.multiplyScalar(ht.dot(k))).normalize(),ct.cross(n.vertexNormals[i],k),r=ct.dot(v[r]),r=r<0?-1:1,n.vertexTangents[i]=new THREE.Vector4(y.x,y.y,y.z,r);this.hasTangents=!0},computeBoundingBox:function(){var n,t,i;if(this.vertices.length>0)for(this.boundingBox={x:[this.vertices[0].position.x,this.vertices[0].position.x],y:[this.vertices[0].position.y,this.vertices[0].position.y],z:[this.vertices[0].position.z,this.vertices[0].position.z]},t=1,i=this.vertices.length;t<i;t++)n=this.vertices[t],n.position.x<this.boundingBox.x[0]?this.boundingBox.x[0]=n.position.x:n.position.x>this.boundingBox.x[1]&&(this.boundingBox.x[1]=n.position.x),n.position.y<this.boundingBox.y[0]?this.boundingBox.y[0]=n.position.y:n.position.y>this.boundingBox.y[1]&&(this.boundingBox.y[1]=n.position.y),n.position.z<this.boundingBox.z[0]?this.boundingBox.z[0]=n.position.z:n.position.z>this.boundingBox.z[1]&&(this.boundingBox.z[1]=n.position.z)},computeBoundingSphere:function(){for(var n=0,t=0,i=this.vertices.length;t<i;t++)n=Math.max(n,this.vertices[t].position.length());this.boundingSphere={radius:n}},mergeVertices:function(){for(var n={},f=[],i=[],r,e=Math.pow(10,4),t=0,u=this.vertices.length;t<u;t++)r=this.vertices[t].position,r=[Math.round(r.x*e),Math.round(r.y*e),Math.round(r.z*e)].join("_"),n[r]===void 0?(n[r]=t,f.push(this.vertices[t]),i[t]=f.length-1):i[t]=i[n[r]];for(t=0,u=this.faces.length;t<u;t++)(n=this.faces[t],n instanceof THREE.Face3)?(n.a=i[n.a],n.b=i[n.b],n.c=i[n.c]):n instanceof THREE.Face4&&(n.a=i[n.a],n.b=i[n.b],n.c=i[n.c],n.d=i[n.d]);this.vertices=f}};THREE.GeometryCount=0;THREE.Camera=function(){if(arguments.length)return console.warn("DEPRECATED: Camera() is now PerspectiveCamera() or OrthographicCamera()."),new THREE.PerspectiveCamera(arguments[0],arguments[1],arguments[2],arguments[3]);THREE.Object3D.call(this);this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4;this.projectionMatrixInverse=new THREE.Matrix4};THREE.Camera.prototype=new THREE.Object3D;THREE.Camera.prototype.constructor=THREE.Camera;THREE.Camera.prototype.lookAt=function(n){this.matrix.lookAt(this.position,n,this.up);this.rotationAutoUpdate&&this.rotation.setRotationFromMatrix(this.matrix)};THREE.OrthographicCamera=function(n,t,i,r,u,f){THREE.Camera.call(this);this.left=n;this.right=t;this.top=i;this.bottom=r;this.near=u!==void 0?u:.1;this.far=f!==void 0?f:2e3;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=new THREE.Camera;THREE.OrthographicCamera.prototype.constructor=THREE.OrthographicCamera;THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix=THREE.Matrix4.makeOrtho(this.left,this.right,this.top,this.bottom,this.near,this.far)};THREE.PerspectiveCamera=function(n,t,i,r){THREE.Camera.call(this);this.fov=n!==void 0?n:50;this.aspect=t!==void 0?t:1;this.near=i!==void 0?i:.1;this.far=r!==void 0?r:2e3;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype=new THREE.Camera;THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera;THREE.PerspectiveCamera.prototype.setLens=function(n,t){this.fov=2*Math.atan((t!==void 0?t:43.25)/(n*2));this.fov*=180/Math.PI;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype.setViewOffset=function(n,t,i,r,u,f){this.fullWidth=n;this.fullHeight=t;this.x=i;this.y=r;this.width=u;this.height=f;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var n=this.fullWidth/this.fullHeight,t=Math.tan(this.fov*Math.PI/360)*this.near,i=-t,r=n*i,n=Math.abs(n*t-r),i=Math.abs(t-i);this.projectionMatrix=THREE.Matrix4.makeFrustum(r+this.x*n/this.fullWidth,r+(this.x+this.width)*n/this.fullWidth,t-(this.y+this.height)*i/this.fullHeight,t-this.y*i/this.fullHeight,this.near,this.far)}else this.projectionMatrix=THREE.Matrix4.makePerspective(this.fov,this.aspect,this.near,this.far)};THREE.Light=function(n){THREE.Object3D.call(this);this.color=new THREE.Color(n)};THREE.Light.prototype=new THREE.Object3D;THREE.Light.prototype.constructor=THREE.Light;THREE.Light.prototype.supr=THREE.Object3D.prototype;THREE.AmbientLight=function(n){THREE.Light.call(this,n)};THREE.AmbientLight.prototype=new THREE.Light;THREE.AmbientLight.prototype.constructor=THREE.AmbientLight;THREE.DirectionalLight=function(n,t,i){THREE.Light.call(this,n);this.position=new THREE.Vector3(0,1,0);this.intensity=t!==void 0?t:1;this.distance=i!==void 0?i:0};THREE.DirectionalLight.prototype=new THREE.Light;THREE.DirectionalLight.prototype.constructor=THREE.DirectionalLight;THREE.PointLight=function(n,t,i){THREE.Light.call(this,n);this.position=new THREE.Vector3(0,0,0);this.intensity=t!==void 0?t:1;this.distance=i!==void 0?i:0};THREE.PointLight.prototype=new THREE.Light;THREE.PointLight.prototype.constructor=THREE.PointLight;THREE.Material=function(n){this.name="";this.id=THREE.MaterialCount++;n=n||{};this.opacity=n.opacity!==void 0?n.opacity:1;this.transparent=n.transparent!==void 0?n.transparent:!1;this.blending=n.blending!==void 0?n.blending:THREE.NormalBlending;this.depthTest=n.depthTest!==void 0?n.depthTest:!0;this.depthWrite=n.depthWrite!==void 0?n.depthWrite:!0;this.polygonOffset=n.polygonOffset!==void 0?n.polygonOffset:!1;this.polygonOffsetFactor=n.polygonOffsetFactor!==void 0?n.polygonOffsetFactor:0;this.polygonOffsetUnits=n.polygonOffsetUnits!==void 0?n.polygonOffsetUnits:0;this.alphaTest=n.alphaTest!==void 0?n.alphaTest:0;this.overdraw=n.overdraw!==void 0?n.overdraw:!1};THREE.MaterialCount=0;THREE.NoShading=0;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NormalBlending=0;THREE.AdditiveBlending=1;THREE.SubtractiveBlending=2;THREE.MultiplyBlending=3;THREE.AdditiveAlphaBlending=4;THREE.LineBasicMaterial=function(n){THREE.Material.call(this,n);n=n||{};this.color=n.color!==void 0?new THREE.Color(n.color):new THREE.Color(16777215);this.linewidth=n.linewidth!==void 0?n.linewidth:1;this.linecap=n.linecap!==void 0?n.linecap:"round";this.linejoin=n.linejoin!==void 0?n.linejoin:"round";this.vertexColors=n.vertexColors?n.vertexColors:!1;this.fog=n.fog!==void 0?n.fog:!0};THREE.LineBasicMaterial.prototype=new THREE.Material;THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial;THREE.MeshBasicMaterial=function(n){THREE.Material.call(this,n);n=n||{};this.color=n.color!==void 0?new THREE.Color(n.color):new THREE.Color(16777215);this.map=n.map!==void 0?n.map:null;this.lightMap=n.lightMap!==void 0?n.lightMap:null;this.envMap=n.envMap!==void 0?n.envMap:null;this.combine=n.combine!==void 0?n.combine:THREE.MultiplyOperation;this.reflectivity=n.reflectivity!==void 0?n.reflectivity:1;this.refractionRatio=n.refractionRatio!==void 0?n.refractionRatio:.98;this.fog=n.fog!==void 0?n.fog:!0;this.shading=n.shading!==void 0?n.shading:THREE.SmoothShading;this.wireframe=n.wireframe!==void 0?n.wireframe:!1;this.wireframeLinewidth=n.wireframeLinewidth!==void 0?n.wireframeLinewidth:1;this.wireframeLinecap=n.wireframeLinecap!==void 0?n.wireframeLinecap:"round";this.wireframeLinejoin=n.wireframeLinejoin!==void 0?n.wireframeLinejoin:"round";this.vertexColors=n.vertexColors!==void 0?n.vertexColors:!1;this.skinning=n.skinning!==void 0?n.skinning:!1;this.morphTargets=n.morphTargets!==void 0?n.morphTargets:!1};THREE.MeshBasicMaterial.prototype=new THREE.Material;THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial;THREE.MeshLambertMaterial=function(n){THREE.Material.call(this,n);n=n||{};this.color=n.color!==void 0?new THREE.Color(n.color):new THREE.Color(16777215);this.ambient=n.ambient!==void 0?new THREE.Color(n.ambient):new THREE.Color(328965);this.map=n.map!==void 0?n.map:null;this.lightMap=n.lightMap!==void 0?n.lightMap:null;this.envMap=n.envMap!==void 0?n.envMap:null;this.combine=n.combine!==void 0?n.combine:THREE.MultiplyOperation;this.reflectivity=n.reflectivity!==void 0?n.reflectivity:1;this.refractionRatio=n.refractionRatio!==void 0?n.refractionRatio:.98;this.fog=n.fog!==void 0?n.fog:!0;this.shading=n.shading!==void 0?n.shading:THREE.SmoothShading;this.wireframe=n.wireframe!==void 0?n.wireframe:!1;this.wireframeLinewidth=n.wireframeLinewidth!==void 0?n.wireframeLinewidth:1;this.wireframeLinecap=n.wireframeLinecap!==void 0?n.wireframeLinecap:"round";this.wireframeLinejoin=n.wireframeLinejoin!==void 0?n.wireframeLinejoin:"round";this.vertexColors=n.vertexColors!==void 0?n.vertexColors:!1;this.skinning=n.skinning!==void 0?n.skinning:!1;this.morphTargets=n.morphTargets!==void 0?n.morphTargets:!1};THREE.MeshLambertMaterial.prototype=new THREE.Material;THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial;THREE.MeshPhongMaterial=function(n){THREE.Material.call(this,n);n=n||{};this.color=n.color!==void 0?new THREE.Color(n.color):new THREE.Color(16777215);this.ambient=n.ambient!==void 0?new THREE.Color(n.ambient):new THREE.Color(328965);this.specular=n.specular!==void 0?new THREE.Color(n.specular):new THREE.Color(1118481);this.shininess=n.shininess!==void 0?n.shininess:30;this.metal=n.metal!==void 0?n.metal:!1;this.perPixel=n.perPixel!==void 0?n.perPixel:!1;this.map=n.map!==void 0?n.map:null;this.lightMap=n.lightMap!==void 0?n.lightMap:null;this.envMap=n.envMap!==void 0?n.envMap:null;this.combine=n.combine!==void 0?n.combine:THREE.MultiplyOperation;this.reflectivity=n.reflectivity!==void 0?n.reflectivity:1;this.refractionRatio=n.refractionRatio!==void 0?n.refractionRatio:.98;this.fog=n.fog!==void 0?n.fog:!0;this.shading=n.shading!==void 0?n.shading:THREE.SmoothShading;this.wireframe=n.wireframe!==void 0?n.wireframe:!1;this.wireframeLinewidth=n.wireframeLinewidth!==void 0?n.wireframeLinewidth:1;this.wireframeLinecap=n.wireframeLinecap!==void 0?n.wireframeLinecap:"round";this.wireframeLinejoin=n.wireframeLinejoin!==void 0?n.wireframeLinejoin:"round";this.vertexColors=n.vertexColors!==void 0?n.vertexColors:!1;this.skinning=n.skinning!==void 0?n.skinning:!1;this.morphTargets=n.morphTargets!==void 0?n.morphTargets:!1};THREE.MeshPhongMaterial.prototype=new THREE.Material;THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial;THREE.MeshDepthMaterial=function(n){THREE.Material.call(this,n);n=n||{};this.shading=n.shading!==void 0?n.shading:THREE.SmoothShading;this.wireframe=n.wireframe!==void 0?n.wireframe:!1;this.wireframeLinewidth=n.wireframeLinewidth!==void 0?n.wireframeLinewidth:1};THREE.MeshDepthMaterial.prototype=new THREE.Material;THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial;THREE.MeshNormalMaterial=function(n){THREE.Material.call(this,n);n=n||{};this.shading=n.shading?n.shading:THREE.FlatShading;this.wireframe=n.wireframe?n.wireframe:!1;this.wireframeLinewidth=n.wireframeLinewidth?n.wireframeLinewidth:1};THREE.MeshNormalMaterial.prototype=new THREE.Material;THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial;THREE.MeshFaceMaterial=function(){};THREE.ParticleBasicMaterial=function(n){THREE.Material.call(this,n);n=n||{};this.color=n.color!==void 0?new THREE.Color(n.color):new THREE.Color(16777215);this.map=n.map!==void 0?n.map:null;this.size=n.size!==void 0?n.size:1;this.sizeAttenuation=n.sizeAttenuation!==void 0?n.sizeAttenuation:!0;this.vertexColors=n.vertexColors!==void 0?n.vertexColors:!1;this.fog=n.fog!==void 0?n.fog:!0};THREE.ParticleBasicMaterial.prototype=new THREE.Material;THREE.ParticleBasicMaterial.prototype.constructor=THREE.ParticleBasicMaterial;THREE.ParticleCanvasMaterial=function(n){THREE.Material.call(this,n);n=n||{};this.color=n.color!==void 0?new THREE.Color(n.color):new THREE.Color(16777215);this.program=n.program!==void 0?n.program:function(){}};THREE.ParticleCanvasMaterial.prototype=new THREE.Material;THREE.ParticleCanvasMaterial.prototype.constructor=THREE.ParticleCanvasMaterial;THREE.Texture=function(n,t,i,r,u,f){this.id=THREE.TextureCount++;this.image=n;this.mapping=t!==void 0?t:new THREE.UVMapping;this.wrapS=i!==void 0?i:THREE.ClampToEdgeWrapping;this.wrapT=r!==void 0?r:THREE.ClampToEdgeWrapping;this.magFilter=u!==void 0?u:THREE.LinearFilter;this.minFilter=f!==void 0?f:THREE.LinearMipMapLinearFilter;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.needsUpdate=!1;this.onUpdate=null};THREE.Texture.prototype={constructor:THREE.Texture,clone:function(){var n=new THREE.Texture(this.image,this.mapping,this.wrapS,this.wrapT,this.magFilter,this.minFilter);return n.offset.copy(this.offset),n.repeat.copy(this.repeat),n}};THREE.TextureCount=0;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.CubeReflectionMapping=function(){};THREE.CubeRefractionMapping=function(){};THREE.LatitudeReflectionMapping=function(){};THREE.LatitudeRefractionMapping=function(){};THREE.SphericalReflectionMapping=function(){};THREE.SphericalRefractionMapping=function(){};THREE.UVMapping=function(){};THREE.RepeatWrapping=0;THREE.ClampToEdgeWrapping=1;THREE.MirroredRepeatWrapping=2;THREE.NearestFilter=3;THREE.NearestMipMapNearestFilter=4;THREE.NearestMipMapLinearFilter=5;THREE.LinearFilter=6;THREE.LinearMipMapNearestFilter=7;THREE.LinearMipMapLinearFilter=8;THREE.ByteType=9;THREE.UnsignedByteType=10;THREE.ShortType=11;THREE.UnsignedShortType=12;THREE.IntType=13;THREE.UnsignedIntType=14;THREE.FloatType=15;THREE.AlphaFormat=16;THREE.RGBFormat=17;THREE.RGBAFormat=18;THREE.LuminanceFormat=19;THREE.LuminanceAlphaFormat=20;THREE.Particle=function(n){THREE.Object3D.call(this);this.material=n};THREE.Particle.prototype=new THREE.Object3D;THREE.Particle.prototype.constructor=THREE.Particle;THREE.Line=function(n,t,i){THREE.Object3D.call(this);this.geometry=n;this.material=t;this.type=i!==void 0?i:THREE.LineStrip;this.geometry&&(this.geometry.boundingSphere||this.geometry.computeBoundingSphere())};THREE.LineStrip=0;THREE.LinePieces=1;THREE.Line.prototype=new THREE.Object3D;THREE.Line.prototype.constructor=THREE.Line;THREE.Mesh=function(n,t){if(THREE.Object3D.call(this),this.geometry=n,this.material=t,t instanceof Array&&(console.warn("DEPRECATED: Mesh material can no longer be an Array. Using material at index 0..."),this.material=t[0]),this.geometry&&(this.geometry.boundingSphere||this.geometry.computeBoundingSphere(),this.boundRadius=n.boundingSphere.radius,this.geometry.morphTargets.length)){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var i=0;i<this.geometry.morphTargets.length;i++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[i].name]=i}};THREE.Mesh.prototype=new THREE.Object3D;THREE.Mesh.prototype.constructor=THREE.Mesh;THREE.Mesh.prototype.supr=THREE.Object3D.prototype;THREE.Mesh.prototype.getMorphTargetIndexByName=function(n){return this.morphTargetDictionary[n]!==void 0?this.morphTargetDictionary[n]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+n+" does not exist. Returning 0."),0)};THREE.Bone=function(n){THREE.Object3D.call(this);this.skin=n;this.skinMatrix=new THREE.Matrix4};THREE.Bone.prototype=new THREE.Object3D;THREE.Bone.prototype.constructor=THREE.Bone;THREE.Bone.prototype.supr=THREE.Object3D.prototype;THREE.Bone.prototype.update=function(n,t){this.matrixAutoUpdate&&(t|=this.updateMatrix());(t||this.matrixWorldNeedsUpdate)&&(n?this.skinMatrix.multiply(n,this.matrix):this.skinMatrix.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var r=this.children.length,i=0;i<r;i++)this.children[i].update(this.skinMatrix,t)};THREE.Sprite=function(n){THREE.Object3D.call(this);this.color=n.color!==void 0?new THREE.Color(n.color):new THREE.Color(16777215);this.map=n.map instanceof THREE.Texture?n.map:THREE.ImageUtils.loadTexture(n.map);this.blending=n.blending!==void 0?n.blending:THREE.NormalBlending;this.useScreenCoordinates=n.useScreenCoordinates!==void 0?n.useScreenCoordinates:!0;this.mergeWith3D=n.mergeWith3D!==void 0?n.mergeWith3D:!this.useScreenCoordinates;this.affectedByDistance=n.affectedByDistance!==void 0?n.affectedByDistance:!this.useScreenCoordinates;this.scaleByViewport=n.scaleByViewport!==void 0?n.scaleByViewport:!this.affectedByDistance;this.alignment=n.alignment instanceof THREE.Vector2?n.alignment:THREE.SpriteAlignment.center;this.rotation3d=this.rotation;this.rotation=0;this.opacity=1;this.uvOffset=new THREE.Vector2(0,0);this.uvScale=new THREE.Vector2(1,1)};THREE.Sprite.prototype=new THREE.Object3D;THREE.Sprite.prototype.constructor=THREE.Sprite;THREE.Sprite.prototype.updateMatrix=function(){this.matrix.setPosition(this.position);this.rotation3d.set(0,0,this.rotation);this.matrix.setRotationFromEuler(this.rotation3d);(this.scale.x!==1||this.scale.y!==1)&&(this.matrix.scale(this.scale),this.boundRadiusScale=Math.max(this.scale.x,this.scale.y));this.matrixWorldNeedsUpdate=!0};THREE.SpriteAlignment={};THREE.SpriteAlignment.topLeft=new THREE.Vector2(1,-1);THREE.SpriteAlignment.topCenter=new THREE.Vector2(0,-1);THREE.SpriteAlignment.topRight=new THREE.Vector2(-1,-1);THREE.SpriteAlignment.centerLeft=new THREE.Vector2(1,0);THREE.SpriteAlignment.center=new THREE.Vector2(0,0);THREE.SpriteAlignment.centerRight=new THREE.Vector2(-1,0);THREE.SpriteAlignment.bottomLeft=new THREE.Vector2(1,1);THREE.SpriteAlignment.bottomCenter=new THREE.Vector2(0,1);THREE.SpriteAlignment.bottomRight=new THREE.Vector2(-1,1);THREE.Scene=function(){THREE.Object3D.call(this);this.overrideMaterial=this.fog=null;this.matrixAutoUpdate=!1;this.objects=[];this.lights=[];this.__objectsAdded=[];this.__objectsRemoved=[]};THREE.Scene.prototype=new THREE.Object3D;THREE.Scene.prototype.constructor=THREE.Scene;THREE.Scene.prototype.addObject=function(n){if(n instanceof THREE.Light)this.lights.indexOf(n)===-1&&this.lights.push(n);else if(!(n instanceof THREE.Camera||n instanceof THREE.Bone)&&this.objects.indexOf(n)===-1){this.objects.push(n);this.__objectsAdded.push(n);var t=this.__objectsRemoved.indexOf(n);t!==-1&&this.__objectsRemoved.splice(t,1)}for(t=0;t<n.children.length;t++)this.addObject(n.children[t])};THREE.Scene.prototype.removeObject=function(n){if(n instanceof THREE.Light){var t=this.lights.indexOf(n);t!==-1&&this.lights.splice(t,1)}else n instanceof THREE.Camera||(t=this.objects.indexOf(n),t!==-1&&(this.objects.splice(t,1),this.__objectsRemoved.push(n),t=this.__objectsAdded.indexOf(n),t!==-1&&this.__objectsAdded.splice(t,1)));for(t=0;t<n.children.length;t++)this.removeObject(n.children[t])};THREE.CanvasRenderer=function(n){function vt(n){pi!=n&&(t.globalAlpha=pi=n)}function lt(n){if(wi!=n){switch(n){case THREE.NormalBlending:t.globalCompositeOperation="source-over";break;case THREE.AdditiveBlending:t.globalCompositeOperation="lighter";break;case THREE.SubtractiveBlending:t.globalCompositeOperation="darker"}wi=n}}function ci(n){bi!=n&&(t.strokeStyle=bi=n)}function fi(n){ki!=n&&(t.fillStyle=ki=n)}var at=this,li,ai,rt,cr=new THREE.Projector,n=n||{},ei=n.canvas!==void 0?n.canvas:document.createElement("canvas"),vi,yi,o,s,t=ei.getContext("2d"),yt=new THREE.Color(0),pt=0,pi=1,wi=0,bi=null,ki=null,wt=null,bt=null,kt=null,e,h,v,ft,di=new THREE.RenderableVertex,gi=new THREE.RenderableVertex,y,p,w,b,k,d,et,ot,dt,gt,ni,ti,i=new THREE.Color,f=new THREE.Color,r=new THREE.Color,u=new THREE.Color,c=new THREE.Color,nr=[],tr=[],st,ht,ut,tt,ur,fr,er,or,sr,hr,ct=new THREE.Rectangle,g=new THREE.Rectangle,a=new THREE.Rectangle,ir=!1,nt=new THREE.Color,oi=new THREE.Color,si=new THREE.Color,l=new THREE.Vector3,ii,ri,rr,it,ui,hi,n=16;ii=document.createElement("canvas");ii.width=ii.height=2;ri=ii.getContext("2d");ri.fillStyle="rgba(0,0,0,1)";ri.fillRect(0,0,2,2);rr=ri.getImageData(0,0,2,2);it=rr.data;ui=document.createElement("canvas");ui.width=ui.height=n;hi=ui.getContext("2d");hi.translate(-n/2,-n/2);hi.scale(n,n);n--;this.domElement=ei;this.sortElements=this.sortObjects=this.autoClear=!0;this.info={render:{vertices:0,faces:0}};this.setSize=function(n,t){vi=n;yi=t;o=Math.floor(vi/2);s=Math.floor(yi/2);ei.width=vi;ei.height=yi;ct.set(-o,-s,o,s);g.set(-o,-s,o,s);pi=1;wi=0;kt=bt=wt=ki=bi=null};this.setClearColor=function(n,t){yt.copy(n);pt=t;g.set(-o,-s,o,s)};this.setClearColorHex=function(n,t){yt.setHex(n);pt=t;g.set(-o,-s,o,s)};this.clear=function(){t.setTransform(1,0,0,-1,o,s);g.isEmpty()||(g.minSelf(ct),g.inflate(2),pt<1&&t.clearRect(Math.floor(g.getX()),Math.floor(g.getY()),Math.floor(g.getWidth()),Math.floor(g.getHeight())),pt>0&&(lt(THREE.NormalBlending),vt(1),fi("rgba("+Math.floor(yt.r*255)+","+Math.floor(yt.g*255)+","+Math.floor(yt.b*255)+","+pt+")"),t.fillRect(Math.floor(g.getX()),Math.floor(g.getY()),Math.floor(g.getWidth()),Math.floor(g.getHeight()))),g.empty())};this.render=function(n,yt){function dr(n){var r,u,i,t;for(nt.setRGB(0,0,0),oi.setRGB(0,0,0),si.setRGB(0,0,0),r=0,u=n.length;r<u;r++)i=n[r],t=i.color,i instanceof THREE.AmbientLight?(nt.r+=t.r,nt.g+=t.g,nt.b+=t.b):i instanceof THREE.DirectionalLight?(oi.r+=t.r,oi.g+=t.g,oi.b+=t.b):i instanceof THREE.PointLight&&(si.r+=t.r,si.g+=t.g,si.b+=t.b)}function vi(n,t,i,r){for(var f,e,o,u,s=0,h=n.length;s<h;s++)f=n[s],e=f.color,f instanceof THREE.DirectionalLight?(o=f.matrixWorld.getPosition(),u=i.dot(o),u<=0||(u*=f.intensity,r.r+=e.r*u,r.g+=e.g*u,r.b+=e.b*u)):f instanceof THREE.PointLight&&(o=f.matrixWorld.getPosition(),u=i.dot(l.sub(o,t).normalize()),u<=0||(u*=f.distance==0?1:1-Math.min(t.distanceTo(o)/f.distance,1),u!=0&&(u*=f.intensity,r.r+=e.r*u,r.g+=e.g*u,r.b+=e.b*u)))}function gr(n,i,r){vt(r.opacity);lt(r.blending);var u,f,h,e,c,l;r instanceof THREE.ParticleBasicMaterial?r.map&&(e=r.map.image,c=e.width>>1,l=e.height>>1,r=i.scale.x*o,h=i.scale.y*s,u=r*c,f=h*l,a.set(n.x-u,n.y-f,n.x+u,n.y+f),ct.intersects(a)&&(t.save(),t.translate(n.x,n.y),t.rotate(-i.rotation),t.scale(r,-h),t.translate(-c,-l),t.drawImage(e,0,0),t.restore())):r instanceof THREE.ParticleCanvasMaterial&&(u=i.scale.x*o,f=i.scale.y*s,a.set(n.x-u,n.y-f,n.x+u,n.y+f),ct.intersects(a)&&(ci(r.color.getContextStyle()),fi(r.color.getContextStyle()),t.save(),t.translate(n.x,n.y),t.rotate(-i.rotation),t.scale(u,f),r.program(t),t.restore()))}function nu(n,i,r,u){vt(u.opacity);lt(u.blending);t.beginPath();t.moveTo(n.positionScreen.x,n.positionScreen.y);t.lineTo(i.positionScreen.x,i.positionScreen.y);t.closePath();u instanceof THREE.LineBasicMaterial&&(n=u.linewidth,wt!=n&&(t.lineWidth=wt=n),n=u.linecap,bt!=n&&(t.lineCap=bt=n),n=u.linejoin,kt!=n&&(t.lineJoin=kt=n),ci(u.color.getContextStyle()),t.stroke(),a.inflate(u.linewidth*2))}function wr(n,t,e,o,s,h,a,v){at.info.render.vertices+=3;at.info.render.faces++;vt(v.opacity);lt(v.blending);y=n.positionScreen.x;p=n.positionScreen.y;w=t.positionScreen.x;b=t.positionScreen.y;k=e.positionScreen.x;d=e.positionScreen.y;ar(y,p,w,b,k,d);v instanceof THREE.MeshBasicMaterial?v.map?v.map.mapping instanceof THREE.UVMapping&&(tt=a.uvs[0],br(y,p,w,b,k,d,tt[o].u,tt[o].v,tt[s].u,tt[s].v,tt[h].u,tt[h].v,v.map)):v.envMap?v.envMap.mapping instanceof THREE.SphericalReflectionMapping&&(n=yt.matrixWorldInverse,l.copy(a.vertexNormalsWorld[o]),ur=(l.x*n.n11+l.y*n.n12+l.z*n.n13)*.5+.5,fr=-(l.x*n.n21+l.y*n.n22+l.z*n.n23)*.5+.5,l.copy(a.vertexNormalsWorld[s]),er=(l.x*n.n11+l.y*n.n12+l.z*n.n13)*.5+.5,or=-(l.x*n.n21+l.y*n.n22+l.z*n.n23)*.5+.5,l.copy(a.vertexNormalsWorld[h]),sr=(l.x*n.n11+l.y*n.n12+l.z*n.n13)*.5+.5,hr=-(l.x*n.n21+l.y*n.n22+l.z*n.n23)*.5+.5,br(y,p,w,b,k,d,ur,fr,er,or,sr,hr,v.envMap)):v.wireframe?pi(v.color,v.wireframeLinewidth,v.wireframeLinecap,v.wireframeLinejoin):yi(v.color):v instanceof THREE.MeshLambertMaterial?(v.map&&!v.wireframe&&(v.map.mapping instanceof THREE.UVMapping&&(tt=a.uvs[0],br(y,p,w,b,k,d,tt[o].u,tt[o].v,tt[s].u,tt[s].v,tt[h].u,tt[h].v,v.map)),lt(THREE.SubtractiveBlending)),ir?!v.wireframe&&v.shading==THREE.SmoothShading&&a.vertexNormalsWorld.length==3?(f.r=r.r=u.r=nt.r,f.g=r.g=u.g=nt.g,f.b=r.b=u.b=nt.b,vi(rt,a.v1.positionWorld,a.vertexNormalsWorld[0],f),vi(rt,a.v2.positionWorld,a.vertexNormalsWorld[1],r),vi(rt,a.v3.positionWorld,a.vertexNormalsWorld[2],u),f.r=Math.max(0,Math.min(v.color.r*f.r,1)),f.g=Math.max(0,Math.min(v.color.g*f.g,1)),f.b=Math.max(0,Math.min(v.color.b*f.b,1)),r.r=Math.max(0,Math.min(v.color.r*r.r,1)),r.g=Math.max(0,Math.min(v.color.g*r.g,1)),r.b=Math.max(0,Math.min(v.color.b*r.b,1)),u.r=Math.max(0,Math.min(v.color.r*u.r,1)),u.g=Math.max(0,Math.min(v.color.g*u.g,1)),u.b=Math.max(0,Math.min(v.color.b*u.b,1)),c.r=(r.r+u.r)*.5,c.g=(r.g+u.g)*.5,c.b=(r.b+u.b)*.5,ut=yr(f,r,u,c),ki(y,p,w,b,k,d,0,0,1,0,0,1,ut)):(i.r=nt.r,i.g=nt.g,i.b=nt.b,vi(rt,a.centroidWorld,a.normalWorld,i),i.r=Math.max(0,Math.min(v.color.r*i.r,1)),i.g=Math.max(0,Math.min(v.color.g*i.g,1)),i.b=Math.max(0,Math.min(v.color.b*i.b,1)),v.wireframe?pi(i,v.wireframeLinewidth,v.wireframeLinecap,v.wireframeLinejoin):yi(i)):v.wireframe?pi(v.color,v.wireframeLinewidth,v.wireframeLinecap,v.wireframeLinejoin):yi(v.color)):v instanceof THREE.MeshDepthMaterial?(st=yt.near,ht=yt.far,f.r=f.g=f.b=1-bi(n.positionScreen.z,st,ht),r.r=r.g=r.b=1-bi(t.positionScreen.z,st,ht),u.r=u.g=u.b=1-bi(e.positionScreen.z,st,ht),c.r=(r.r+u.r)*.5,c.g=(r.g+u.g)*.5,c.b=(r.b+u.b)*.5,ut=yr(f,r,u,c),ki(y,p,w,b,k,d,0,0,1,0,0,1,ut)):v instanceof THREE.MeshNormalMaterial&&(i.r=lr(a.normalWorld.x),i.g=lr(a.normalWorld.y),i.b=lr(a.normalWorld.z),v.wireframe?pi(i,v.wireframeLinewidth,v.wireframeLinecap,v.wireframeLinejoin):yi(i))}function tu(n,t,e,o,s,h,l,a,v){at.info.render.vertices+=4;at.info.render.faces++;vt(a.opacity);lt(a.blending);a.map||a.envMap?(wr(n,t,o,0,1,3,l,a,v),wr(s,e,h,1,2,3,l,a,v)):(y=n.positionScreen.x,p=n.positionScreen.y,w=t.positionScreen.x,b=t.positionScreen.y,k=e.positionScreen.x,d=e.positionScreen.y,et=o.positionScreen.x,ot=o.positionScreen.y,dt=s.positionScreen.x,gt=s.positionScreen.y,ni=h.positionScreen.x,ti=h.positionScreen.y,a instanceof THREE.MeshBasicMaterial)?(vr(y,p,w,b,k,d,et,ot),a.wireframe?pi(a.color,a.wireframeLinewidth,a.wireframeLinecap,a.wireframeLinejoin):yi(a.color)):a instanceof THREE.MeshLambertMaterial?ir?!a.wireframe&&a.shading==THREE.SmoothShading&&l.vertexNormalsWorld.length==4?(f.r=r.r=u.r=c.r=nt.r,f.g=r.g=u.g=c.g=nt.g,f.b=r.b=u.b=c.b=nt.b,vi(rt,l.v1.positionWorld,l.vertexNormalsWorld[0],f),vi(rt,l.v2.positionWorld,l.vertexNormalsWorld[1],r),vi(rt,l.v4.positionWorld,l.vertexNormalsWorld[3],u),vi(rt,l.v3.positionWorld,l.vertexNormalsWorld[2],c),f.r=Math.max(0,Math.min(a.color.r*f.r,1)),f.g=Math.max(0,Math.min(a.color.g*f.g,1)),f.b=Math.max(0,Math.min(a.color.b*f.b,1)),r.r=Math.max(0,Math.min(a.color.r*r.r,1)),r.g=Math.max(0,Math.min(a.color.g*r.g,1)),r.b=Math.max(0,Math.min(a.color.b*r.b,1)),u.r=Math.max(0,Math.min(a.color.r*u.r,1)),u.g=Math.max(0,Math.min(a.color.g*u.g,1)),u.b=Math.max(0,Math.min(a.color.b*u.b,1)),c.r=Math.max(0,Math.min(a.color.r*c.r,1)),c.g=Math.max(0,Math.min(a.color.g*c.g,1)),c.b=Math.max(0,Math.min(a.color.b*c.b,1)),ut=yr(f,r,u,c),ar(y,p,w,b,et,ot),ki(y,p,w,b,et,ot,0,0,1,0,0,1,ut),ar(dt,gt,k,d,ni,ti),ki(dt,gt,k,d,ni,ti,1,0,1,1,0,1,ut)):(i.r=nt.r,i.g=nt.g,i.b=nt.b,vi(rt,l.centroidWorld,l.normalWorld,i),i.r=Math.max(0,Math.min(a.color.r*i.r,1)),i.g=Math.max(0,Math.min(a.color.g*i.g,1)),i.b=Math.max(0,Math.min(a.color.b*i.b,1)),vr(y,p,w,b,k,d,et,ot),a.wireframe?pi(i,a.wireframeLinewidth,a.wireframeLinecap,a.wireframeLinejoin):yi(i)):(vr(y,p,w,b,k,d,et,ot),a.wireframe?pi(a.color,a.wireframeLinewidth,a.wireframeLinecap,a.wireframeLinejoin):yi(a.color)):a instanceof THREE.MeshNormalMaterial?(i.r=lr(l.normalWorld.x),i.g=lr(l.normalWorld.y),i.b=lr(l.normalWorld.z),vr(y,p,w,b,k,d,et,ot),a.wireframe?pi(i,a.wireframeLinewidth,a.wireframeLinecap,a.wireframeLinejoin):yi(i)):a instanceof THREE.MeshDepthMaterial&&(st=yt.near,ht=yt.far,f.r=f.g=f.b=1-bi(n.positionScreen.z,st,ht),r.r=r.g=r.b=1-bi(t.positionScreen.z,st,ht),u.r=u.g=u.b=1-bi(o.positionScreen.z,st,ht),c.r=c.g=c.b=1-bi(e.positionScreen.z,st,ht),ut=yr(f,r,u,c),ar(y,p,w,b,et,ot),ki(y,p,w,b,et,ot,0,0,1,0,0,1,ut),ar(dt,gt,k,d,ni,ti),ki(dt,gt,k,d,ni,ti,1,0,1,1,0,1,ut))}function ar(n,i,r,u,f,e){t.beginPath();t.moveTo(n,i);t.lineTo(r,u);t.lineTo(f,e);t.lineTo(n,i);t.closePath()}function vr(n,i,r,u,f,e,o,s){t.beginPath();t.moveTo(n,i);t.lineTo(r,u);t.lineTo(f,e);t.lineTo(o,s);t.lineTo(n,i);t.closePath()}function pi(n,i,r,u){wt!=i&&(t.lineWidth=wt=i);bt!=r&&(t.lineCap=bt=r);kt!=u&&(t.lineJoin=kt=u);ci(n.getContextStyle());t.stroke();a.inflate(i*2)}function yi(n){fi(n.getContextStyle());t.fill()}function br(n,r,u,f,e,o,s,h,c,l,a,v,y){var p,w;if(y.image.width!=0){(y.needsUpdate==!0||nr[y.id]==void 0)&&(p=y.wrapS==THREE.RepeatWrapping,w=y.wrapT==THREE.RepeatWrapping,nr[y.id]=t.createPattern(y.image,p&&w?"repeat":p&&!w?"repeat-x":!p&&w?"repeat-y":"no-repeat"),y.needsUpdate=!1);fi(nr[y.id]);var p=y.offset.x/y.repeat.x,w=y.offset.y/y.repeat.y,b=y.image.width*y.repeat.x,k=y.image.height*y.repeat.y,s=(s+p)*b,h=(h+w)*k,c=(c+p)*b,l=(l+w)*k,a=(a+p)*b,v=(v+w)*k;u-=n;f-=r;e-=n;o-=r;c-=s;l-=h;a-=s;v-=h;p=c*v-a*l;p==0?(tr[y.id]==void 0&&(r=document.createElement("canvas"),r.width=y.image.width,r.height=y.image.height,n=r.getContext("2d"),n.drawImage(y.image,0,0),tr[y.id]=n.getImageData(0,0,y.image.width,y.image.height).data,delete r),r=tr[y.id],s=(Math.floor(s)+Math.floor(h)*y.image.width)*4,i.setRGB(r[s]/255,r[s+1]/255,r[s+2]/255),yi(i)):(p=1/p,y=(v*u-l*e)*p,l=(v*f-l*o)*p,u=(c*e-a*u)*p,f=(c*o-a*f)*p,n=n-y*s-u*h,s=r-l*s-f*h,t.save(),t.transform(y,l,u,f,n,s),t.fill(),t.restore())}}function ki(n,i,r,u,f,e,o,s,h,c,l,a,v){var p,y;p=v.width-1;y=v.height-1;o*=p;s*=y;h*=p;c*=y;l*=p;a*=y;r-=n;u-=i;f-=n;e-=i;h-=o;c-=s;l-=o;a-=s;y=1/(h*a-l*c);p=(a*r-c*f)*y;c=(a*u-c*e)*y;r=(h*f-l*r)*y;u=(h*e-l*u)*y;n=n-p*o-r*s;i=i-c*o-u*s;t.save();t.transform(p,c,r,u,n,i);t.clip();t.drawImage(v,0,0);t.restore()}function yr(n,t,i,r){var u=~~(n.r*255),f=~~(n.g*255),n=~~(n.b*255),e=~~(t.r*255),o=~~(t.g*255),t=~~(t.b*255),s=~~(i.r*255),h=~~(i.g*255),i=~~(i.b*255),c=~~(r.r*255),l=~~(r.g*255),r=~~(r.b*255);return it[0]=u<0?0:u>255?255:u,it[1]=f<0?0:f>255?255:f,it[2]=n<0?0:n>255?255:n,it[4]=e<0?0:e>255?255:e,it[5]=o<0?0:o>255?255:o,it[6]=t<0?0:t>255?255:t,it[8]=s<0?0:s>255?255:s,it[9]=h<0?0:h>255?255:h,it[10]=i<0?0:i>255?255:i,it[12]=c<0?0:c>255?255:c,it[13]=l<0?0:l>255?255:l,it[14]=r<0?0:r>255?255:r,ri.putImageData(rr,0,0),hi.drawImage(ii,0,0),ui}function bi(n,t,i){return n=(n-t)/(i-t),n*n*(3-2*n)}function lr(n){return n=(n+1)*.5,n<0?0:n>1?1:n}function wi(n,t){var i=t.x-n.x,r=t.y-n.y,u=i*i+r*r;u!=0&&(u=1/Math.sqrt(u),i*=u,r*=u,t.x+=i,t.y+=r,n.x-=i,n.y-=r)}var pr,kr,pt,ei;for(this.autoClear?this.clear():t.setTransform(1,0,0,-1,o,s),at.info.render.vertices=0,at.info.render.faces=0,li=cr.projectScene(n,yt,this.sortElements),ai=li.elements,rt=li.lights,(ir=rt.length>0)&&dr(rt),pr=0,kr=ai.length;pr<kr;pr++)(pt=ai[pr],ei=pt.material,ei=ei instanceof THREE.MeshFaceMaterial?pt.faceMaterial:ei,ei==null||ei.opacity==0)||(a.empty(),pt instanceof THREE.RenderableParticle?(e=pt,e.x*=o,e.y*=s,gr(e,pt,ei,n)):pt instanceof THREE.RenderableLine?(e=pt.v1,h=pt.v2,e.positionScreen.x*=o,e.positionScreen.y*=s,h.positionScreen.x*=o,h.positionScreen.y*=s,a.addPoint(e.positionScreen.x,e.positionScreen.y),a.addPoint(h.positionScreen.x,h.positionScreen.y),ct.intersects(a)&&nu(e,h,pt,ei,n)):pt instanceof THREE.RenderableFace3?(e=pt.v1,h=pt.v2,v=pt.v3,e.positionScreen.x*=o,e.positionScreen.y*=s,h.positionScreen.x*=o,h.positionScreen.y*=s,v.positionScreen.x*=o,v.positionScreen.y*=s,ei.overdraw&&(wi(e.positionScreen,h.positionScreen),wi(h.positionScreen,v.positionScreen),wi(v.positionScreen,e.positionScreen)),a.add3Points(e.positionScreen.x,e.positionScreen.y,h.positionScreen.x,h.positionScreen.y,v.positionScreen.x,v.positionScreen.y),ct.intersects(a)&&wr(e,h,v,0,1,2,pt,ei,n)):pt instanceof THREE.RenderableFace4&&(e=pt.v1,h=pt.v2,v=pt.v3,ft=pt.v4,e.positionScreen.x*=o,e.positionScreen.y*=s,h.positionScreen.x*=o,h.positionScreen.y*=s,v.positionScreen.x*=o,v.positionScreen.y*=s,ft.positionScreen.x*=o,ft.positionScreen.y*=s,di.positionScreen.copy(h.positionScreen),gi.positionScreen.copy(ft.positionScreen),ei.overdraw&&(wi(e.positionScreen,h.positionScreen),wi(h.positionScreen,ft.positionScreen),wi(ft.positionScreen,e.positionScreen),wi(v.positionScreen,di.positionScreen),wi(v.positionScreen,gi.positionScreen)),a.addPoint(e.positionScreen.x,e.positionScreen.y),a.addPoint(h.positionScreen.x,h.positionScreen.y),a.addPoint(v.positionScreen.x,v.positionScreen.y),a.addPoint(ft.positionScreen.x,ft.positionScreen.y),ct.intersects(a)&&tu(e,h,v,ft,di,gi,pt,ei,n)),g.addRectangle(a));t.setTransform(1,0,0,1,0,0)}};THREE.RenderableVertex=function(){this.positionWorld=new THREE.Vector3;this.positionScreen=new THREE.Vector4;this.visible=!0};THREE.RenderableVertex.prototype.copy=function(n){this.positionWorld.copy(n.positionWorld);this.positionScreen.copy(n.positionScreen)};THREE.RenderableFace3=function(){this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.v3=new THREE.RenderableVertex;this.centroidWorld=new THREE.Vector3;this.centroidScreen=new THREE.Vector3;this.normalWorld=new THREE.Vector3;this.vertexNormalsWorld=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.faceMaterial=this.material=null;this.uvs=[[]];this.z=null};THREE.RenderableFace4=function(){this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.v3=new THREE.RenderableVertex;this.v4=new THREE.RenderableVertex;this.centroidWorld=new THREE.Vector3;this.centroidScreen=new THREE.Vector3;this.normalWorld=new THREE.Vector3;this.vertexNormalsWorld=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.faceMaterial=this.material=null;this.uvs=[[]];this.z=null};THREE.RenderableObject=function(){this.z=this.object=null};THREE.RenderableParticle=function(){this.rotation=this.z=this.y=this.x=null;this.scale=new THREE.Vector2;this.material=null};THREE.RenderableLine=function(){this.z=null;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.material=null};Particle3D=function(n){n.transparent=!0;THREE.Particle.call(this,n);this.velocity=new THREE.Vector3(0,-8,0);this.velocity.rotateX(randomRange(-45,45));this.velocity.rotateY(randomRange(0,360));this.gravity=new THREE.Vector3(0,0,0);this.drag=1};Particle3D.prototype=new THREE.Particle;Particle3D.prototype.constructor=Particle3D;Particle3D.prototype.updatePhysics=function(){this.velocity.multiplyScalar(this.drag);this.velocity.addSelf(this.gravity);this.position.addSelf(this.velocity)};TO_RADIANS=Math.PI/180;THREE.Vector3.prototype.rotateY=function(n){cosRY=Math.cos(n*TO_RADIANS);sinRY=Math.sin(n*TO_RADIANS);var t=this.z,i=this.x;this.x=i*cosRY+t*sinRY;this.z=i*-sinRY+t*cosRY};THREE.Vector3.prototype.rotateX=function(n){cosRY=Math.cos(n*TO_RADIANS);sinRY=Math.sin(n*TO_RADIANS);var t=this.z,i=this.y;this.y=i*cosRY+t*sinRY;this.z=i*-sinRY+t*cosRY};THREE.Vector3.prototype.rotateZ=function(n){cosRY=Math.cos(n*TO_RADIANS);sinRY=Math.sin(n*TO_RADIANS);var t=this.x,i=this.y;this.y=i*cosRY+t*sinRY;this.x=i*-sinRY+t*cosRY}